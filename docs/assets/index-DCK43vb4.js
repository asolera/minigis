var bS=Object.defineProperty;var wS=(e,t,i)=>t in e?bS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var uf=(e,t,i)=>wS(e,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();var CS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mp={exports:{}},mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS=Symbol.for("react.transitional.element"),RS=Symbol.for("react.fragment");function yp(e,t,i){var n=null;if(i!==void 0&&(n=""+i),t.key!==void 0&&(n=""+t.key),"key"in t){i={};for(var s in t)s!=="key"&&(i[s]=t[s])}else i=t;return t=i.ref,{$$typeof:TS,type:e,key:n,ref:t!==void 0?t:null,props:i}}mc.Fragment=RS;mc.jsx=yp;mc.jsxs=yp;mp.exports=mc;var C=mp.exports,pp={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0=Symbol.for("react.transitional.element"),AS=Symbol.for("react.portal"),OS=Symbol.for("react.fragment"),LS=Symbol.for("react.strict_mode"),NS=Symbol.for("react.profiler"),GS=Symbol.for("react.consumer"),DS=Symbol.for("react.context"),IS=Symbol.for("react.forward_ref"),PS=Symbol.for("react.suspense"),zS=Symbol.for("react.memo"),vp=Symbol.for("react.lazy"),jS=Symbol.for("react.activity"),am=Symbol.iterator;function FS(e){return e===null||typeof e!="object"?null:(e=am&&e[am]||e["@@iterator"],typeof e=="function"?e:null)}var Ep={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xp=Object.assign,Sp={};function Jr(e,t,i){this.props=e,this.context=t,this.refs=Sp,this.updater=i||Ep}Jr.prototype.isReactComponent={};Jr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mp(){}Mp.prototype=Jr.prototype;function J0(e,t,i){this.props=e,this.context=t,this.refs=Sp,this.updater=i||Ep}var $0=J0.prototype=new Mp;$0.constructor=J0;xp($0,Jr.prototype);$0.isPureReactComponent=!0;var rm=Array.isArray;function wd(){}var kt={H:null,A:null,T:null,S:null},bp=Object.prototype.hasOwnProperty;function tg(e,t,i){var n=i.ref;return{$$typeof:Q0,type:e,key:t,ref:n!==void 0?n:null,props:i}}function US(e,t){return tg(e.type,t,e.props)}function eg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Q0}function kS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var lm=/\/+/g;function cf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kS(""+e.key):t.toString(36)}function BS(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(wd,wd):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ha(e,t,i,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(a){case"bigint":case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case Q0:case AS:r=!0;break;case vp:return r=e._init,Ha(r(e._payload),t,i,n,s)}}if(r)return s=s(e),r=n===""?"."+cf(e,0):n,rm(s)?(i="",r!=null&&(i=r.replace(lm,"$&/")+"/"),Ha(s,t,i,"",function(h){return h})):s!=null&&(eg(s)&&(s=US(s,i+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(lm,"$&/")+"/")+r)),t.push(s)),1;r=0;var l=n===""?".":n+":";if(rm(e))for(var o=0;o<e.length;o++)n=e[o],a=l+cf(n,o),r+=Ha(n,t,i,a,s);else if(o=FS(e),typeof o=="function")for(e=o.call(e),o=0;!(n=e.next()).done;)n=n.value,a=l+cf(n,o++),r+=Ha(n,t,i,a,s);else if(a==="object"){if(typeof e.then=="function")return Ha(BS(e),t,i,n,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function yh(e,t,i){if(e==null)return e;var n=[],s=0;return Ha(e,n,"","",function(a){return t.call(i,a,s++)}),n}function XS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var om=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},YS={map:yh,forEach:function(e,t,i){yh(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return yh(e,function(){t++}),t},toArray:function(e){return yh(e,function(t){return t})||[]},only:function(e){if(!eg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};it.Activity=jS;it.Children=YS;it.Component=Jr;it.Fragment=OS;it.Profiler=NS;it.PureComponent=J0;it.StrictMode=LS;it.Suspense=PS;it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=kt;it.__COMPILER_RUNTIME={__proto__:null,c:function(e){return kt.H.useMemoCache(e)}};it.cache=function(e){return function(){return e.apply(null,arguments)}};it.cacheSignal=function(){return null};it.cloneElement=function(e,t,i){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var n=xp({},e.props),s=e.key;if(t!=null)for(a in t.key!==void 0&&(s=""+t.key),t)!bp.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(n[a]=t[a]);var a=arguments.length-2;if(a===1)n.children=i;else if(1<a){for(var r=Array(a),l=0;l<a;l++)r[l]=arguments[l+2];n.children=r}return tg(e.type,s,n)};it.createContext=function(e){return e={$$typeof:DS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:GS,_context:e},e};it.createElement=function(e,t,i){var n,s={},a=null;if(t!=null)for(n in t.key!==void 0&&(a=""+t.key),t)bp.call(t,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(s[n]=t[n]);var r=arguments.length-2;if(r===1)s.children=i;else if(1<r){for(var l=Array(r),o=0;o<r;o++)l[o]=arguments[o+2];s.children=l}if(e&&e.defaultProps)for(n in r=e.defaultProps,r)s[n]===void 0&&(s[n]=r[n]);return tg(e,a,s)};it.createRef=function(){return{current:null}};it.forwardRef=function(e){return{$$typeof:IS,render:e}};it.isValidElement=eg;it.lazy=function(e){return{$$typeof:vp,_payload:{_status:-1,_result:e},_init:XS}};it.memo=function(e,t){return{$$typeof:zS,type:e,compare:t===void 0?null:t}};it.startTransition=function(e){var t=kt.T,i={};kt.T=i;try{var n=e(),s=kt.S;s!==null&&s(i,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(wd,om)}catch(a){om(a)}finally{t!==null&&i.types!==null&&(t.types=i.types),kt.T=t}};it.unstable_useCacheRefresh=function(){return kt.H.useCacheRefresh()};it.use=function(e){return kt.H.use(e)};it.useActionState=function(e,t,i){return kt.H.useActionState(e,t,i)};it.useCallback=function(e,t){return kt.H.useCallback(e,t)};it.useContext=function(e){return kt.H.useContext(e)};it.useDebugValue=function(){};it.useDeferredValue=function(e,t){return kt.H.useDeferredValue(e,t)};it.useEffect=function(e,t){return kt.H.useEffect(e,t)};it.useEffectEvent=function(e){return kt.H.useEffectEvent(e)};it.useId=function(){return kt.H.useId()};it.useImperativeHandle=function(e,t,i){return kt.H.useImperativeHandle(e,t,i)};it.useInsertionEffect=function(e,t){return kt.H.useInsertionEffect(e,t)};it.useLayoutEffect=function(e,t){return kt.H.useLayoutEffect(e,t)};it.useMemo=function(e,t){return kt.H.useMemo(e,t)};it.useOptimistic=function(e,t){return kt.H.useOptimistic(e,t)};it.useReducer=function(e,t,i){return kt.H.useReducer(e,t,i)};it.useRef=function(e){return kt.H.useRef(e)};it.useState=function(e){return kt.H.useState(e)};it.useSyncExternalStore=function(e,t,i){return kt.H.useSyncExternalStore(e,t,i)};it.useTransition=function(){return kt.H.useTransition()};it.version="19.2.0";pp.exports=it;var dt=pp.exports;const Tl=_p(dt);var wp={exports:{}},yc={},Cp={exports:{}},Tp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,G){var D=L.length;L.push(G);t:for(;0<D;){var z=D-1>>>1,Y=L[z];if(0<s(Y,G))L[z]=G,L[D]=Y,D=z;else break t}}function i(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var G=L[0],D=L.pop();if(D!==G){L[0]=D;t:for(var z=0,Y=L.length,B=Y>>>1;z<B;){var R=2*(z+1)-1,F=L[R],q=R+1,H=L[q];if(0>s(F,D))q<Y&&0>s(H,F)?(L[z]=H,L[q]=D,z=q):(L[z]=F,L[R]=D,z=R);else if(q<Y&&0>s(H,D))L[z]=H,L[q]=D,z=q;else break t}}return G}function s(L,G){var D=L.sortIndex-G.sortIndex;return D!==0?D:L.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var r=Date,l=r.now();e.unstable_now=function(){return r.now()-l}}var o=[],h=[],u=1,f=null,c=3,d=!1,g=!1,y=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;function E(L){for(var G=i(h);G!==null;){if(G.callback===null)n(h);else if(G.startTime<=L)n(h),G.sortIndex=G.expirationTime,t(o,G);else break;G=i(h)}}function M(L){if(y=!1,E(L),!g)if(i(o)!==null)g=!0,T||(T=!0,O());else{var G=i(h);G!==null&&Z(M,G.startTime-L)}}var T=!1,b=-1,x=5,S=-1;function w(){return v?!0:!(e.unstable_now()-S<x)}function A(){if(v=!1,T){var L=e.unstable_now();S=L;var G=!0;try{t:{g=!1,y&&(y=!1,m(b),b=-1),d=!0;var D=c;try{e:{for(E(L),f=i(o);f!==null&&!(f.expirationTime>L&&w());){var z=f.callback;if(typeof z=="function"){f.callback=null,c=f.priorityLevel;var Y=z(f.expirationTime<=L);if(L=e.unstable_now(),typeof Y=="function"){f.callback=Y,E(L),G=!0;break e}f===i(o)&&n(o),E(L)}else n(o);f=i(o)}if(f!==null)G=!0;else{var B=i(h);B!==null&&Z(M,B.startTime-L),G=!1}}break t}finally{f=null,c=D,d=!1}G=void 0}}finally{G?O():T=!1}}}var O;if(typeof p=="function")O=function(){p(A)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,U=P.port2;P.port1.onmessage=A,O=function(){U.postMessage(null)}}else O=function(){_(A,0)};function Z(L,G){b=_(function(){L(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return c},e.unstable_next=function(L){switch(c){case 1:case 2:case 3:var G=3;break;default:G=c}var D=c;c=G;try{return L()}finally{c=D}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var D=c;c=L;try{return G()}finally{c=D}},e.unstable_scheduleCallback=function(L,G,D){var z=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,L){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=D+Y,L={id:u++,callback:G,priorityLevel:L,startTime:D,expirationTime:Y,sortIndex:-1},D>z?(L.sortIndex=D,t(h,L),i(o)===null&&L===i(h)&&(y?(m(b),b=-1):y=!0,Z(M,D-z))):(L.sortIndex=Y,t(o,L),g||d||(g=!0,T||(T=!0,O()))),L},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(L){var G=c;return function(){var D=c;c=G;try{return L.apply(this,arguments)}finally{c=D}}}})(Tp);Cp.exports=Tp;var qS=Cp.exports,Rp={exports:{}},ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS=dt;function Ap(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Kn(){}var je={d:{f:Kn,r:function(){throw Error(Ap(522))},D:Kn,C:Kn,L:Kn,m:Kn,X:Kn,S:Kn,M:Kn},p:0,findDOMNode:null},ZS=Symbol.for("react.portal");function VS(e,t,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ZS,key:n==null?null:""+n,children:e,containerInfo:t,implementation:i}}var Xl=HS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function pc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=je;ke.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Ap(299));return VS(e,t,null,i)};ke.flushSync=function(e){var t=Xl.T,i=je.p;try{if(Xl.T=null,je.p=2,e)return e()}finally{Xl.T=t,je.p=i,je.d.f()}};ke.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,je.d.C(e,t))};ke.prefetchDNS=function(e){typeof e=="string"&&je.d.D(e)};ke.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var i=t.as,n=pc(i,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;i==="style"?je.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:n,integrity:s,fetchPriority:a}):i==="script"&&je.d.X(e,{crossOrigin:n,integrity:s,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ke.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var i=pc(t.as,t.crossOrigin);je.d.M(e,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&je.d.M(e)};ke.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var i=t.as,n=pc(i,t.crossOrigin);je.d.L(e,i,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ke.preloadModule=function(e,t){if(typeof e=="string")if(t){var i=pc(t.as,t.crossOrigin);je.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else je.d.m(e)};ke.requestFormReset=function(e){je.d.r(e)};ke.unstable_batchedUpdates=function(e,t){return e(t)};ke.useFormState=function(e,t,i){return Xl.H.useFormState(e,t,i)};ke.useFormStatus=function(){return Xl.H.useHostTransitionStatus()};ke.version="19.2.0";function Op(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Op)}catch(e){console.error(e)}}Op(),Rp.exports=ke;var KS=Rp.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ye=qS,Lp=dt,WS=KS;function I(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Np(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yo(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Gp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dp(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hm(e){if(Yo(e)!==e)throw Error(I(188))}function QS(e){var t=e.alternate;if(!t){if(t=Yo(e),t===null)throw Error(I(188));return t!==e?null:e}for(var i=e,n=t;;){var s=i.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){i=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===i)return hm(s),e;if(a===n)return hm(s),t;a=a.sibling}throw Error(I(188))}if(i.return!==n.return)i=s,n=a;else{for(var r=!1,l=s.child;l;){if(l===i){r=!0,i=s,n=a;break}if(l===n){r=!0,n=s,i=a;break}l=l.sibling}if(!r){for(l=a.child;l;){if(l===i){r=!0,i=a,n=s;break}if(l===n){r=!0,n=a,i=s;break}l=l.sibling}if(!r)throw Error(I(189))}}if(i.alternate!==n)throw Error(I(190))}if(i.tag!==3)throw Error(I(188));return i.stateNode.current===i?e:t}function Ip(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Ip(e),t!==null)return t;e=e.sibling}return null}var Xt=Object.assign,JS=Symbol.for("react.element"),ph=Symbol.for("react.transitional.element"),Rl=Symbol.for("react.portal"),tr=Symbol.for("react.fragment"),Pp=Symbol.for("react.strict_mode"),Cd=Symbol.for("react.profiler"),zp=Symbol.for("react.consumer"),An=Symbol.for("react.context"),ig=Symbol.for("react.forward_ref"),Td=Symbol.for("react.suspense"),Rd=Symbol.for("react.suspense_list"),ng=Symbol.for("react.memo"),ss=Symbol.for("react.lazy"),Ad=Symbol.for("react.activity"),$S=Symbol.for("react.memo_cache_sentinel"),um=Symbol.iterator;function gl(e){return e===null||typeof e!="object"?null:(e=um&&e[um]||e["@@iterator"],typeof e=="function"?e:null)}var t4=Symbol.for("react.client.reference");function Od(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===t4?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tr:return"Fragment";case Cd:return"Profiler";case Pp:return"StrictMode";case Td:return"Suspense";case Rd:return"SuspenseList";case Ad:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Rl:return"Portal";case An:return e.displayName||"Context";case zp:return(e._context.displayName||"Context")+".Consumer";case ig:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ng:return t=e.displayName||null,t!==null?t:Od(e.type)||"Memo";case ss:t=e._payload,e=e._init;try{return Od(e(t))}catch{}}return null}var Al=Array.isArray,Q=Lp.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bt=WS.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oa={pending:!1,data:null,method:null,action:null},Ld=[],er=-1;function cn(e){return{current:e}}function Se(e){0>er||(e.current=Ld[er],Ld[er]=null,er--)}function jt(e,t){er++,Ld[er]=e.current,e.current=t}var on=cn(null),co=cn(null),xs=cn(null),_u=cn(null);function mu(e,t){switch(jt(xs,t),jt(co,e),jt(on,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?m1(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=m1(t),e=nE(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Se(on),jt(on,e)}function Or(){Se(on),Se(co),Se(xs)}function Nd(e){e.memoizedState!==null&&jt(_u,e);var t=on.current,i=nE(t,e.type);t!==i&&(jt(co,e),jt(on,i))}function yu(e){co.current===e&&(Se(on),Se(co)),_u.current===e&&(Se(_u),Mo._currentValue=oa)}var ff,cm;function Qs(e){if(ff===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);ff=t&&t[1]||"",cm=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ff+e+cm}var df=!1;function gf(e,t){if(!e||df)return"";df=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(d){var c=d}Reflect.construct(e,[],f)}else{try{f.call()}catch(d){c=d}e.call(f.prototype)}}else{try{throw Error()}catch(d){c=d}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(d){if(d&&c&&typeof d.stack=="string")return[d.stack,c.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=n.DetermineComponentFrameRoot(),r=a[0],l=a[1];if(r&&l){var o=r.split(`
`),h=l.split(`
`);for(s=n=0;n<o.length&&!o[n].includes("DetermineComponentFrameRoot");)n++;for(;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;if(n===o.length||s===h.length)for(n=o.length-1,s=h.length-1;1<=n&&0<=s&&o[n]!==h[s];)s--;for(;1<=n&&0<=s;n--,s--)if(o[n]!==h[s]){if(n!==1||s!==1)do if(n--,s--,0>s||o[n]!==h[s]){var u=`
`+o[n].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=n&&0<=s);break}}}finally{df=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Qs(i):""}function e4(e,t){switch(e.tag){case 26:case 27:case 5:return Qs(e.type);case 16:return Qs("Lazy");case 13:return e.child!==t&&t!==null?Qs("Suspense Fallback"):Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 15:return gf(e.type,!1);case 11:return gf(e.type.render,!1);case 1:return gf(e.type,!0);case 31:return Qs("Activity");default:return""}}function fm(e){try{var t="",i=null;do t+=e4(e,i),i=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Gd=Object.prototype.hasOwnProperty,sg=ye.unstable_scheduleCallback,_f=ye.unstable_cancelCallback,i4=ye.unstable_shouldYield,n4=ye.unstable_requestPaint,gi=ye.unstable_now,s4=ye.unstable_getCurrentPriorityLevel,jp=ye.unstable_ImmediatePriority,Fp=ye.unstable_UserBlockingPriority,pu=ye.unstable_NormalPriority,a4=ye.unstable_LowPriority,Up=ye.unstable_IdlePriority,r4=ye.log,l4=ye.unstable_setDisableYieldValue,qo=null,_i=null;function cs(e){if(typeof r4=="function"&&l4(e),_i&&typeof _i.setStrictMode=="function")try{_i.setStrictMode(qo,e)}catch{}}var mi=Math.clz32?Math.clz32:u4,o4=Math.log,h4=Math.LN2;function u4(e){return e>>>=0,e===0?32:31-(o4(e)/h4|0)|0}var vh=256,Eh=262144,xh=4194304;function Js(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function vc(e,t,i){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var l=n&134217727;return l!==0?(n=l&~a,n!==0?s=Js(n):(r&=l,r!==0?s=Js(r):i||(i=l&~e,i!==0&&(s=Js(i))))):(l=n&~a,l!==0?s=Js(l):r!==0?s=Js(r):i||(i=n&~e,i!==0&&(s=Js(i)))),s===0?0:t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===32&&(i&4194048)!==0)?t:s}function Ho(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function c4(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kp(){var e=xh;return xh<<=1,!(xh&62914560)&&(xh=4194304),e}function mf(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Zo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function f4(e,t,i,n,s,a){var r=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,h=e.hiddenUpdates;for(i=r&~i;0<i;){var u=31-mi(i),f=1<<u;l[u]=0,o[u]=-1;var c=h[u];if(c!==null)for(h[u]=null,u=0;u<c.length;u++){var d=c[u];d!==null&&(d.lane&=-536870913)}i&=~f}n!==0&&Bp(e,n,0),a!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=a&~(r&~t))}function Bp(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-mi(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|i&261930}function Xp(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-mi(i),s=1<<n;s&t|e[n]&t&&(e[n]|=t),i&=~s}}function Yp(e,t){var i=t&-t;return i=i&42?1:ag(i),i&(e.suspendedLanes|t)?0:i}function ag(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function rg(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function qp(){var e=bt.p;return e!==0?e:(e=window.event,e===void 0?32:gE(e.type))}function dm(e,t){var i=bt.p;try{return bt.p=e,t()}finally{bt.p=i}}var Bs=Math.random().toString(36).slice(2),Te="__reactFiber$"+Bs,ni="__reactProps$"+Bs,$r="__reactContainer$"+Bs,Dd="__reactEvents$"+Bs,d4="__reactListeners$"+Bs,g4="__reactHandles$"+Bs,gm="__reactResources$"+Bs,Vo="__reactMarker$"+Bs;function lg(e){delete e[Te],delete e[ni],delete e[Dd],delete e[d4],delete e[g4]}function ir(e){var t=e[Te];if(t)return t;for(var i=e.parentNode;i;){if(t=i[$r]||i[Te]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=x1(e);e!==null;){if(i=e[Te])return i;e=x1(e)}return t}e=i,i=e.parentNode}return null}function tl(e){if(e=e[Te]||e[$r]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ol(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(I(33))}function yr(e){var t=e[gm];return t||(t=e[gm]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function xe(e){e[Vo]=!0}var Hp=new Set,Zp={};function Ca(e,t){Lr(e,t),Lr(e+"Capture",t)}function Lr(e,t){for(Zp[e]=t,e=0;e<t.length;e++)Hp.add(t[e])}var _4=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_m={},mm={};function m4(e){return Gd.call(mm,e)?!0:Gd.call(_m,e)?!1:_4.test(e)?mm[e]=!0:(_m[e]=!0,!1)}function Kh(e,t,i){if(m4(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Sh(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function yn(e,t,i,n){if(n===null)e.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+n)}}function Ti(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function y4(e,t,i){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(r){i=""+r,a.call(this,r)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(r){i=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Id(e){if(!e._valueTracker){var t=Vp(e)?"checked":"value";e._valueTracker=y4(e,t,""+e[t])}}function Kp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Vp(e)?e.checked?"true":"false":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function vu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var p4=/[\n"\\]/g;function Oi(e){return e.replace(p4,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Pd(e,t,i,n,s,a,r,l){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ti(t)):e.value!==""+Ti(t)&&(e.value=""+Ti(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?zd(e,r,Ti(t)):i!=null?zd(e,r,Ti(i)):n!=null&&e.removeAttribute("value"),s==null&&a!=null&&(e.defaultChecked=!!a),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Ti(l):e.removeAttribute("name")}function Wp(e,t,i,n,s,a,r,l){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.type=a),t!=null||i!=null){if(!(a!=="submit"&&a!=="reset"||t!=null)){Id(e);return}i=i!=null?""+Ti(i):"",t=t!=null?""+Ti(t):i,l||t===e.value||(e.value=t),e.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=l?e.checked:!!n,e.defaultChecked=!!n,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),Id(e)}function zd(e,t,i){t==="number"&&vu(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function pr(e,t,i,n){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&n&&(e[i].defaultSelected=!0)}else{for(i=""+Ti(i),t=null,s=0;s<e.length;s++){if(e[s].value===i){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Qp(e,t,i){if(t!=null&&(t=""+Ti(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Ti(i):""}function Jp(e,t,i,n){if(t==null){if(n!=null){if(i!=null)throw Error(I(92));if(Al(n)){if(1<n.length)throw Error(I(93));n=n[0]}i=n}i==null&&(i=""),t=i}i=Ti(t),e.defaultValue=i,n=e.textContent,n===i&&n!==""&&n!==null&&(e.value=n),Id(e)}function Nr(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var v4=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ym(e,t,i){var n=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,i):typeof i!="number"||i===0||v4.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function $p(e,t,i){if(t!=null&&typeof t!="object")throw Error(I(62));if(e=e.style,i!=null){for(var n in i)!i.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&i[s]!==n&&ym(e,s,n)}else for(var a in t)t.hasOwnProperty(a)&&ym(e,a,t[a])}function og(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var E4=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),x4=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wh(e){return x4.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function On(){}var jd=null;function hg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var nr=null,vr=null;function pm(e){var t=tl(e);if(t&&(e=t.stateNode)){var i=e[ni]||null;t:switch(e=t.stateNode,t.type){case"input":if(Pd(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Oi(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var s=n[ni]||null;if(!s)throw Error(I(90));Pd(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<i.length;t++)n=i[t],n.form===e.form&&Kp(n)}break t;case"textarea":Qp(e,i.value,i.defaultValue);break t;case"select":t=i.value,t!=null&&pr(e,!!i.multiple,t,!1)}}}var yf=!1;function tv(e,t,i){if(yf)return e(t,i);yf=!0;try{var n=e(t);return n}finally{if(yf=!1,(nr!==null||vr!==null)&&(Lc(),nr&&(t=nr,e=vr,vr=nr=null,pm(t),e)))for(t=0;t<e.length;t++)pm(e[t])}}function fo(e,t){var i=e.stateNode;if(i===null)return null;var n=i[ni]||null;if(n===null)return null;i=n[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break t;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(I(231,t,typeof i));return i}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fd=!1;if(Fn)try{var _l={};Object.defineProperty(_l,"passive",{get:function(){Fd=!0}}),window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{Fd=!1}var fs=null,ug=null,Qh=null;function ev(){if(Qh)return Qh;var e,t=ug,i=t.length,n,s="value"in fs?fs.value:fs.textContent,a=s.length;for(e=0;e<i&&t[e]===s[e];e++);var r=i-e;for(n=1;n<=r&&t[i-n]===s[a-n];n++);return Qh=s.slice(e,1<n?1-n:void 0)}function Jh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mh(){return!0}function vm(){return!1}function si(e){function t(i,n,s,a,r){this._reactName=i,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=r,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Mh:vm,this.isPropagationStopped=vm,this}return Xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Mh)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Mh)},persist:function(){},isPersistent:Mh}),t}var Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ec=si(Ta),Ko=Xt({},Ta,{view:0,detail:0}),S4=si(Ko),pf,vf,ml,xc=Xt({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ml&&(ml&&e.type==="mousemove"?(pf=e.screenX-ml.screenX,vf=e.screenY-ml.screenY):vf=pf=0,ml=e),pf)},movementY:function(e){return"movementY"in e?e.movementY:vf}}),Em=si(xc),M4=Xt({},xc,{dataTransfer:0}),b4=si(M4),w4=Xt({},Ko,{relatedTarget:0}),Ef=si(w4),C4=Xt({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0}),T4=si(C4),R4=Xt({},Ta,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),A4=si(R4),O4=Xt({},Ta,{data:0}),xm=si(O4),L4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=G4[e])?!!t[e]:!1}function cg(){return D4}var I4=Xt({},Ko,{key:function(e){if(e.key){var t=L4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?N4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cg,charCode:function(e){return e.type==="keypress"?Jh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),P4=si(I4),z4=Xt({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sm=si(z4),j4=Xt({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cg}),F4=si(j4),U4=Xt({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),k4=si(U4),B4=Xt({},xc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X4=si(B4),Y4=Xt({},Ta,{newState:0,oldState:0}),q4=si(Y4),H4=[9,13,27,32],fg=Fn&&"CompositionEvent"in window,Yl=null;Fn&&"documentMode"in document&&(Yl=document.documentMode);var Z4=Fn&&"TextEvent"in window&&!Yl,iv=Fn&&(!fg||Yl&&8<Yl&&11>=Yl),Mm=" ",bm=!1;function nv(e,t){switch(e){case"keyup":return H4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sr=!1;function V4(e,t){switch(e){case"compositionend":return sv(t);case"keypress":return t.which!==32?null:(bm=!0,Mm);case"textInput":return e=t.data,e===Mm&&bm?null:e;default:return null}}function K4(e,t){if(sr)return e==="compositionend"||!fg&&nv(e,t)?(e=ev(),Qh=ug=fs=null,sr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return iv&&t.locale!=="ko"?null:t.data;default:return null}}var W4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!W4[e.type]:t==="textarea"}function av(e,t,i,n){nr?vr?vr.push(n):vr=[n]:nr=n,t=zu(t,"onChange"),0<t.length&&(i=new Ec("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var ql=null,go=null;function Q4(e){tE(e,0)}function Sc(e){var t=Ol(e);if(Kp(t))return e}function Cm(e,t){if(e==="change")return t}var rv=!1;if(Fn){var xf;if(Fn){var Sf="oninput"in document;if(!Sf){var Tm=document.createElement("div");Tm.setAttribute("oninput","return;"),Sf=typeof Tm.oninput=="function"}xf=Sf}else xf=!1;rv=xf&&(!document.documentMode||9<document.documentMode)}function Rm(){ql&&(ql.detachEvent("onpropertychange",lv),go=ql=null)}function lv(e){if(e.propertyName==="value"&&Sc(go)){var t=[];av(t,go,e,hg(e)),tv(Q4,t)}}function J4(e,t,i){e==="focusin"?(Rm(),ql=t,go=i,ql.attachEvent("onpropertychange",lv)):e==="focusout"&&Rm()}function $4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sc(go)}function tM(e,t){if(e==="click")return Sc(t)}function eM(e,t){if(e==="input"||e==="change")return Sc(t)}function iM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pi=typeof Object.is=="function"?Object.is:iM;function _o(e,t){if(pi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var s=i[n];if(!Gd.call(t,s)||!pi(e[s],t[s]))return!1}return!0}function Am(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Om(e,t){var i=Am(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=Am(i)}}function ov(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ov(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hv(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=vu(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=vu(e.document)}return t}function dg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var nM=Fn&&"documentMode"in document&&11>=document.documentMode,ar=null,Ud=null,Hl=null,kd=!1;function Lm(e,t,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;kd||ar==null||ar!==vu(n)||(n=ar,"selectionStart"in n&&dg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Hl&&_o(Hl,n)||(Hl=n,n=zu(Ud,"onSelect"),0<n.length&&(t=new Ec("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=ar)))}function Vs(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var rr={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionrun:Vs("Transition","TransitionRun"),transitionstart:Vs("Transition","TransitionStart"),transitioncancel:Vs("Transition","TransitionCancel"),transitionend:Vs("Transition","TransitionEnd")},Mf={},uv={};Fn&&(uv=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function Ra(e){if(Mf[e])return Mf[e];if(!rr[e])return e;var t=rr[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in uv)return Mf[e]=t[i];return e}var cv=Ra("animationend"),fv=Ra("animationiteration"),dv=Ra("animationstart"),sM=Ra("transitionrun"),aM=Ra("transitionstart"),rM=Ra("transitioncancel"),gv=Ra("transitionend"),_v=new Map,Bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bd.push("scrollEnd");function Ji(e,t){_v.set(e,t),Ca(t,[e])}var Eu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ci=[],lr=0,gg=0;function Mc(){for(var e=lr,t=gg=lr=0;t<e;){var i=Ci[t];Ci[t++]=null;var n=Ci[t];Ci[t++]=null;var s=Ci[t];Ci[t++]=null;var a=Ci[t];if(Ci[t++]=null,n!==null&&s!==null){var r=n.pending;r===null?s.next=s:(s.next=r.next,r.next=s),n.pending=s}a!==0&&mv(i,s,a)}}function bc(e,t,i,n){Ci[lr++]=e,Ci[lr++]=t,Ci[lr++]=i,Ci[lr++]=n,gg|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function _g(e,t,i,n){return bc(e,t,i,n),xu(e)}function Aa(e,t){return bc(e,null,null,t),xu(e)}function mv(e,t,i){e.lanes|=i;var n=e.alternate;n!==null&&(n.lanes|=i);for(var s=!1,a=e.return;a!==null;)a.childLanes|=i,n=a.alternate,n!==null&&(n.childLanes|=i),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(s=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,s&&t!==null&&(s=31-mi(i),e=a.hiddenUpdates,n=e[s],n===null?e[s]=[t]:n.push(t),t.lane=i|536870912),a):null}function xu(e){if(50<eo)throw eo=0,h0=null,Error(I(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var or={};function lM(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(e,t,i,n){return new lM(e,t,i,n)}function mg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nn(e,t){var i=e.alternate;return i===null?(i=ci(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function yv(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function $h(e,t,i,n,s,a){var r=0;if(n=e,typeof e=="function")mg(e)&&(r=1);else if(typeof e=="string")r=fb(e,i,on.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Ad:return e=ci(31,i,t,s),e.elementType=Ad,e.lanes=a,e;case tr:return ha(i.children,s,a,t);case Pp:r=8,s|=24;break;case Cd:return e=ci(12,i,t,s|2),e.elementType=Cd,e.lanes=a,e;case Td:return e=ci(13,i,t,s),e.elementType=Td,e.lanes=a,e;case Rd:return e=ci(19,i,t,s),e.elementType=Rd,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case An:r=10;break t;case zp:r=9;break t;case ig:r=11;break t;case ng:r=14;break t;case ss:r=16,n=null;break t}r=29,i=Error(I(130,e===null?"null":typeof e,"")),n=null}return t=ci(r,i,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function ha(e,t,i,n){return e=ci(7,e,n,t),e.lanes=i,e}function bf(e,t,i){return e=ci(6,e,null,t),e.lanes=i,e}function pv(e){var t=ci(18,null,null,0);return t.stateNode=e,t}function wf(e,t,i){return t=ci(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Nm=new WeakMap;function Li(e,t){if(typeof e=="object"&&e!==null){var i=Nm.get(e);return i!==void 0?i:(t={value:e,source:t,stack:fm(t)},Nm.set(e,t),t)}return{value:e,source:t,stack:fm(t)}}var hr=[],ur=0,Su=null,mo=0,Ri=[],Ai=0,Gs=null,sn=1,an="";function wn(e,t){hr[ur++]=mo,hr[ur++]=Su,Su=e,mo=t}function vv(e,t,i){Ri[Ai++]=sn,Ri[Ai++]=an,Ri[Ai++]=Gs,Gs=e;var n=sn;e=an;var s=32-mi(n)-1;n&=~(1<<s),i+=1;var a=32-mi(t)+s;if(30<a){var r=s-s%5;a=(n&(1<<r)-1).toString(32),n>>=r,s-=r,sn=1<<32-mi(t)+s|i<<s|n,an=a+e}else sn=1<<a|i<<s|n,an=e}function yg(e){e.return!==null&&(wn(e,1),vv(e,1,0))}function pg(e){for(;e===Su;)Su=hr[--ur],hr[ur]=null,mo=hr[--ur],hr[ur]=null;for(;e===Gs;)Gs=Ri[--Ai],Ri[Ai]=null,an=Ri[--Ai],Ri[Ai]=null,sn=Ri[--Ai],Ri[Ai]=null}function Ev(e,t){Ri[Ai++]=sn,Ri[Ai++]=an,Ri[Ai++]=Gs,sn=t.id,an=t.overflow,Gs=e}var Re=null,Ut=null,yt=!1,Ss=null,Ni=!1,Xd=Error(I(519));function Ds(e){var t=Error(I(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yo(Li(t,e)),Xd}function Gm(e){var t=e.stateNode,i=e.type,n=e.memoizedProps;switch(t[Te]=e,t[ni]=n,i){case"dialog":ut("cancel",t),ut("close",t);break;case"iframe":case"object":case"embed":ut("load",t);break;case"video":case"audio":for(i=0;i<xo.length;i++)ut(xo[i],t);break;case"source":ut("error",t);break;case"img":case"image":case"link":ut("error",t),ut("load",t);break;case"details":ut("toggle",t);break;case"input":ut("invalid",t),Wp(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":ut("invalid",t);break;case"textarea":ut("invalid",t),Jp(t,n.value,n.defaultValue,n.children)}i=n.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||n.suppressHydrationWarning===!0||iE(t.textContent,i)?(n.popover!=null&&(ut("beforetoggle",t),ut("toggle",t)),n.onScroll!=null&&ut("scroll",t),n.onScrollEnd!=null&&ut("scrollend",t),n.onClick!=null&&(t.onclick=On),t=!0):t=!1,t||Ds(e,!0)}function Dm(e){for(Re=e.return;Re;)switch(Re.tag){case 5:case 31:case 13:Ni=!1;return;case 27:case 3:Ni=!0;return;default:Re=Re.return}}function za(e){if(e!==Re)return!1;if(!yt)return Dm(e),yt=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||g0(e.type,e.memoizedProps)),i=!i),i&&Ut&&Ds(e),Dm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));Ut=E1(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));Ut=E1(e)}else t===27?(t=Ut,Xs(e.type)?(e=p0,p0=null,Ut=e):Ut=t):Ut=Re?zi(e.stateNode.nextSibling):null;return!0}function ma(){Ut=Re=null,yt=!1}function Cf(){var e=Ss;return e!==null&&(Ze===null?Ze=e:Ze.push.apply(Ze,e),Ss=null),e}function yo(e){Ss===null?Ss=[e]:Ss.push(e)}var Yd=cn(null),Oa=null,Ln=null;function ls(e,t,i){jt(Yd,t._currentValue),t._currentValue=i}function Gn(e){e._currentValue=Yd.current,Se(Yd)}function qd(e,t,i){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Hd(e,t,i,n){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){var r=s.child;a=a.firstContext;t:for(;a!==null;){var l=a;a=s;for(var o=0;o<t.length;o++)if(l.context===t[o]){a.lanes|=i,l=a.alternate,l!==null&&(l.lanes|=i),qd(a.return,i,e),n||(r=null);break t}a=l.next}}else if(s.tag===18){if(r=s.return,r===null)throw Error(I(341));r.lanes|=i,a=r.alternate,a!==null&&(a.lanes|=i),qd(r,i,e),r=null}else r=s.child;if(r!==null)r.return=s;else for(r=s;r!==null;){if(r===e){r=null;break}if(s=r.sibling,s!==null){s.return=r.return,r=s;break}r=r.return}s=r}}function el(e,t,i,n){e=null;for(var s=t,a=!1;s!==null;){if(!a){if(s.flags&524288)a=!0;else if(s.flags&262144)break}if(s.tag===10){var r=s.alternate;if(r===null)throw Error(I(387));if(r=r.memoizedProps,r!==null){var l=s.type;pi(s.pendingProps.value,r.value)||(e!==null?e.push(l):e=[l])}}else if(s===_u.current){if(r=s.alternate,r===null)throw Error(I(387));r.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Mo):e=[Mo])}s=s.return}e!==null&&Hd(t,e,i,n),t.flags|=262144}function Mu(e){for(e=e.firstContext;e!==null;){if(!pi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ya(e){Oa=e,Ln=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ae(e){return xv(Oa,e)}function bh(e,t){return Oa===null&&ya(e),xv(e,t)}function xv(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ln===null){if(e===null)throw Error(I(308));Ln=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ln=Ln.next=t;return i}var oM=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},hM=ye.unstable_scheduleCallback,uM=ye.unstable_NormalPriority,ue={$$typeof:An,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vg(){return{controller:new oM,data:new Map,refCount:0}}function Wo(e){e.refCount--,e.refCount===0&&hM(uM,function(){e.controller.abort()})}var Zl=null,Zd=0,Gr=0,Er=null;function cM(e,t){if(Zl===null){var i=Zl=[];Zd=0,Gr=Yg(),Er={status:"pending",value:void 0,then:function(n){i.push(n)}}}return Zd++,t.then(Im,Im),t}function Im(){if(--Zd===0&&Zl!==null){Er!==null&&(Er.status="fulfilled");var e=Zl;Zl=null,Gr=0,Er=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function fM(e,t){var i=[],n={status:"pending",value:null,reason:null,then:function(s){i.push(s)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<i.length;s++)(0,i[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<i.length;s++)(0,i[s])(void 0)}),n}var Pm=Q.S;Q.S=function(e,t){I2=gi(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&cM(e,t),Pm!==null&&Pm(e,t)};var ua=cn(null);function Eg(){var e=ua.current;return e!==null?e:zt.pooledCache}function tu(e,t){t===null?jt(ua,ua.current):jt(ua,t.pool)}function Sv(){var e=Eg();return e===null?null:{parent:ue._currentValue,pool:e}}var il=Error(I(460)),xg=Error(I(474)),wc=Error(I(542)),bu={then:function(){}};function zm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Mv(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(On,On),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Fm(e),e;default:if(typeof t.status=="string")t.then(On,On);else{if(e=zt,e!==null&&100<e.shellSuspendCounter)throw Error(I(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Fm(e),e}throw ca=t,il}}function $s(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ca=i,il):i}}var ca=null;function jm(){if(ca===null)throw Error(I(459));var e=ca;return ca=null,e}function Fm(e){if(e===il||e===wc)throw Error(I(483))}var xr=null,po=0;function wh(e){var t=po;return po+=1,xr===null&&(xr=[]),Mv(xr,e,t)}function yl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ch(e,t){throw t.$$typeof===JS?Error(I(525)):(e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function bv(e){function t(_,m){if(e){var p=_.deletions;p===null?(_.deletions=[m],_.flags|=16):p.push(m)}}function i(_,m){if(!e)return null;for(;m!==null;)t(_,m),m=m.sibling;return null}function n(_){for(var m=new Map;_!==null;)_.key!==null?m.set(_.key,_):m.set(_.index,_),_=_.sibling;return m}function s(_,m){return _=Nn(_,m),_.index=0,_.sibling=null,_}function a(_,m,p){return _.index=p,e?(p=_.alternate,p!==null?(p=p.index,p<m?(_.flags|=67108866,m):p):(_.flags|=67108866,m)):(_.flags|=1048576,m)}function r(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function l(_,m,p,E){return m===null||m.tag!==6?(m=bf(p,_.mode,E),m.return=_,m):(m=s(m,p),m.return=_,m)}function o(_,m,p,E){var M=p.type;return M===tr?u(_,m,p.props.children,E,p.key):m!==null&&(m.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ss&&$s(M)===m.type)?(m=s(m,p.props),yl(m,p),m.return=_,m):(m=$h(p.type,p.key,p.props,null,_.mode,E),yl(m,p),m.return=_,m)}function h(_,m,p,E){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=wf(p,_.mode,E),m.return=_,m):(m=s(m,p.children||[]),m.return=_,m)}function u(_,m,p,E,M){return m===null||m.tag!==7?(m=ha(p,_.mode,E,M),m.return=_,m):(m=s(m,p),m.return=_,m)}function f(_,m,p){if(typeof m=="string"&&m!==""||typeof m=="number"||typeof m=="bigint")return m=bf(""+m,_.mode,p),m.return=_,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ph:return p=$h(m.type,m.key,m.props,null,_.mode,p),yl(p,m),p.return=_,p;case Rl:return m=wf(m,_.mode,p),m.return=_,m;case ss:return m=$s(m),f(_,m,p)}if(Al(m)||gl(m))return m=ha(m,_.mode,p,null),m.return=_,m;if(typeof m.then=="function")return f(_,wh(m),p);if(m.$$typeof===An)return f(_,bh(_,m),p);Ch(_,m)}return null}function c(_,m,p,E){var M=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number"||typeof p=="bigint")return M!==null?null:l(_,m,""+p,E);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ph:return p.key===M?o(_,m,p,E):null;case Rl:return p.key===M?h(_,m,p,E):null;case ss:return p=$s(p),c(_,m,p,E)}if(Al(p)||gl(p))return M!==null?null:u(_,m,p,E,null);if(typeof p.then=="function")return c(_,m,wh(p),E);if(p.$$typeof===An)return c(_,m,bh(_,p),E);Ch(_,p)}return null}function d(_,m,p,E,M){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return _=_.get(p)||null,l(m,_,""+E,M);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ph:return _=_.get(E.key===null?p:E.key)||null,o(m,_,E,M);case Rl:return _=_.get(E.key===null?p:E.key)||null,h(m,_,E,M);case ss:return E=$s(E),d(_,m,p,E,M)}if(Al(E)||gl(E))return _=_.get(p)||null,u(m,_,E,M,null);if(typeof E.then=="function")return d(_,m,p,wh(E),M);if(E.$$typeof===An)return d(_,m,p,bh(m,E),M);Ch(m,E)}return null}function g(_,m,p,E){for(var M=null,T=null,b=m,x=m=0,S=null;b!==null&&x<p.length;x++){b.index>x?(S=b,b=null):S=b.sibling;var w=c(_,b,p[x],E);if(w===null){b===null&&(b=S);break}e&&b&&w.alternate===null&&t(_,b),m=a(w,m,x),T===null?M=w:T.sibling=w,T=w,b=S}if(x===p.length)return i(_,b),yt&&wn(_,x),M;if(b===null){for(;x<p.length;x++)b=f(_,p[x],E),b!==null&&(m=a(b,m,x),T===null?M=b:T.sibling=b,T=b);return yt&&wn(_,x),M}for(b=n(b);x<p.length;x++)S=d(b,_,x,p[x],E),S!==null&&(e&&S.alternate!==null&&b.delete(S.key===null?x:S.key),m=a(S,m,x),T===null?M=S:T.sibling=S,T=S);return e&&b.forEach(function(A){return t(_,A)}),yt&&wn(_,x),M}function y(_,m,p,E){if(p==null)throw Error(I(151));for(var M=null,T=null,b=m,x=m=0,S=null,w=p.next();b!==null&&!w.done;x++,w=p.next()){b.index>x?(S=b,b=null):S=b.sibling;var A=c(_,b,w.value,E);if(A===null){b===null&&(b=S);break}e&&b&&A.alternate===null&&t(_,b),m=a(A,m,x),T===null?M=A:T.sibling=A,T=A,b=S}if(w.done)return i(_,b),yt&&wn(_,x),M;if(b===null){for(;!w.done;x++,w=p.next())w=f(_,w.value,E),w!==null&&(m=a(w,m,x),T===null?M=w:T.sibling=w,T=w);return yt&&wn(_,x),M}for(b=n(b);!w.done;x++,w=p.next())w=d(b,_,x,w.value,E),w!==null&&(e&&w.alternate!==null&&b.delete(w.key===null?x:w.key),m=a(w,m,x),T===null?M=w:T.sibling=w,T=w);return e&&b.forEach(function(O){return t(_,O)}),yt&&wn(_,x),M}function v(_,m,p,E){if(typeof p=="object"&&p!==null&&p.type===tr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case ph:t:{for(var M=p.key;m!==null;){if(m.key===M){if(M=p.type,M===tr){if(m.tag===7){i(_,m.sibling),E=s(m,p.props.children),E.return=_,_=E;break t}}else if(m.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ss&&$s(M)===m.type){i(_,m.sibling),E=s(m,p.props),yl(E,p),E.return=_,_=E;break t}i(_,m);break}else t(_,m);m=m.sibling}p.type===tr?(E=ha(p.props.children,_.mode,E,p.key),E.return=_,_=E):(E=$h(p.type,p.key,p.props,null,_.mode,E),yl(E,p),E.return=_,_=E)}return r(_);case Rl:t:{for(M=p.key;m!==null;){if(m.key===M)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){i(_,m.sibling),E=s(m,p.children||[]),E.return=_,_=E;break t}else{i(_,m);break}else t(_,m);m=m.sibling}E=wf(p,_.mode,E),E.return=_,_=E}return r(_);case ss:return p=$s(p),v(_,m,p,E)}if(Al(p))return g(_,m,p,E);if(gl(p)){if(M=gl(p),typeof M!="function")throw Error(I(150));return p=M.call(p),y(_,m,p,E)}if(typeof p.then=="function")return v(_,m,wh(p),E);if(p.$$typeof===An)return v(_,m,bh(_,p),E);Ch(_,p)}return typeof p=="string"&&p!==""||typeof p=="number"||typeof p=="bigint"?(p=""+p,m!==null&&m.tag===6?(i(_,m.sibling),E=s(m,p),E.return=_,_=E):(i(_,m),E=bf(p,_.mode,E),E.return=_,_=E),r(_)):i(_,m)}return function(_,m,p,E){try{po=0;var M=v(_,m,p,E);return xr=null,M}catch(b){if(b===il||b===wc)throw b;var T=ci(29,b,null,_.mode);return T.lanes=E,T.return=_,T}finally{}}}var pa=bv(!0),wv=bv(!1),as=!1;function Sg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ms(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bs(e,t,i){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Mt&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=xu(e),mv(e,null,i),t}return bc(e,n,t,i),xu(e)}function Vl(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,Xp(e,i)}}function Tf(e,t){var i=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var s=null,a=null;if(i=i.firstBaseUpdate,i!==null){do{var r={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};a===null?s=a=r:a=a.next=r,i=i.next}while(i!==null);a===null?s=a=t:a=a.next=t}else s=a=t;i={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,callbacks:n.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Kd=!1;function Kl(){if(Kd){var e=Er;if(e!==null)throw e}}function Wl(e,t,i,n){Kd=!1;var s=e.updateQueue;as=!1;var a=s.firstBaseUpdate,r=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var o=l,h=o.next;o.next=null,r===null?a=h:r.next=h,r=o;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==r&&(l===null?u.firstBaseUpdate=h:l.next=h,u.lastBaseUpdate=o))}if(a!==null){var f=s.baseState;r=0,u=h=o=null,l=a;do{var c=l.lane&-536870913,d=c!==l.lane;if(d?(gt&c)===c:(n&c)===c){c!==0&&c===Gr&&(Kd=!0),u!==null&&(u=u.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var g=e,y=l;c=t;var v=i;switch(y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(v,f,c);break t}f=g;break t;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,c=typeof g=="function"?g.call(v,f,c):g,c==null)break t;f=Xt({},f,c);break t;case 2:as=!0}}c=l.callback,c!==null&&(e.flags|=64,d&&(e.flags|=8192),d=s.callbacks,d===null?s.callbacks=[c]:d.push(c))}else d={lane:c,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(h=u=d,o=f):u=u.next=d,r|=c;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;d=l,l=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);u===null&&(o=f),s.baseState=o,s.firstBaseUpdate=h,s.lastBaseUpdate=u,a===null&&(s.shared.lanes=0),Ps|=r,e.lanes=r,e.memoizedState=f}}function Cv(e,t){if(typeof e!="function")throw Error(I(191,e));e.call(t)}function Tv(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Cv(i[e],t)}var Dr=cn(null),wu=cn(0);function Um(e,t){e=Xn,jt(wu,e),jt(Dr,t),Xn=e|t.baseLanes}function Wd(){jt(wu,Xn),jt(Dr,Dr.current)}function Mg(){Xn=wu.current,Se(Dr),Se(wu)}var vi=cn(null),Pi=null;function os(e){var t=e.alternate;jt(se,se.current&1),jt(vi,e),Pi===null&&(t===null||Dr.current!==null||t.memoizedState!==null)&&(Pi=e)}function Qd(e){jt(se,se.current),jt(vi,e),Pi===null&&(Pi=e)}function Rv(e){e.tag===22?(jt(se,se.current),jt(vi,e),Pi===null&&(Pi=e)):hs()}function hs(){jt(se,se.current),jt(vi,vi.current)}function oi(e){Se(vi),Pi===e&&(Pi=null),Se(se)}var se=cn(0);function Cu(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||m0(i)||y0(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Un=0,at=null,It=null,oe=null,Tu=!1,Sr=!1,va=!1,Ru=0,vo=0,Mr=null,dM=0;function Jt(){throw Error(I(321))}function bg(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!pi(e[i],t[i]))return!1;return!0}function wg(e,t,i,n,s,a){return Un=a,at=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Q.H=e===null||e.memoizedState===null?a2:Pg,va=!1,a=i(n,s),va=!1,Sr&&(a=Ov(t,i,n,s)),Av(e),a}function Av(e){Q.H=Eo;var t=It!==null&&It.next!==null;if(Un=0,oe=It=at=null,Tu=!1,vo=0,Mr=null,t)throw Error(I(300));e===null||ce||(e=e.dependencies,e!==null&&Mu(e)&&(ce=!0))}function Ov(e,t,i,n){at=e;var s=0;do{if(Sr&&(Mr=null),vo=0,Sr=!1,25<=s)throw Error(I(301));if(s+=1,oe=It=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}Q.H=r2,a=t(i,n)}while(Sr);return a}function gM(){var e=Q.H,t=e.useState()[0];return t=typeof t.then=="function"?Qo(t):t,e=e.useState()[0],(It!==null?It.memoizedState:null)!==e&&(at.flags|=1024),t}function Cg(){var e=Ru!==0;return Ru=0,e}function Tg(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Rg(e){if(Tu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Tu=!1}Un=0,oe=It=at=null,Sr=!1,vo=Ru=0,Mr=null}function Pe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?at.memoizedState=oe=e:oe=oe.next=e,oe}function ae(){if(It===null){var e=at.alternate;e=e!==null?e.memoizedState:null}else e=It.next;var t=oe===null?at.memoizedState:oe.next;if(t!==null)oe=t,It=e;else{if(e===null)throw at.alternate===null?Error(I(467)):Error(I(310));It=e,e={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},oe===null?at.memoizedState=oe=e:oe=oe.next=e}return oe}function Cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qo(e){var t=vo;return vo+=1,Mr===null&&(Mr=[]),e=Mv(Mr,e,t),t=at,(oe===null?t.memoizedState:oe.next)===null&&(t=t.alternate,Q.H=t===null||t.memoizedState===null?a2:Pg),e}function Tc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qo(e);if(e.$$typeof===An)return Ae(e)}throw Error(I(438,String(e)))}function Ag(e){var t=null,i=at.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var n=at.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Cc(),at.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),n=0;n<e;n++)i[n]=$S;return t.index++,i}function kn(e,t){return typeof t=="function"?t(e):t}function eu(e){var t=ae();return Og(t,It,e)}function Og(e,t,i){var n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=i;var s=e.baseQueue,a=n.pending;if(a!==null){if(s!==null){var r=s.next;s.next=a.next,a.next=r}t.baseQueue=s=a,n.pending=null}if(a=e.baseState,s===null)e.memoizedState=a;else{t=s.next;var l=r=null,o=null,h=t,u=!1;do{var f=h.lane&-536870913;if(f!==h.lane?(gt&f)===f:(Un&f)===f){var c=h.revertLane;if(c===0)o!==null&&(o=o.next={lane:0,revertLane:0,gesture:null,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),f===Gr&&(u=!0);else if((Un&c)===c){h=h.next,c===Gr&&(u=!0);continue}else f={lane:0,revertLane:h.revertLane,gesture:null,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},o===null?(l=o=f,r=a):o=o.next=f,at.lanes|=c,Ps|=c;f=h.action,va&&i(a,f),a=h.hasEagerState?h.eagerState:i(a,f)}else c={lane:f,revertLane:h.revertLane,gesture:h.gesture,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},o===null?(l=o=c,r=a):o=o.next=c,at.lanes|=f,Ps|=f;h=h.next}while(h!==null&&h!==t);if(o===null?r=a:o.next=l,!pi(a,e.memoizedState)&&(ce=!0,u&&(i=Er,i!==null)))throw i;e.memoizedState=a,e.baseState=r,e.baseQueue=o,n.lastRenderedState=a}return s===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Rf(e){var t=ae(),i=t.queue;if(i===null)throw Error(I(311));i.lastRenderedReducer=e;var n=i.dispatch,s=i.pending,a=t.memoizedState;if(s!==null){i.pending=null;var r=s=s.next;do a=e(a,r.action),r=r.next;while(r!==s);pi(a,t.memoizedState)||(ce=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),i.lastRenderedState=a}return[a,n]}function Lv(e,t,i){var n=at,s=ae(),a=yt;if(a){if(i===void 0)throw Error(I(407));i=i()}else i=t();var r=!pi((It||s).memoizedState,i);if(r&&(s.memoizedState=i,ce=!0),s=s.queue,Lg(Dv.bind(null,n,s,e),[e]),s.getSnapshot!==t||r||oe!==null&&oe.memoizedState.tag&1){if(n.flags|=2048,Ir(9,{destroy:void 0},Gv.bind(null,n,s,i,t),null),zt===null)throw Error(I(349));a||Un&127||Nv(n,t,i)}return i}function Nv(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=at.updateQueue,t===null?(t=Cc(),at.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Gv(e,t,i,n){t.value=i,t.getSnapshot=n,Iv(t)&&Pv(e)}function Dv(e,t,i){return i(function(){Iv(t)&&Pv(e)})}function Iv(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!pi(e,i)}catch{return!0}}function Pv(e){var t=Aa(e,2);t!==null&&ii(t,e,2)}function Jd(e){var t=Pe();if(typeof e=="function"){var i=e;if(e=i(),va){cs(!0);try{i()}finally{cs(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:e},t}function zv(e,t,i,n){return e.baseState=i,Og(e,It,typeof n=="function"?n:kn)}function _M(e,t,i,n,s){if(Ac(e))throw Error(I(485));if(e=t.action,e!==null){var a={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){a.listeners.push(r)}};Q.T!==null?i(!0):a.isTransition=!1,n(a),i=t.pending,i===null?(a.next=t.pending=a,jv(t,a)):(a.next=i.next,t.pending=i.next=a)}}function jv(e,t){var i=t.action,n=t.payload,s=e.state;if(t.isTransition){var a=Q.T,r={};Q.T=r;try{var l=i(s,n),o=Q.S;o!==null&&o(r,l),km(e,t,l)}catch(h){$d(e,t,h)}finally{a!==null&&r.types!==null&&(a.types=r.types),Q.T=a}}else try{a=i(s,n),km(e,t,a)}catch(h){$d(e,t,h)}}function km(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(n){Bm(e,t,n)},function(n){return $d(e,t,n)}):Bm(e,t,i)}function Bm(e,t,i){t.status="fulfilled",t.value=i,Fv(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,jv(e,i)))}function $d(e,t,i){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=i,Fv(t),t=t.next;while(t!==n)}e.action=null}function Fv(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Uv(e,t){return t}function Xm(e,t){if(yt){var i=zt.formState;if(i!==null){t:{var n=at;if(yt){if(Ut){e:{for(var s=Ut,a=Ni;s.nodeType!==8;){if(!a){s=null;break e}if(s=zi(s.nextSibling),s===null){s=null;break e}}a=s.data,s=a==="F!"||a==="F"?s:null}if(s){Ut=zi(s.nextSibling),n=s.data==="F!";break t}}Ds(n)}n=!1}n&&(t=i[0])}}return i=Pe(),i.memoizedState=i.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uv,lastRenderedState:t},i.queue=n,i=i2.bind(null,at,n),n.dispatch=i,n=Jd(!1),a=Ig.bind(null,at,!1,n.queue),n=Pe(),s={state:t,dispatch:null,action:e,pending:null},n.queue=s,i=_M.bind(null,at,s,a,i),s.dispatch=i,n.memoizedState=e,[t,i,!1]}function Ym(e){var t=ae();return kv(t,It,e)}function kv(e,t,i){if(t=Og(e,t,Uv)[0],e=eu(kn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Qo(t)}catch(r){throw r===il?wc:r}else n=t;t=ae();var s=t.queue,a=s.dispatch;return i!==t.memoizedState&&(at.flags|=2048,Ir(9,{destroy:void 0},mM.bind(null,s,i),null)),[n,a,e]}function mM(e,t){e.action=t}function qm(e){var t=ae(),i=It;if(i!==null)return kv(t,i,e);ae(),t=t.memoizedState,i=ae();var n=i.queue.dispatch;return i.memoizedState=e,[t,n,!1]}function Ir(e,t,i,n){return e={tag:e,create:i,deps:n,inst:t,next:null},t=at.updateQueue,t===null&&(t=Cc(),at.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Bv(){return ae().memoizedState}function iu(e,t,i,n){var s=Pe();at.flags|=e,s.memoizedState=Ir(1|t,{destroy:void 0},i,n===void 0?null:n)}function Rc(e,t,i,n){var s=ae();n=n===void 0?null:n;var a=s.memoizedState.inst;It!==null&&n!==null&&bg(n,It.memoizedState.deps)?s.memoizedState=Ir(t,a,i,n):(at.flags|=e,s.memoizedState=Ir(1|t,a,i,n))}function Hm(e,t){iu(8390656,8,e,t)}function Lg(e,t){Rc(2048,8,e,t)}function yM(e){at.flags|=4;var t=at.updateQueue;if(t===null)t=Cc(),at.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Xv(e){var t=ae().memoizedState;return yM({ref:t,nextImpl:e}),function(){if(Mt&2)throw Error(I(440));return t.impl.apply(void 0,arguments)}}function Yv(e,t){return Rc(4,2,e,t)}function qv(e,t){return Rc(4,4,e,t)}function Hv(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zv(e,t,i){i=i!=null?i.concat([e]):null,Rc(4,4,Hv.bind(null,t,e),i)}function Ng(){}function Vv(e,t){var i=ae();t=t===void 0?null:t;var n=i.memoizedState;return t!==null&&bg(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Kv(e,t){var i=ae();t=t===void 0?null:t;var n=i.memoizedState;if(t!==null&&bg(t,n[1]))return n[0];if(n=e(),va){cs(!0);try{e()}finally{cs(!1)}}return i.memoizedState=[n,t],n}function Gg(e,t,i){return i===void 0||Un&1073741824&&!(gt&261930)?e.memoizedState=t:(e.memoizedState=i,e=z2(),at.lanes|=e,Ps|=e,i)}function Wv(e,t,i,n){return pi(i,t)?i:Dr.current!==null?(e=Gg(e,i,n),pi(e,t)||(ce=!0),e):!(Un&42)||Un&1073741824&&!(gt&261930)?(ce=!0,e.memoizedState=i):(e=z2(),at.lanes|=e,Ps|=e,t)}function Qv(e,t,i,n,s){var a=bt.p;bt.p=a!==0&&8>a?a:8;var r=Q.T,l={};Q.T=l,Ig(e,!1,t,i);try{var o=s(),h=Q.S;if(h!==null&&h(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var u=fM(o,n);Ql(e,t,u,yi(e))}else Ql(e,t,n,yi(e))}catch(f){Ql(e,t,{then:function(){},status:"rejected",reason:f},yi())}finally{bt.p=a,r!==null&&l.types!==null&&(r.types=l.types),Q.T=r}}function pM(){}function t0(e,t,i,n){if(e.tag!==5)throw Error(I(476));var s=Jv(e).queue;Qv(e,s,t,oa,i===null?pM:function(){return $v(e),i(n)})}function Jv(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:oa,baseState:oa,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:oa},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function $v(e){var t=Jv(e);t.next===null&&(t=e.alternate.memoizedState),Ql(e,t.next.queue,{},yi())}function Dg(){return Ae(Mo)}function t2(){return ae().memoizedState}function e2(){return ae().memoizedState}function vM(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=yi();e=Ms(i);var n=bs(t,e,i);n!==null&&(ii(n,t,i),Vl(n,t,i)),t={cache:vg()},e.payload=t;return}t=t.return}}function EM(e,t,i){var n=yi();i={lane:n,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ac(e)?n2(t,i):(i=_g(e,t,i,n),i!==null&&(ii(i,e,n),s2(i,t,n)))}function i2(e,t,i){var n=yi();Ql(e,t,i,n)}function Ql(e,t,i,n){var s={lane:n,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ac(e))n2(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var r=t.lastRenderedState,l=a(r,i);if(s.hasEagerState=!0,s.eagerState=l,pi(l,r))return bc(e,t,s,0),zt===null&&Mc(),!1}catch{}finally{}if(i=_g(e,t,s,n),i!==null)return ii(i,e,n),s2(i,t,n),!0}return!1}function Ig(e,t,i,n){if(n={lane:2,revertLane:Yg(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ac(e)){if(t)throw Error(I(479))}else t=_g(e,i,n,2),t!==null&&ii(t,e,2)}function Ac(e){var t=e.alternate;return e===at||t!==null&&t===at}function n2(e,t){Sr=Tu=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function s2(e,t,i){if(i&4194048){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,Xp(e,i)}}var Eo={readContext:Ae,use:Tc,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt};Eo.useEffectEvent=Jt;var a2={readContext:Ae,use:Tc,useCallback:function(e,t){return Pe().memoizedState=[e,t===void 0?null:t],e},useContext:Ae,useEffect:Hm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,iu(4194308,4,Hv.bind(null,t,e),i)},useLayoutEffect:function(e,t){return iu(4194308,4,e,t)},useInsertionEffect:function(e,t){iu(4,2,e,t)},useMemo:function(e,t){var i=Pe();t=t===void 0?null:t;var n=e();if(va){cs(!0);try{e()}finally{cs(!1)}}return i.memoizedState=[n,t],n},useReducer:function(e,t,i){var n=Pe();if(i!==void 0){var s=i(t);if(va){cs(!0);try{i(t)}finally{cs(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=EM.bind(null,at,e),[n.memoizedState,e]},useRef:function(e){var t=Pe();return e={current:e},t.memoizedState=e},useState:function(e){e=Jd(e);var t=e.queue,i=i2.bind(null,at,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Ng,useDeferredValue:function(e,t){var i=Pe();return Gg(i,e,t)},useTransition:function(){var e=Jd(!1);return e=Qv.bind(null,at,e.queue,!0,!1),Pe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var n=at,s=Pe();if(yt){if(i===void 0)throw Error(I(407));i=i()}else{if(i=t(),zt===null)throw Error(I(349));gt&127||Nv(n,t,i)}s.memoizedState=i;var a={value:i,getSnapshot:t};return s.queue=a,Hm(Dv.bind(null,n,a,e),[e]),n.flags|=2048,Ir(9,{destroy:void 0},Gv.bind(null,n,a,i,t),null),i},useId:function(){var e=Pe(),t=zt.identifierPrefix;if(yt){var i=an,n=sn;i=(n&~(1<<32-mi(n)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Ru++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=dM++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Dg,useFormState:Xm,useActionState:Xm,useOptimistic:function(e){var t=Pe();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Ig.bind(null,at,!0,i),i.dispatch=t,[e,t]},useMemoCache:Ag,useCacheRefresh:function(){return Pe().memoizedState=vM.bind(null,at)},useEffectEvent:function(e){var t=Pe(),i={impl:e};return t.memoizedState=i,function(){if(Mt&2)throw Error(I(440));return i.impl.apply(void 0,arguments)}}},Pg={readContext:Ae,use:Tc,useCallback:Vv,useContext:Ae,useEffect:Lg,useImperativeHandle:Zv,useInsertionEffect:Yv,useLayoutEffect:qv,useMemo:Kv,useReducer:eu,useRef:Bv,useState:function(){return eu(kn)},useDebugValue:Ng,useDeferredValue:function(e,t){var i=ae();return Wv(i,It.memoizedState,e,t)},useTransition:function(){var e=eu(kn)[0],t=ae().memoizedState;return[typeof e=="boolean"?e:Qo(e),t]},useSyncExternalStore:Lv,useId:t2,useHostTransitionStatus:Dg,useFormState:Ym,useActionState:Ym,useOptimistic:function(e,t){var i=ae();return zv(i,It,e,t)},useMemoCache:Ag,useCacheRefresh:e2};Pg.useEffectEvent=Xv;var r2={readContext:Ae,use:Tc,useCallback:Vv,useContext:Ae,useEffect:Lg,useImperativeHandle:Zv,useInsertionEffect:Yv,useLayoutEffect:qv,useMemo:Kv,useReducer:Rf,useRef:Bv,useState:function(){return Rf(kn)},useDebugValue:Ng,useDeferredValue:function(e,t){var i=ae();return It===null?Gg(i,e,t):Wv(i,It.memoizedState,e,t)},useTransition:function(){var e=Rf(kn)[0],t=ae().memoizedState;return[typeof e=="boolean"?e:Qo(e),t]},useSyncExternalStore:Lv,useId:t2,useHostTransitionStatus:Dg,useFormState:qm,useActionState:qm,useOptimistic:function(e,t){var i=ae();return It!==null?zv(i,It,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Ag,useCacheRefresh:e2};r2.useEffectEvent=Xv;function Af(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:Xt({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var e0={enqueueSetState:function(e,t,i){e=e._reactInternals;var n=yi(),s=Ms(n);s.payload=t,i!=null&&(s.callback=i),t=bs(e,s,n),t!==null&&(ii(t,e,n),Vl(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=yi(),s=Ms(n);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=bs(e,s,n),t!==null&&(ii(t,e,n),Vl(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=yi(),n=Ms(i);n.tag=2,t!=null&&(n.callback=t),t=bs(e,n,i),t!==null&&(ii(t,e,i),Vl(t,e,i))}};function Zm(e,t,i,n,s,a,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,r):t.prototype&&t.prototype.isPureReactComponent?!_o(i,n)||!_o(s,a):!0}function Vm(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&e0.enqueueReplaceState(t,t.state,null)}function Ea(e,t){var i=t;if("ref"in t){i={};for(var n in t)n!=="ref"&&(i[n]=t[n])}if(e=e.defaultProps){i===t&&(i=Xt({},i));for(var s in e)i[s]===void 0&&(i[s]=e[s])}return i}function l2(e){Eu(e)}function o2(e){console.error(e)}function h2(e){Eu(e)}function Au(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Km(e,t,i){try{var n=e.onCaughtError;n(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function i0(e,t,i){return i=Ms(i),i.tag=3,i.payload={element:null},i.callback=function(){Au(e,t)},i}function u2(e){return e=Ms(e),e.tag=3,e}function c2(e,t,i,n){var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var a=n.value;e.payload=function(){return s(a)},e.callback=function(){Km(t,i,n)}}var r=i.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Km(t,i,n),typeof s!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})})}function xM(e,t,i,n,s){if(i.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=i.alternate,t!==null&&el(t,i,s,!0),i=vi.current,i!==null){switch(i.tag){case 31:case 13:return Pi===null?Du():i.alternate===null&&ee===0&&(ee=3),i.flags&=-257,i.flags|=65536,i.lanes=s,n===bu?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([n]):t.add(n),Uf(e,n,s)),!1;case 22:return i.flags|=65536,n===bu?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([n]):i.add(n)),Uf(e,n,s)),!1}throw Error(I(435,i.tag))}return Uf(e,n,s),Du(),!1}if(yt)return t=vi.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==Xd&&(e=Error(I(422),{cause:n}),yo(Li(e,i)))):(n!==Xd&&(t=Error(I(423),{cause:n}),yo(Li(t,i))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,n=Li(n,i),s=i0(e.stateNode,n,s),Tf(e,s),ee!==4&&(ee=2)),!1;var a=Error(I(520),{cause:n});if(a=Li(a,i),to===null?to=[a]:to.push(a),ee!==4&&(ee=2),t===null)return!0;n=Li(n,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=s&-s,i.lanes|=e,e=i0(i.stateNode,n,e),Tf(i,e),!1;case 1:if(t=i.type,a=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(ws===null||!ws.has(a))))return i.flags|=65536,s&=-s,i.lanes|=s,s=u2(s),c2(s,e,i,n),Tf(i,s),!1}i=i.return}while(i!==null);return!1}var zg=Error(I(461)),ce=!1;function Ce(e,t,i,n){t.child=e===null?wv(t,null,i,n):pa(t,e.child,i,n)}function Wm(e,t,i,n,s){i=i.render;var a=t.ref;if("ref"in n){var r={};for(var l in n)l!=="ref"&&(r[l]=n[l])}else r=n;return ya(t),n=wg(e,t,i,r,a,s),l=Cg(),e!==null&&!ce?(Tg(e,t,s),Bn(e,t,s)):(yt&&l&&yg(t),t.flags|=1,Ce(e,t,n,s),t.child)}function Qm(e,t,i,n,s){if(e===null){var a=i.type;return typeof a=="function"&&!mg(a)&&a.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=a,f2(e,t,a,n,s)):(e=$h(i.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!jg(e,s)){var r=a.memoizedProps;if(i=i.compare,i=i!==null?i:_o,i(r,n)&&e.ref===t.ref)return Bn(e,t,s)}return t.flags|=1,e=Nn(a,n),e.ref=t.ref,e.return=t,t.child=e}function f2(e,t,i,n,s){if(e!==null){var a=e.memoizedProps;if(_o(a,n)&&e.ref===t.ref)if(ce=!1,t.pendingProps=n=a,jg(e,s))e.flags&131072&&(ce=!0);else return t.lanes=e.lanes,Bn(e,t,s)}return n0(e,t,i,n,s)}function d2(e,t,i,n){var s=n.children,a=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if(t.flags&128){if(a=a!==null?a.baseLanes|i:i,e!==null){for(n=t.child=e.child,s=0;n!==null;)s=s|n.lanes|n.childLanes,n=n.sibling;n=s&~a}else n=0,t.child=null;return Jm(e,t,a,i,n)}if(i&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&tu(t,a!==null?a.cachePool:null),a!==null?Um(t,a):Wd(),Rv(t);else return n=t.lanes=536870912,Jm(e,t,a!==null?a.baseLanes|i:i,i,n)}else a!==null?(tu(t,a.cachePool),Um(t,a),hs(),t.memoizedState=null):(e!==null&&tu(t,null),Wd(),hs());return Ce(e,t,s,i),t.child}function Ll(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Jm(e,t,i,n,s){var a=Eg();return a=a===null?null:{parent:ue._currentValue,pool:a},t.memoizedState={baseLanes:i,cachePool:a},e!==null&&tu(t,null),Wd(),Rv(t),e!==null&&el(e,t,n,!0),t.childLanes=s,null}function nu(e,t){return t=Ou({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function $m(e,t,i){return pa(t,e.child,null,i),e=nu(t,t.pendingProps),e.flags|=2,oi(t),t.memoizedState=null,e}function SM(e,t,i){var n=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(yt){if(n.mode==="hidden")return e=nu(t,n),t.lanes=536870912,Ll(null,e);if(Qd(t),(e=Ut)?(e=aE(e,Ni),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Gs!==null?{id:sn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},i=pv(e),i.return=t,t.child=i,Re=t,Ut=null)):e=null,e===null)throw Ds(t);return t.lanes=536870912,null}return nu(t,n)}var a=e.memoizedState;if(a!==null){var r=a.dehydrated;if(Qd(t),s)if(t.flags&256)t.flags&=-257,t=$m(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(I(558));else if(ce||el(e,t,i,!1),s=(i&e.childLanes)!==0,ce||s){if(n=zt,n!==null&&(r=Yp(n,i),r!==0&&r!==a.retryLane))throw a.retryLane=r,Aa(e,r),ii(n,e,r),zg;Du(),t=$m(e,t,i)}else e=a.treeContext,Ut=zi(r.nextSibling),Re=t,yt=!0,Ss=null,Ni=!1,e!==null&&Ev(t,e),t=nu(t,n),t.flags|=4096;return t}return e=Nn(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function su(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(I(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function n0(e,t,i,n,s){return ya(t),i=wg(e,t,i,n,void 0,s),n=Cg(),e!==null&&!ce?(Tg(e,t,s),Bn(e,t,s)):(yt&&n&&yg(t),t.flags|=1,Ce(e,t,i,s),t.child)}function t1(e,t,i,n,s,a){return ya(t),t.updateQueue=null,i=Ov(t,n,i,s),Av(e),n=Cg(),e!==null&&!ce?(Tg(e,t,a),Bn(e,t,a)):(yt&&n&&yg(t),t.flags|=1,Ce(e,t,i,a),t.child)}function e1(e,t,i,n,s){if(ya(t),t.stateNode===null){var a=or,r=i.contextType;typeof r=="object"&&r!==null&&(a=Ae(r)),a=new i(n,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=e0,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=n,a.state=t.memoizedState,a.refs={},Sg(t),r=i.contextType,a.context=typeof r=="object"&&r!==null?Ae(r):or,a.state=t.memoizedState,r=i.getDerivedStateFromProps,typeof r=="function"&&(Af(t,i,r,n),a.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(r=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),r!==a.state&&e0.enqueueReplaceState(a,a.state,null),Wl(t,n,a,s),Kl(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){a=t.stateNode;var l=t.memoizedProps,o=Ea(i,l);a.props=o;var h=a.context,u=i.contextType;r=or,typeof u=="object"&&u!==null&&(r=Ae(u));var f=i.getDerivedStateFromProps;u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l||h!==r)&&Vm(t,a,n,r),as=!1;var c=t.memoizedState;a.state=c,Wl(t,n,a,s),Kl(),h=t.memoizedState,l||c!==h||as?(typeof f=="function"&&(Af(t,i,f,n),h=t.memoizedState),(o=as||Zm(t,i,o,n,c,h,r))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=h),a.props=n,a.state=h,a.context=r,n=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Vd(e,t),r=t.memoizedProps,u=Ea(i,r),a.props=u,f=t.pendingProps,c=a.context,h=i.contextType,o=or,typeof h=="object"&&h!==null&&(o=Ae(h)),l=i.getDerivedStateFromProps,(h=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(r!==f||c!==o)&&Vm(t,a,n,o),as=!1,c=t.memoizedState,a.state=c,Wl(t,n,a,s),Kl();var d=t.memoizedState;r!==f||c!==d||as||e!==null&&e.dependencies!==null&&Mu(e.dependencies)?(typeof l=="function"&&(Af(t,i,l,n),d=t.memoizedState),(u=as||Zm(t,i,u,n,c,d,o)||e!==null&&e.dependencies!==null&&Mu(e.dependencies))?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,d,o),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,d,o)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||r===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=d),a.props=n,a.state=d,a.context=o,n=u):(typeof a.componentDidUpdate!="function"||r===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),n=!1)}return a=n,su(e,t),n=(t.flags&128)!==0,a||n?(a=t.stateNode,i=n&&typeof i.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,e!==null&&n?(t.child=pa(t,e.child,null,s),t.child=pa(t,null,i,s)):Ce(e,t,i,s),t.memoizedState=a.state,e=t.child):e=Bn(e,t,s),e}function i1(e,t,i,n){return ma(),t.flags|=256,Ce(e,t,i,n),t.child}var Of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lf(e){return{baseLanes:e,cachePool:Sv()}}function Nf(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=fi),e}function g2(e,t,i){var n=t.pendingProps,s=!1,a=(t.flags&128)!==0,r;if((r=a)||(r=e!==null&&e.memoizedState===null?!1:(se.current&2)!==0),r&&(s=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(yt){if(s?os(t):hs(),(e=Ut)?(e=aE(e,Ni),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Gs!==null?{id:sn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},i=pv(e),i.return=t,t.child=i,Re=t,Ut=null)):e=null,e===null)throw Ds(t);return y0(e)?t.lanes=32:t.lanes=536870912,null}var l=n.children;return n=n.fallback,s?(hs(),s=t.mode,l=Ou({mode:"hidden",children:l},s),n=ha(n,s,i,null),l.return=t,n.return=t,l.sibling=n,t.child=l,n=t.child,n.memoizedState=Lf(i),n.childLanes=Nf(e,r,i),t.memoizedState=Of,Ll(null,n)):(os(t),s0(t,l))}var o=e.memoizedState;if(o!==null&&(l=o.dehydrated,l!==null)){if(a)t.flags&256?(os(t),t.flags&=-257,t=Gf(e,t,i)):t.memoizedState!==null?(hs(),t.child=e.child,t.flags|=128,t=null):(hs(),l=n.fallback,s=t.mode,n=Ou({mode:"visible",children:n.children},s),l=ha(l,s,i,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,pa(t,e.child,null,i),n=t.child,n.memoizedState=Lf(i),n.childLanes=Nf(e,r,i),t.memoizedState=Of,t=Ll(null,n));else if(os(t),y0(l)){if(r=l.nextSibling&&l.nextSibling.dataset,r)var h=r.dgst;r=h,n=Error(I(419)),n.stack="",n.digest=r,yo({value:n,source:null,stack:null}),t=Gf(e,t,i)}else if(ce||el(e,t,i,!1),r=(i&e.childLanes)!==0,ce||r){if(r=zt,r!==null&&(n=Yp(r,i),n!==0&&n!==o.retryLane))throw o.retryLane=n,Aa(e,n),ii(r,e,n),zg;m0(l)||Du(),t=Gf(e,t,i)}else m0(l)?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,Ut=zi(l.nextSibling),Re=t,yt=!0,Ss=null,Ni=!1,e!==null&&Ev(t,e),t=s0(t,n.children),t.flags|=4096);return t}return s?(hs(),l=n.fallback,s=t.mode,o=e.child,h=o.sibling,n=Nn(o,{mode:"hidden",children:n.children}),n.subtreeFlags=o.subtreeFlags&65011712,h!==null?l=Nn(h,l):(l=ha(l,s,i,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,Ll(null,n),n=t.child,l=e.child.memoizedState,l===null?l=Lf(i):(s=l.cachePool,s!==null?(o=ue._currentValue,s=s.parent!==o?{parent:o,pool:o}:s):s=Sv(),l={baseLanes:l.baseLanes|i,cachePool:s}),n.memoizedState=l,n.childLanes=Nf(e,r,i),t.memoizedState=Of,Ll(e.child,n)):(os(t),i=e.child,e=i.sibling,i=Nn(i,{mode:"visible",children:n.children}),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i)}function s0(e,t){return t=Ou({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ou(e,t){return e=ci(22,e,null,t),e.lanes=0,e}function Gf(e,t,i){return pa(t,e.child,null,i),e=s0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function n1(e,t,i){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),qd(e.return,t,i)}function Df(e,t,i,n,s,a){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:s,treeForkCount:a}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=i,r.tailMode=s,r.treeForkCount=a)}function _2(e,t,i){var n=t.pendingProps,s=n.revealOrder,a=n.tail;n=n.children;var r=se.current,l=(r&2)!==0;if(l?(r=r&1|2,t.flags|=128):r&=1,jt(se,r),Ce(e,t,n,i),n=yt?mo:0,!l&&e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&n1(e,i,t);else if(e.tag===19)n1(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(i=t.child,s=null;i!==null;)e=i.alternate,e!==null&&Cu(e)===null&&(s=i),i=i.sibling;i=s,i===null?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),Df(t,!1,s,i,a,n);break;case"backwards":case"unstable_legacy-backwards":for(i=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Cu(e)===null){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}Df(t,!0,i,null,a,n);break;case"together":Df(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function Bn(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Ps|=t.lanes,!(i&t.childLanes))if(e!==null){if(el(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,i=Nn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Nn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function jg(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Mu(e)))}function MM(e,t,i){switch(t.tag){case 3:mu(t,t.stateNode.containerInfo),ls(t,ue,e.memoizedState.cache),ma();break;case 27:case 5:Nd(t);break;case 4:mu(t,t.stateNode.containerInfo);break;case 10:ls(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Qd(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(os(t),t.flags|=128,null):i&t.child.childLanes?g2(e,t,i):(os(t),e=Bn(e,t,i),e!==null?e.sibling:null);os(t);break;case 19:var s=(e.flags&128)!==0;if(n=(i&t.childLanes)!==0,n||(el(e,t,i,!1),n=(i&t.childLanes)!==0),s){if(n)return _2(e,t,i);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),jt(se,se.current),n)break;return null;case 22:return t.lanes=0,d2(e,t,i,t.pendingProps);case 24:ls(t,ue,e.memoizedState.cache)}return Bn(e,t,i)}function m2(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)ce=!0;else{if(!jg(e,i)&&!(t.flags&128))return ce=!1,MM(e,t,i);ce=!!(e.flags&131072)}else ce=!1,yt&&t.flags&1048576&&vv(t,mo,t.index);switch(t.lanes=0,t.tag){case 16:t:{var n=t.pendingProps;if(e=$s(t.elementType),t.type=e,typeof e=="function")mg(e)?(n=Ea(e,n),t.tag=1,t=e1(null,t,e,n,i)):(t.tag=0,t=n0(null,t,e,n,i));else{if(e!=null){var s=e.$$typeof;if(s===ig){t.tag=11,t=Wm(null,t,e,n,i);break t}else if(s===ng){t.tag=14,t=Qm(null,t,e,n,i);break t}}throw t=Od(e)||e,Error(I(306,t,""))}}return t;case 0:return n0(e,t,t.type,t.pendingProps,i);case 1:return n=t.type,s=Ea(n,t.pendingProps),e1(e,t,n,s,i);case 3:t:{if(mu(t,t.stateNode.containerInfo),e===null)throw Error(I(387));n=t.pendingProps;var a=t.memoizedState;s=a.element,Vd(e,t),Wl(t,n,null,i);var r=t.memoizedState;if(n=r.cache,ls(t,ue,n),n!==a.cache&&Hd(t,[ue],i,!0),Kl(),n=r.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=i1(e,t,n,i);break t}else if(n!==s){s=Li(Error(I(424)),t),yo(s),t=i1(e,t,n,i);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ut=zi(e.firstChild),Re=t,yt=!0,Ss=null,Ni=!0,i=wv(t,null,n,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ma(),n===s){t=Bn(e,t,i);break t}Ce(e,t,n,i)}t=t.child}return t;case 26:return su(e,t),e===null?(i=M1(t.type,null,t.pendingProps,null))?t.memoizedState=i:yt||(i=t.type,e=t.pendingProps,n=ju(xs.current).createElement(i),n[Te]=t,n[ni]=e,Le(n,i,e),xe(n),t.stateNode=n):t.memoizedState=M1(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Nd(t),e===null&&yt&&(n=t.stateNode=rE(t.type,t.pendingProps,xs.current),Re=t,Ni=!0,s=Ut,Xs(t.type)?(p0=s,Ut=zi(n.firstChild)):Ut=s),Ce(e,t,t.pendingProps.children,i),su(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&yt&&((s=n=Ut)&&(n=$M(n,t.type,t.pendingProps,Ni),n!==null?(t.stateNode=n,Re=t,Ut=zi(n.firstChild),Ni=!1,s=!0):s=!1),s||Ds(t)),Nd(t),s=t.type,a=t.pendingProps,r=e!==null?e.memoizedProps:null,n=a.children,g0(s,a)?n=null:r!==null&&g0(s,r)&&(t.flags|=32),t.memoizedState!==null&&(s=wg(e,t,gM,null,null,i),Mo._currentValue=s),su(e,t),Ce(e,t,n,i),t.child;case 6:return e===null&&yt&&((e=i=Ut)&&(i=tb(i,t.pendingProps,Ni),i!==null?(t.stateNode=i,Re=t,Ut=null,e=!0):e=!1),e||Ds(t)),null;case 13:return g2(e,t,i);case 4:return mu(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=pa(t,null,n,i):Ce(e,t,n,i),t.child;case 11:return Wm(e,t,t.type,t.pendingProps,i);case 7:return Ce(e,t,t.pendingProps,i),t.child;case 8:return Ce(e,t,t.pendingProps.children,i),t.child;case 12:return Ce(e,t,t.pendingProps.children,i),t.child;case 10:return n=t.pendingProps,ls(t,t.type,n.value),Ce(e,t,n.children,i),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,ya(t),s=Ae(s),n=n(s),t.flags|=1,Ce(e,t,n,i),t.child;case 14:return Qm(e,t,t.type,t.pendingProps,i);case 15:return f2(e,t,t.type,t.pendingProps,i);case 19:return _2(e,t,i);case 31:return SM(e,t,i);case 22:return d2(e,t,i,t.pendingProps);case 24:return ya(t),n=Ae(ue),e===null?(s=Eg(),s===null&&(s=zt,a=vg(),s.pooledCache=a,a.refCount++,a!==null&&(s.pooledCacheLanes|=i),s=a),t.memoizedState={parent:n,cache:s},Sg(t),ls(t,ue,s)):(e.lanes&i&&(Vd(e,t),Wl(t,null,null,i),Kl()),s=e.memoizedState,a=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),ls(t,ue,n)):(n=a.cache,ls(t,ue,n),n!==s.cache&&Hd(t,[ue],i,!0))),Ce(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(I(156,t.tag))}function pn(e){e.flags|=4}function If(e,t,i,n,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(U2())e.flags|=8192;else throw ca=bu,xg}else e.flags&=-16777217}function s1(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!hE(t))if(U2())e.flags|=8192;else throw ca=bu,xg}function Th(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?kp():536870912,e.lanes|=t,Pr|=t)}function pl(e,t){if(!yt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,n=0;if(t)for(var s=e.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function bM(e,t,i){var n=t.pendingProps;switch(pg(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(t),null;case 1:return Ft(t),null;case 3:return i=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Gn(ue),Or(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(za(t)?pn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Cf())),Ft(t),null;case 26:var s=t.type,a=t.memoizedState;return e===null?(pn(t),a!==null?(Ft(t),s1(t,a)):(Ft(t),If(t,s,null,n,i))):a?a!==e.memoizedState?(pn(t),Ft(t),s1(t,a)):(Ft(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&pn(t),Ft(t),If(t,s,e,n,i)),null;case 27:if(yu(t),i=xs.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&pn(t);else{if(!n){if(t.stateNode===null)throw Error(I(166));return Ft(t),null}e=on.current,za(t)?Gm(t):(e=rE(s,n,i),t.stateNode=e,pn(t))}return Ft(t),null;case 5:if(yu(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&pn(t);else{if(!n){if(t.stateNode===null)throw Error(I(166));return Ft(t),null}if(a=on.current,za(t))Gm(t);else{var r=ju(xs.current);switch(a){case 1:a=r.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:a=r.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":a=r.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":a=r.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":a=r.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof n.is=="string"?r.createElement("select",{is:n.is}):r.createElement("select"),n.multiple?a.multiple=!0:n.size&&(a.size=n.size);break;default:a=typeof n.is=="string"?r.createElement(s,{is:n.is}):r.createElement(s)}}a[Te]=t,a[ni]=n;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)a.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=a;t:switch(Le(a,s,n),s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&pn(t)}}return Ft(t),If(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&pn(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(I(166));if(e=xs.current,za(t)){if(e=t.stateNode,i=t.memoizedProps,n=null,s=Re,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}e[Te]=t,e=!!(e.nodeValue===i||n!==null&&n.suppressHydrationWarning===!0||iE(e.nodeValue,i)),e||Ds(t,!0)}else e=ju(e).createTextNode(n),e[Te]=t,t.stateNode=e}return Ft(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(n=za(t),i!==null){if(e===null){if(!n)throw Error(I(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(557));e[Te]=t}else ma(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ft(t),e=!1}else i=Cf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(oi(t),t):(oi(t),null);if(t.flags&128)throw Error(I(558))}return Ft(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=za(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(I(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(I(317));s[Te]=t}else ma(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ft(t),s=!1}else s=Cf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(oi(t),t):(oi(t),null)}return oi(t),t.flags&128?(t.lanes=i,t):(i=n!==null,e=e!==null&&e.memoizedState!==null,i&&(n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool),a=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==s&&(n.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Th(t,t.updateQueue),Ft(t),null);case 4:return Or(),e===null&&qg(t.stateNode.containerInfo),Ft(t),null;case 10:return Gn(t.type),Ft(t),null;case 19:if(Se(se),n=t.memoizedState,n===null)return Ft(t),null;if(s=(t.flags&128)!==0,a=n.rendering,a===null)if(s)pl(n,!1);else{if(ee!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Cu(e),a!==null){for(t.flags|=128,pl(n,!1),e=a.updateQueue,t.updateQueue=e,Th(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)yv(i,e),i=i.sibling;return jt(se,se.current&1|2),yt&&wn(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&gi()>Nu&&(t.flags|=128,s=!0,pl(n,!1),t.lanes=4194304)}else{if(!s)if(e=Cu(a),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Th(t,e),pl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!yt)return Ft(t),null}else 2*gi()-n.renderingStartTime>Nu&&i!==536870912&&(t.flags|=128,s=!0,pl(n,!1),t.lanes=4194304);n.isBackwards?(a.sibling=t.child,t.child=a):(e=n.last,e!==null?e.sibling=a:t.child=a,n.last=a)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=gi(),e.sibling=null,i=se.current,jt(se,s?i&1|2:i&1),yt&&wn(t,n.treeForkCount),e):(Ft(t),null);case 22:case 23:return oi(t),Mg(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?i&536870912&&!(t.flags&128)&&(Ft(t),t.subtreeFlags&6&&(t.flags|=8192)):Ft(t),i=t.updateQueue,i!==null&&Th(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==i&&(t.flags|=2048),e!==null&&Se(ua),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Gn(ue),Ft(t),null;case 25:return null;case 30:return null}throw Error(I(156,t.tag))}function wM(e,t){switch(pg(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gn(ue),Or(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return yu(t),null;case 31:if(t.memoizedState!==null){if(oi(t),t.alternate===null)throw Error(I(340));ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(oi(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(se),null;case 4:return Or(),null;case 10:return Gn(t.type),null;case 22:case 23:return oi(t),Mg(),e!==null&&Se(ua),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Gn(ue),null;case 25:return null;default:return null}}function y2(e,t){switch(pg(t),t.tag){case 3:Gn(ue),Or();break;case 26:case 27:case 5:yu(t);break;case 4:Or();break;case 31:t.memoizedState!==null&&oi(t);break;case 13:oi(t);break;case 19:Se(se);break;case 10:Gn(t.type);break;case 22:case 23:oi(t),Mg(),e!==null&&Se(ua);break;case 24:Gn(ue)}}function Jo(e,t){try{var i=t.updateQueue,n=i!==null?i.lastEffect:null;if(n!==null){var s=n.next;i=s;do{if((i.tag&e)===e){n=void 0;var a=i.create,r=i.inst;n=a(),r.destroy=n}i=i.next}while(i!==s)}}catch(l){Lt(t,t.return,l)}}function Is(e,t,i){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var a=s.next;n=a;do{if((n.tag&e)===e){var r=n.inst,l=r.destroy;if(l!==void 0){r.destroy=void 0,s=t;var o=i,h=l;try{h()}catch(u){Lt(s,o,u)}}}n=n.next}while(n!==a)}}catch(u){Lt(t,t.return,u)}}function p2(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Tv(t,i)}catch(n){Lt(e,e.return,n)}}}function v2(e,t,i){i.props=Ea(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(n){Lt(e,t,n)}}function Jl(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof i=="function"?e.refCleanup=i(n):i.current=n}}catch(s){Lt(e,t,s)}}function rn(e,t){var i=e.ref,n=e.refCleanup;if(i!==null)if(typeof n=="function")try{n()}catch(s){Lt(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(s){Lt(e,t,s)}else i.current=null}function E2(e){var t=e.type,i=e.memoizedProps,n=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break t;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(s){Lt(e,e.return,s)}}function Pf(e,t,i){try{var n=e.stateNode;ZM(n,e.type,i,t),n[ni]=t}catch(s){Lt(e,e.return,s)}}function x2(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Xs(e.type)||e.tag===4}function zf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||x2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Xs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function a0(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=On));else if(n!==4&&(n===27&&Xs(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(a0(e,t,i),e=e.sibling;e!==null;)a0(e,t,i),e=e.sibling}function Lu(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(n===27&&Xs(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Lu(e,t,i),e=e.sibling;e!==null;)Lu(e,t,i),e=e.sibling}function S2(e){var t=e.stateNode,i=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Le(t,n,i),t[Te]=e,t[ni]=i}catch(a){Lt(e,e.return,a)}}var Tn=!1,he=!1,jf=!1,a1=typeof WeakSet=="function"?WeakSet:Set,ve=null;function CM(e,t){if(e=e.containerInfo,f0=Bu,e=hv(e),dg(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else t:{i=(i=e.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{i.nodeType,a.nodeType}catch{i=null;break t}var r=0,l=-1,o=-1,h=0,u=0,f=e,c=null;e:for(;;){for(var d;f!==i||s!==0&&f.nodeType!==3||(l=r+s),f!==a||n!==0&&f.nodeType!==3||(o=r+n),f.nodeType===3&&(r+=f.nodeValue.length),(d=f.firstChild)!==null;)c=f,f=d;for(;;){if(f===e)break e;if(c===i&&++h===s&&(l=r),c===a&&++u===n&&(o=r),(d=f.nextSibling)!==null)break;f=c,c=f.parentNode}f=d}i=l===-1||o===-1?null:{start:l,end:o}}else i=null}i=i||{start:0,end:0}}else i=null;for(d0={focusedElem:e,selectionRange:i},Bu=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){switch(t=ve,a=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)s=e[i],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,i=t,s=a.memoizedProps,a=a.memoizedState,n=i.stateNode;try{var g=Ea(i.type,s);e=n.getSnapshotBeforeUpdate(g,a),n.__reactInternalSnapshotBeforeUpdate=e}catch(y){Lt(i,i.return,y)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)_0(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_0(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(I(163))}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}}function M2(e,t,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:En(e,i),n&4&&Jo(5,i);break;case 1:if(En(e,i),n&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(r){Lt(i,i.return,r)}else{var s=Ea(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){Lt(i,i.return,r)}}n&64&&p2(i),n&512&&Jl(i,i.return);break;case 3:if(En(e,i),n&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Tv(e,t)}catch(r){Lt(i,i.return,r)}}break;case 27:t===null&&n&4&&S2(i);case 26:case 5:En(e,i),t===null&&n&4&&E2(i),n&512&&Jl(i,i.return);break;case 12:En(e,i);break;case 31:En(e,i),n&4&&C2(e,i);break;case 13:En(e,i),n&4&&T2(e,i),n&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=IM.bind(null,i),eb(e,i))));break;case 22:if(n=i.memoizedState!==null||Tn,!n){t=t!==null&&t.memoizedState!==null||he,s=Tn;var a=he;Tn=n,(he=t)&&!a?Mn(e,i,(i.subtreeFlags&8772)!==0):En(e,i),Tn=s,he=a}break;case 30:break;default:En(e,i)}}function b2(e){var t=e.alternate;t!==null&&(e.alternate=null,b2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&lg(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ht=null,He=!1;function vn(e,t,i){for(i=i.child;i!==null;)w2(e,t,i),i=i.sibling}function w2(e,t,i){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(qo,i)}catch{}switch(i.tag){case 26:he||rn(i,t),vn(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:he||rn(i,t);var n=Ht,s=He;Xs(i.type)&&(Ht=i.stateNode,He=!1),vn(e,t,i),io(i.stateNode),Ht=n,He=s;break;case 5:he||rn(i,t);case 6:if(n=Ht,s=He,Ht=null,vn(e,t,i),Ht=n,He=s,Ht!==null)if(He)try{(Ht.nodeType===9?Ht.body:Ht.nodeName==="HTML"?Ht.ownerDocument.body:Ht).removeChild(i.stateNode)}catch(a){Lt(i,t,a)}else try{Ht.removeChild(i.stateNode)}catch(a){Lt(i,t,a)}break;case 18:Ht!==null&&(He?(e=Ht,p1(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Ur(e)):p1(Ht,i.stateNode));break;case 4:n=Ht,s=He,Ht=i.stateNode.containerInfo,He=!0,vn(e,t,i),Ht=n,He=s;break;case 0:case 11:case 14:case 15:Is(2,i,t),he||Is(4,i,t),vn(e,t,i);break;case 1:he||(rn(i,t),n=i.stateNode,typeof n.componentWillUnmount=="function"&&v2(i,t,n)),vn(e,t,i);break;case 21:vn(e,t,i);break;case 22:he=(n=he)||i.memoizedState!==null,vn(e,t,i),he=n;break;default:vn(e,t,i)}}function C2(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ur(e)}catch(i){Lt(t,t.return,i)}}}function T2(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ur(e)}catch(i){Lt(t,t.return,i)}}function TM(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new a1),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new a1),t;default:throw Error(I(435,e.tag))}}function Rh(e,t){var i=TM(e);t.forEach(function(n){if(!i.has(n)){i.add(n);var s=PM.bind(null,e,n);n.then(s,s)}})}function Xe(e,t){var i=t.deletions;if(i!==null)for(var n=0;n<i.length;n++){var s=i[n],a=e,r=t,l=r;t:for(;l!==null;){switch(l.tag){case 27:if(Xs(l.type)){Ht=l.stateNode,He=!1;break t}break;case 5:Ht=l.stateNode,He=!1;break t;case 3:case 4:Ht=l.stateNode.containerInfo,He=!0;break t}l=l.return}if(Ht===null)throw Error(I(160));w2(a,r,s),Ht=null,He=!1,a=s.alternate,a!==null&&(a.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)R2(t,e),t=t.sibling}var Hi=null;function R2(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Xe(t,e),Ye(e),n&4&&(Is(3,e,e.return),Jo(3,e),Is(5,e,e.return));break;case 1:Xe(t,e),Ye(e),n&512&&(he||i===null||rn(i,i.return)),n&64&&Tn&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?n:i.concat(n))));break;case 26:var s=Hi;if(Xe(t,e),Ye(e),n&512&&(he||i===null||rn(i,i.return)),n&4){var a=i!==null?i.memoizedState:null;if(n=e.memoizedState,i===null)if(n===null)if(e.stateNode===null){t:{n=e.type,i=e.memoizedProps,s=s.ownerDocument||s;e:switch(n){case"title":a=s.getElementsByTagName("title")[0],(!a||a[Vo]||a[Te]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=s.createElement(n),s.head.insertBefore(a,s.querySelector("head > title"))),Le(a,n,i),a[Te]=e,xe(a),n=a;break t;case"link":var r=w1("link","href",s).get(n+(i.href||""));if(r){for(var l=0;l<r.length;l++)if(a=r[l],a.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&a.getAttribute("rel")===(i.rel==null?null:i.rel)&&a.getAttribute("title")===(i.title==null?null:i.title)&&a.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){r.splice(l,1);break e}}a=s.createElement(n),Le(a,n,i),s.head.appendChild(a);break;case"meta":if(r=w1("meta","content",s).get(n+(i.content||""))){for(l=0;l<r.length;l++)if(a=r[l],a.getAttribute("content")===(i.content==null?null:""+i.content)&&a.getAttribute("name")===(i.name==null?null:i.name)&&a.getAttribute("property")===(i.property==null?null:i.property)&&a.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&a.getAttribute("charset")===(i.charSet==null?null:i.charSet)){r.splice(l,1);break e}}a=s.createElement(n),Le(a,n,i),s.head.appendChild(a);break;default:throw Error(I(468,n))}a[Te]=e,xe(a),n=a}e.stateNode=n}else C1(s,e.type,e.stateNode);else e.stateNode=b1(s,n,e.memoizedProps);else a!==n?(a===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):a.count--,n===null?C1(s,e.type,e.stateNode):b1(s,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Pf(e,e.memoizedProps,i.memoizedProps)}break;case 27:Xe(t,e),Ye(e),n&512&&(he||i===null||rn(i,i.return)),i!==null&&n&4&&Pf(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Xe(t,e),Ye(e),n&512&&(he||i===null||rn(i,i.return)),e.flags&32){s=e.stateNode;try{Nr(s,"")}catch(g){Lt(e,e.return,g)}}n&4&&e.stateNode!=null&&(s=e.memoizedProps,Pf(e,s,i!==null?i.memoizedProps:s)),n&1024&&(jf=!0);break;case 6:if(Xe(t,e),Ye(e),n&4){if(e.stateNode===null)throw Error(I(162));n=e.memoizedProps,i=e.stateNode;try{i.nodeValue=n}catch(g){Lt(e,e.return,g)}}break;case 3:if(lu=null,s=Hi,Hi=Fu(t.containerInfo),Xe(t,e),Hi=s,Ye(e),n&4&&i!==null&&i.memoizedState.isDehydrated)try{Ur(t.containerInfo)}catch(g){Lt(e,e.return,g)}jf&&(jf=!1,A2(e));break;case 4:n=Hi,Hi=Fu(e.stateNode.containerInfo),Xe(t,e),Ye(e),Hi=n;break;case 12:Xe(t,e),Ye(e);break;case 31:Xe(t,e),Ye(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Rh(e,n)));break;case 13:Xe(t,e),Ye(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Oc=gi()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Rh(e,n)));break;case 22:s=e.memoizedState!==null;var o=i!==null&&i.memoizedState!==null,h=Tn,u=he;if(Tn=h||s,he=u||o,Xe(t,e),he=u,Tn=h,Ye(e),n&8192)t:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(i===null||o||Tn||he||ta(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){o=i=t;try{if(a=o.stateNode,s)r=a.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{l=o.stateNode;var f=o.memoizedProps.style,c=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=c==null||typeof c=="boolean"?"":(""+c).trim()}}catch(g){Lt(o,o.return,g)}}}else if(t.tag===6){if(i===null){o=t;try{o.stateNode.nodeValue=s?"":o.memoizedProps}catch(g){Lt(o,o.return,g)}}}else if(t.tag===18){if(i===null){o=t;try{var d=o.stateNode;s?v1(d,!0):v1(o.stateNode,!1)}catch(g){Lt(o,o.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(i=n.retryQueue,i!==null&&(n.retryQueue=null,Rh(e,i))));break;case 19:Xe(t,e),Ye(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Rh(e,n)));break;case 30:break;case 21:break;default:Xe(t,e),Ye(e)}}function Ye(e){var t=e.flags;if(t&2){try{for(var i,n=e.return;n!==null;){if(x2(n)){i=n;break}n=n.return}if(i==null)throw Error(I(160));switch(i.tag){case 27:var s=i.stateNode,a=zf(e);Lu(e,a,s);break;case 5:var r=i.stateNode;i.flags&32&&(Nr(r,""),i.flags&=-33);var l=zf(e);Lu(e,l,r);break;case 3:case 4:var o=i.stateNode.containerInfo,h=zf(e);a0(e,h,o);break;default:throw Error(I(161))}}catch(u){Lt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function A2(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;A2(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function En(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)M2(e,t.alternate,t),t=t.sibling}function ta(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Is(4,t,t.return),ta(t);break;case 1:rn(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&v2(t,t.return,i),ta(t);break;case 27:io(t.stateNode);case 26:case 5:rn(t,t.return),ta(t);break;case 22:t.memoizedState===null&&ta(t);break;case 30:ta(t);break;default:ta(t)}e=e.sibling}}function Mn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=e,a=t,r=a.flags;switch(a.tag){case 0:case 11:case 15:Mn(s,a,i),Jo(4,a);break;case 1:if(Mn(s,a,i),n=a,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(h){Lt(n,n.return,h)}if(n=a,s=n.updateQueue,s!==null){var l=n.stateNode;try{var o=s.shared.hiddenCallbacks;if(o!==null)for(s.shared.hiddenCallbacks=null,s=0;s<o.length;s++)Cv(o[s],l)}catch(h){Lt(n,n.return,h)}}i&&r&64&&p2(a),Jl(a,a.return);break;case 27:S2(a);case 26:case 5:Mn(s,a,i),i&&n===null&&r&4&&E2(a),Jl(a,a.return);break;case 12:Mn(s,a,i);break;case 31:Mn(s,a,i),i&&r&4&&C2(s,a);break;case 13:Mn(s,a,i),i&&r&4&&T2(s,a);break;case 22:a.memoizedState===null&&Mn(s,a,i),Jl(a,a.return);break;case 30:break;default:Mn(s,a,i)}t=t.sibling}}function Fg(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Wo(i))}function Ug(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wo(e))}function Xi(e,t,i,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)O2(e,t,i,n),t=t.sibling}function O2(e,t,i,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Xi(e,t,i,n),s&2048&&Jo(9,t);break;case 1:Xi(e,t,i,n);break;case 3:Xi(e,t,i,n),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wo(e)));break;case 12:if(s&2048){Xi(e,t,i,n),e=t.stateNode;try{var a=t.memoizedProps,r=a.id,l=a.onPostCommit;typeof l=="function"&&l(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(o){Lt(t,t.return,o)}}else Xi(e,t,i,n);break;case 31:Xi(e,t,i,n);break;case 13:Xi(e,t,i,n);break;case 23:break;case 22:a=t.stateNode,r=t.alternate,t.memoizedState!==null?a._visibility&2?Xi(e,t,i,n):$l(e,t):a._visibility&2?Xi(e,t,i,n):(a._visibility|=2,Za(e,t,i,n,(t.subtreeFlags&10256)!==0||!1)),s&2048&&Fg(r,t);break;case 24:Xi(e,t,i,n),s&2048&&Ug(t.alternate,t);break;default:Xi(e,t,i,n)}}function Za(e,t,i,n,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var a=e,r=t,l=i,o=n,h=r.flags;switch(r.tag){case 0:case 11:case 15:Za(a,r,l,o,s),Jo(8,r);break;case 23:break;case 22:var u=r.stateNode;r.memoizedState!==null?u._visibility&2?Za(a,r,l,o,s):$l(a,r):(u._visibility|=2,Za(a,r,l,o,s)),s&&h&2048&&Fg(r.alternate,r);break;case 24:Za(a,r,l,o,s),s&&h&2048&&Ug(r.alternate,r);break;default:Za(a,r,l,o,s)}t=t.sibling}}function $l(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,n=t,s=n.flags;switch(n.tag){case 22:$l(i,n),s&2048&&Fg(n.alternate,n);break;case 24:$l(i,n),s&2048&&Ug(n.alternate,n);break;default:$l(i,n)}t=t.sibling}}var Nl=8192;function ja(e,t,i){if(e.subtreeFlags&Nl)for(e=e.child;e!==null;)L2(e,t,i),e=e.sibling}function L2(e,t,i){switch(e.tag){case 26:ja(e,t,i),e.flags&Nl&&e.memoizedState!==null&&db(i,Hi,e.memoizedState,e.memoizedProps);break;case 5:ja(e,t,i);break;case 3:case 4:var n=Hi;Hi=Fu(e.stateNode.containerInfo),ja(e,t,i),Hi=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Nl,Nl=16777216,ja(e,t,i),Nl=n):ja(e,t,i));break;default:ja(e,t,i)}}function N2(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function vl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];ve=n,D2(n,e)}N2(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)G2(e),e=e.sibling}function G2(e){switch(e.tag){case 0:case 11:case 15:vl(e),e.flags&2048&&Is(9,e,e.return);break;case 3:vl(e);break;case 12:vl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,au(e)):vl(e);break;default:vl(e)}}function au(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];ve=n,D2(n,e)}N2(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Is(8,t,t.return),au(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,au(t));break;default:au(t)}e=e.sibling}}function D2(e,t){for(;ve!==null;){var i=ve;switch(i.tag){case 0:case 11:case 15:Is(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var n=i.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Wo(i.memoizedState.cache)}if(n=i.child,n!==null)n.return=i,ve=n;else t:for(i=e;ve!==null;){n=ve;var s=n.sibling,a=n.return;if(b2(n),n===i){ve=null;break t}if(s!==null){s.return=a,ve=s;break t}ve=a}}}var RM={getCacheForType:function(e){var t=Ae(ue),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Ae(ue).controller.signal}},AM=typeof WeakMap=="function"?WeakMap:Map,Mt=0,zt=null,ct=null,gt=0,Ot=0,li=null,ds=!1,nl=!1,kg=!1,Xn=0,ee=0,Ps=0,fa=0,Bg=0,fi=0,Pr=0,to=null,Ze=null,r0=!1,Oc=0,I2=0,Nu=1/0,Gu=null,ws=null,_e=0,Cs=null,zr=null,Dn=0,l0=0,o0=null,P2=null,eo=0,h0=null;function yi(){return Mt&2&&gt!==0?gt&-gt:Q.T!==null?Yg():qp()}function z2(){if(fi===0)if(!(gt&536870912)||yt){var e=Eh;Eh<<=1,!(Eh&3932160)&&(Eh=262144),fi=e}else fi=536870912;return e=vi.current,e!==null&&(e.flags|=32),fi}function ii(e,t,i){(e===zt&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)&&(jr(e,0),gs(e,gt,fi,!1)),Zo(e,i),(!(Mt&2)||e!==zt)&&(e===zt&&(!(Mt&2)&&(fa|=i),ee===4&&gs(e,gt,fi,!1)),fn(e))}function j2(e,t,i){if(Mt&6)throw Error(I(327));var n=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Ho(e,t),s=n?NM(e,t):Ff(e,t,!0),a=n;do{if(s===0){nl&&!n&&gs(e,t,0,!1);break}else{if(i=e.current.alternate,a&&!OM(i)){s=Ff(e,t,!1),a=!1;continue}if(s===2){if(a=t,e.errorRecoveryDisabledLanes&a)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;t:{var l=e;s=to;var o=l.current.memoizedState.isDehydrated;if(o&&(jr(l,r).flags|=256),r=Ff(l,r,!1),r!==2){if(kg&&!o){l.errorRecoveryDisabledLanes|=a,fa|=a,s=4;break t}a=Ze,Ze=s,a!==null&&(Ze===null?Ze=a:Ze.push.apply(Ze,a))}s=r}if(a=!1,s!==2)continue}}if(s===1){jr(e,0),gs(e,t,0,!0);break}t:{switch(n=e,a=s,a){case 0:case 1:throw Error(I(345));case 4:if((t&4194048)!==t)break;case 6:gs(n,t,fi,!ds);break t;case 2:Ze=null;break;case 3:case 5:break;default:throw Error(I(329))}if((t&62914560)===t&&(s=Oc+300-gi(),10<s)){if(gs(n,t,fi,!ds),vc(n,0,!0)!==0)break t;Dn=t,n.timeoutHandle=sE(r1.bind(null,n,i,Ze,Gu,r0,t,fi,fa,Pr,ds,a,"Throttled",-0,0),s);break t}r1(n,i,Ze,Gu,r0,t,fi,fa,Pr,ds,a,null,-0,0)}}break}while(!0);fn(e)}function r1(e,t,i,n,s,a,r,l,o,h,u,f,c,d){if(e.timeoutHandle=-1,f=t.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:On},L2(t,a,f);var g=(a&62914560)===a?Oc-gi():(a&4194048)===a?I2-gi():0;if(g=gb(f,g),g!==null){Dn=a,e.cancelPendingCommit=g(o1.bind(null,e,t,a,i,n,s,r,l,o,u,f,null,c,d)),gs(e,a,r,!h);return}}o1(e,t,a,i,n,s,r,l,o)}function OM(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var n=0;n<i.length;n++){var s=i[n],a=s.getSnapshot;s=s.value;try{if(!pi(a(),s))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gs(e,t,i,n){t&=~Bg,t&=~fa,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var a=31-mi(s),r=1<<a;n[a]=-1,s&=~r}i!==0&&Bp(e,i,t)}function Lc(){return Mt&6?!0:($o(0),!1)}function Xg(){if(ct!==null){if(Ot===0)var e=ct.return;else e=ct,Ln=Oa=null,Rg(e),xr=null,po=0,e=ct;for(;e!==null;)y2(e.alternate,e),e=e.return;ct=null}}function jr(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,WM(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Dn=0,Xg(),zt=e,ct=i=Nn(e.current,null),gt=t,Ot=0,li=null,ds=!1,nl=Ho(e,t),kg=!1,Pr=fi=Bg=fa=Ps=ee=0,Ze=to=null,r0=!1,t&8&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var s=31-mi(n),a=1<<s;t|=e[s],n&=~a}return Xn=t,Mc(),i}function F2(e,t){at=null,Q.H=Eo,t===il||t===wc?(t=jm(),Ot=3):t===xg?(t=jm(),Ot=4):Ot=t===zg?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,li=t,ct===null&&(ee=1,Au(e,Li(t,e.current)))}function U2(){var e=vi.current;return e===null?!0:(gt&4194048)===gt?Pi===null:(gt&62914560)===gt||gt&536870912?e===Pi:!1}function k2(){var e=Q.H;return Q.H=Eo,e===null?Eo:e}function B2(){var e=Q.A;return Q.A=RM,e}function Du(){ee=4,ds||(gt&4194048)!==gt&&vi.current!==null||(nl=!0),!(Ps&134217727)&&!(fa&134217727)||zt===null||gs(zt,gt,fi,!1)}function Ff(e,t,i){var n=Mt;Mt|=2;var s=k2(),a=B2();(zt!==e||gt!==t)&&(Gu=null,jr(e,t)),t=!1;var r=ee;t:do try{if(Ot!==0&&ct!==null){var l=ct,o=li;switch(Ot){case 8:Xg(),r=6;break t;case 3:case 2:case 9:case 6:vi.current===null&&(t=!0);var h=Ot;if(Ot=0,li=null,cr(e,l,o,h),i&&nl){r=0;break t}break;default:h=Ot,Ot=0,li=null,cr(e,l,o,h)}}LM(),r=ee;break}catch(u){F2(e,u)}while(!0);return t&&e.shellSuspendCounter++,Ln=Oa=null,Mt=n,Q.H=s,Q.A=a,ct===null&&(zt=null,gt=0,Mc()),r}function LM(){for(;ct!==null;)X2(ct)}function NM(e,t){var i=Mt;Mt|=2;var n=k2(),s=B2();zt!==e||gt!==t?(Gu=null,Nu=gi()+500,jr(e,t)):nl=Ho(e,t);t:do try{if(Ot!==0&&ct!==null){t=ct;var a=li;e:switch(Ot){case 1:Ot=0,li=null,cr(e,t,a,1);break;case 2:case 9:if(zm(a)){Ot=0,li=null,l1(t);break}t=function(){Ot!==2&&Ot!==9||zt!==e||(Ot=7),fn(e)},a.then(t,t);break t;case 3:Ot=7;break t;case 4:Ot=5;break t;case 7:zm(a)?(Ot=0,li=null,l1(t)):(Ot=0,li=null,cr(e,t,a,7));break;case 5:var r=null;switch(ct.tag){case 26:r=ct.memoizedState;case 5:case 27:var l=ct;if(r?hE(r):l.stateNode.complete){Ot=0,li=null;var o=l.sibling;if(o!==null)ct=o;else{var h=l.return;h!==null?(ct=h,Nc(h)):ct=null}break e}}Ot=0,li=null,cr(e,t,a,5);break;case 6:Ot=0,li=null,cr(e,t,a,6);break;case 8:Xg(),ee=6;break t;default:throw Error(I(462))}}GM();break}catch(u){F2(e,u)}while(!0);return Ln=Oa=null,Q.H=n,Q.A=s,Mt=i,ct!==null?0:(zt=null,gt=0,Mc(),ee)}function GM(){for(;ct!==null&&!i4();)X2(ct)}function X2(e){var t=m2(e.alternate,e,Xn);e.memoizedProps=e.pendingProps,t===null?Nc(e):ct=t}function l1(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=t1(i,t,t.pendingProps,t.type,void 0,gt);break;case 11:t=t1(i,t,t.pendingProps,t.type.render,t.ref,gt);break;case 5:Rg(t);default:y2(i,t),t=ct=yv(t,Xn),t=m2(i,t,Xn)}e.memoizedProps=e.pendingProps,t===null?Nc(e):ct=t}function cr(e,t,i,n){Ln=Oa=null,Rg(t),xr=null,po=0;var s=t.return;try{if(xM(e,s,t,i,gt)){ee=1,Au(e,Li(i,e.current)),ct=null;return}}catch(a){if(s!==null)throw ct=s,a;ee=1,Au(e,Li(i,e.current)),ct=null;return}t.flags&32768?(yt||n===1?e=!0:nl||gt&536870912?e=!1:(ds=e=!0,(n===2||n===9||n===3||n===6)&&(n=vi.current,n!==null&&n.tag===13&&(n.flags|=16384))),Y2(t,e)):Nc(t)}function Nc(e){var t=e;do{if(t.flags&32768){Y2(t,ds);return}e=t.return;var i=bM(t.alternate,t,Xn);if(i!==null){ct=i;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);ee===0&&(ee=5)}function Y2(e,t){do{var i=wM(e.alternate,e);if(i!==null){i.flags&=32767,ct=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){ct=e;return}ct=e=i}while(e!==null);ee=6,ct=null}function o1(e,t,i,n,s,a,r,l,o){e.cancelPendingCommit=null;do Gc();while(_e!==0);if(Mt&6)throw Error(I(327));if(t!==null){if(t===e.current)throw Error(I(177));if(a=t.lanes|t.childLanes,a|=gg,f4(e,i,a,r,l,o),e===zt&&(ct=zt=null,gt=0),zr=t,Cs=e,Dn=i,l0=a,o0=s,P2=n,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,zM(pu,function(){return K2(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,t.subtreeFlags&13878||n){n=Q.T,Q.T=null,s=bt.p,bt.p=2,r=Mt,Mt|=4;try{CM(e,t,i)}finally{Mt=r,bt.p=s,Q.T=n}}_e=1,q2(),H2(),Z2()}}function q2(){if(_e===1){_e=0;var e=Cs,t=zr,i=(t.flags&13878)!==0;if(t.subtreeFlags&13878||i){i=Q.T,Q.T=null;var n=bt.p;bt.p=2;var s=Mt;Mt|=4;try{R2(t,e);var a=d0,r=hv(e.containerInfo),l=a.focusedElem,o=a.selectionRange;if(r!==l&&l&&l.ownerDocument&&ov(l.ownerDocument.documentElement,l)){if(o!==null&&dg(l)){var h=o.start,u=o.end;if(u===void 0&&(u=h),"selectionStart"in l)l.selectionStart=h,l.selectionEnd=Math.min(u,l.value.length);else{var f=l.ownerDocument||document,c=f&&f.defaultView||window;if(c.getSelection){var d=c.getSelection(),g=l.textContent.length,y=Math.min(o.start,g),v=o.end===void 0?y:Math.min(o.end,g);!d.extend&&y>v&&(r=v,v=y,y=r);var _=Om(l,y),m=Om(l,v);if(_&&m&&(d.rangeCount!==1||d.anchorNode!==_.node||d.anchorOffset!==_.offset||d.focusNode!==m.node||d.focusOffset!==m.offset)){var p=f.createRange();p.setStart(_.node,_.offset),d.removeAllRanges(),y>v?(d.addRange(p),d.extend(m.node,m.offset)):(p.setEnd(m.node,m.offset),d.addRange(p))}}}}for(f=[],d=l;d=d.parentNode;)d.nodeType===1&&f.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var E=f[l];E.element.scrollLeft=E.left,E.element.scrollTop=E.top}}Bu=!!f0,d0=f0=null}finally{Mt=s,bt.p=n,Q.T=i}}e.current=t,_e=2}}function H2(){if(_e===2){_e=0;var e=Cs,t=zr,i=(t.flags&8772)!==0;if(t.subtreeFlags&8772||i){i=Q.T,Q.T=null;var n=bt.p;bt.p=2;var s=Mt;Mt|=4;try{M2(e,t.alternate,t)}finally{Mt=s,bt.p=n,Q.T=i}}_e=3}}function Z2(){if(_e===4||_e===3){_e=0,n4();var e=Cs,t=zr,i=Dn,n=P2;t.subtreeFlags&10256||t.flags&10256?_e=5:(_e=0,zr=Cs=null,V2(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(ws=null),rg(i),t=t.stateNode,_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(qo,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=Q.T,s=bt.p,bt.p=2,Q.T=null;try{for(var a=e.onRecoverableError,r=0;r<n.length;r++){var l=n[r];a(l.value,{componentStack:l.stack})}}finally{Q.T=t,bt.p=s}}Dn&3&&Gc(),fn(e),s=e.pendingLanes,i&261930&&s&42?e===h0?eo++:(eo=0,h0=e):eo=0,$o(0)}}function V2(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Wo(t)))}function Gc(){return q2(),H2(),Z2(),K2()}function K2(){if(_e!==5)return!1;var e=Cs,t=l0;l0=0;var i=rg(Dn),n=Q.T,s=bt.p;try{bt.p=32>i?32:i,Q.T=null,i=o0,o0=null;var a=Cs,r=Dn;if(_e=0,zr=Cs=null,Dn=0,Mt&6)throw Error(I(331));var l=Mt;if(Mt|=4,G2(a.current),O2(a,a.current,r,i),Mt=l,$o(0,!1),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(qo,a)}catch{}return!0}finally{bt.p=s,Q.T=n,V2(e,t)}}function h1(e,t,i){t=Li(i,t),t=i0(e.stateNode,t,2),e=bs(e,t,2),e!==null&&(Zo(e,2),fn(e))}function Lt(e,t,i){if(e.tag===3)h1(e,e,i);else for(;t!==null;){if(t.tag===3){h1(t,e,i);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ws===null||!ws.has(n))){e=Li(i,e),i=u2(2),n=bs(t,i,2),n!==null&&(c2(i,n,t,e),Zo(n,2),fn(n));break}}t=t.return}}function Uf(e,t,i){var n=e.pingCache;if(n===null){n=e.pingCache=new AM;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(i)||(kg=!0,s.add(i),e=DM.bind(null,e,t,i),t.then(e,e))}function DM(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,zt===e&&(gt&i)===i&&(ee===4||ee===3&&(gt&62914560)===gt&&300>gi()-Oc?!(Mt&2)&&jr(e,0):Bg|=i,Pr===gt&&(Pr=0)),fn(e)}function W2(e,t){t===0&&(t=kp()),e=Aa(e,t),e!==null&&(Zo(e,t),fn(e))}function IM(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),W2(e,i)}function PM(e,t){var i=0;switch(e.tag){case 31:case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(i=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(I(314))}n!==null&&n.delete(t),W2(e,i)}function zM(e,t){return sg(e,t)}var Iu=null,Va=null,u0=!1,Pu=!1,kf=!1,_s=0;function fn(e){e!==Va&&e.next===null&&(Va===null?Iu=Va=e:Va=Va.next=e),Pu=!0,u0||(u0=!0,FM())}function $o(e,t){if(!kf&&Pu){kf=!0;do for(var i=!1,n=Iu;n!==null;){if(e!==0){var s=n.pendingLanes;if(s===0)var a=0;else{var r=n.suspendedLanes,l=n.pingedLanes;a=(1<<31-mi(42|e)+1)-1,a&=s&~(r&~l),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(i=!0,u1(n,a))}else a=gt,a=vc(n,n===zt?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(a&3)||Ho(n,a)||(i=!0,u1(n,a));n=n.next}while(i);kf=!1}}function jM(){Q2()}function Q2(){Pu=u0=!1;var e=0;_s!==0&&KM()&&(e=_s);for(var t=gi(),i=null,n=Iu;n!==null;){var s=n.next,a=J2(n,t);a===0?(n.next=null,i===null?Iu=s:i.next=s,s===null&&(Va=i)):(i=n,(e!==0||a&3)&&(Pu=!0)),n=s}_e!==0&&_e!==5||$o(e),_s!==0&&(_s=0)}function J2(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var r=31-mi(a),l=1<<r,o=s[r];o===-1?(!(l&i)||l&n)&&(s[r]=c4(l,t)):o<=t&&(e.expiredLanes|=l),a&=~l}if(t=zt,i=gt,i=vc(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,i===0||e===t&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&_f(n),e.callbackNode=null,e.callbackPriority=0;if(!(i&3)||Ho(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(n!==null&&_f(n),rg(i)){case 2:case 8:i=Fp;break;case 32:i=pu;break;case 268435456:i=Up;break;default:i=pu}return n=$2.bind(null,e),i=sg(i,n),e.callbackPriority=t,e.callbackNode=i,t}return n!==null&&n!==null&&_f(n),e.callbackPriority=2,e.callbackNode=null,2}function $2(e,t){if(_e!==0&&_e!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Gc()&&e.callbackNode!==i)return null;var n=gt;return n=vc(e,e===zt?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(j2(e,n,t),J2(e,gi()),e.callbackNode!=null&&e.callbackNode===i?$2.bind(null,e):null)}function u1(e,t){if(Gc())return null;j2(e,t,!0)}function FM(){QM(function(){Mt&6?sg(jp,jM):Q2()})}function Yg(){if(_s===0){var e=Gr;e===0&&(e=vh,vh<<=1,!(vh&261888)&&(vh=256)),_s=e}return _s}function c1(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wh(""+e)}function f1(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function UM(e,t,i,n,s){if(t==="submit"&&i&&i.stateNode===s){var a=c1((s[ni]||null).action),r=n.submitter;r&&(t=(t=r[ni]||null)?c1(t.formAction):r.getAttribute("formAction"),t!==null&&(a=t,r=null));var l=new Ec("action","action",null,n,s);e.push({event:l,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(_s!==0){var o=r?f1(s,r):new FormData(s);t0(i,{pending:!0,data:o,method:s.method,action:a},null,o)}}else typeof a=="function"&&(l.preventDefault(),o=r?f1(s,r):new FormData(s),t0(i,{pending:!0,data:o,method:s.method,action:a},a,o))},currentTarget:s}]})}}for(var Bf=0;Bf<Bd.length;Bf++){var Xf=Bd[Bf],kM=Xf.toLowerCase(),BM=Xf[0].toUpperCase()+Xf.slice(1);Ji(kM,"on"+BM)}Ji(cv,"onAnimationEnd");Ji(fv,"onAnimationIteration");Ji(dv,"onAnimationStart");Ji("dblclick","onDoubleClick");Ji("focusin","onFocus");Ji("focusout","onBlur");Ji(sM,"onTransitionRun");Ji(aM,"onTransitionStart");Ji(rM,"onTransitionCancel");Ji(gv,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);Ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ca("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xo));function tE(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var n=e[i],s=n.event;n=n.listeners;t:{var a=void 0;if(t)for(var r=n.length-1;0<=r;r--){var l=n[r],o=l.instance,h=l.currentTarget;if(l=l.listener,o!==a&&s.isPropagationStopped())break t;a=l,s.currentTarget=h;try{a(s)}catch(u){Eu(u)}s.currentTarget=null,a=o}else for(r=0;r<n.length;r++){if(l=n[r],o=l.instance,h=l.currentTarget,l=l.listener,o!==a&&s.isPropagationStopped())break t;a=l,s.currentTarget=h;try{a(s)}catch(u){Eu(u)}s.currentTarget=null,a=o}}}}function ut(e,t){var i=t[Dd];i===void 0&&(i=t[Dd]=new Set);var n=e+"__bubble";i.has(n)||(eE(t,e,2,!1),i.add(n))}function Yf(e,t,i){var n=0;t&&(n|=4),eE(i,e,n,t)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function qg(e){if(!e[Ah]){e[Ah]=!0,Hp.forEach(function(i){i!=="selectionchange"&&(XM.has(i)||Yf(i,!1,e),Yf(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ah]||(t[Ah]=!0,Yf("selectionchange",!1,t))}}function eE(e,t,i,n){switch(gE(t)){case 2:var s=yb;break;case 8:s=pb;break;default:s=Kg}i=s.bind(null,t,i,e),s=void 0,!Fd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):s!==void 0?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function qf(e,t,i,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)t:for(;;){if(n===null)return;var r=n.tag;if(r===3||r===4){var l=n.stateNode.containerInfo;if(l===s)break;if(r===4)for(r=n.return;r!==null;){var o=r.tag;if((o===3||o===4)&&r.stateNode.containerInfo===s)return;r=r.return}for(;l!==null;){if(r=ir(l),r===null)return;if(o=r.tag,o===5||o===6||o===26||o===27){n=a=r;continue t}l=l.parentNode}}n=n.return}tv(function(){var h=a,u=hg(i),f=[];t:{var c=_v.get(e);if(c!==void 0){var d=Ec,g=e;switch(e){case"keypress":if(Jh(i)===0)break t;case"keydown":case"keyup":d=P4;break;case"focusin":g="focus",d=Ef;break;case"focusout":g="blur",d=Ef;break;case"beforeblur":case"afterblur":d=Ef;break;case"click":if(i.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Em;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=b4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=F4;break;case cv:case fv:case dv:d=T4;break;case gv:d=k4;break;case"scroll":case"scrollend":d=S4;break;case"wheel":d=X4;break;case"copy":case"cut":case"paste":d=A4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Sm;break;case"toggle":case"beforetoggle":d=q4}var y=(t&4)!==0,v=!y&&(e==="scroll"||e==="scrollend"),_=y?c!==null?c+"Capture":null:c;y=[];for(var m=h,p;m!==null;){var E=m;if(p=E.stateNode,E=E.tag,E!==5&&E!==26&&E!==27||p===null||_===null||(E=fo(m,_),E!=null&&y.push(So(m,E,p))),v)break;m=m.return}0<y.length&&(c=new d(c,g,null,i,u),f.push({event:c,listeners:y}))}}if(!(t&7)){t:{if(c=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",c&&i!==jd&&(g=i.relatedTarget||i.fromElement)&&(ir(g)||g[$r]))break t;if((d||c)&&(c=u.window===u?u:(c=u.ownerDocument)?c.defaultView||c.parentWindow:window,d?(g=i.relatedTarget||i.toElement,d=h,g=g?ir(g):null,g!==null&&(v=Yo(g),y=g.tag,g!==v||y!==5&&y!==27&&y!==6)&&(g=null)):(d=null,g=h),d!==g)){if(y=Em,E="onMouseLeave",_="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=Sm,E="onPointerLeave",_="onPointerEnter",m="pointer"),v=d==null?c:Ol(d),p=g==null?c:Ol(g),c=new y(E,m+"leave",d,i,u),c.target=v,c.relatedTarget=p,E=null,ir(u)===h&&(y=new y(_,m+"enter",g,i,u),y.target=p,y.relatedTarget=v,E=y),v=E,d&&g)e:{for(y=YM,_=d,m=g,p=0,E=_;E;E=y(E))p++;E=0;for(var M=m;M;M=y(M))E++;for(;0<p-E;)_=y(_),p--;for(;0<E-p;)m=y(m),E--;for(;p--;){if(_===m||m!==null&&_===m.alternate){y=_;break e}_=y(_),m=y(m)}y=null}else y=null;d!==null&&d1(f,c,d,y,!1),g!==null&&v!==null&&d1(f,v,g,y,!0)}}t:{if(c=h?Ol(h):window,d=c.nodeName&&c.nodeName.toLowerCase(),d==="select"||d==="input"&&c.type==="file")var T=Cm;else if(wm(c))if(rv)T=eM;else{T=$4;var b=J4}else d=c.nodeName,!d||d.toLowerCase()!=="input"||c.type!=="checkbox"&&c.type!=="radio"?h&&og(h.elementType)&&(T=Cm):T=tM;if(T&&(T=T(e,h))){av(f,T,i,u);break t}b&&b(e,c,h),e==="focusout"&&h&&c.type==="number"&&h.memoizedProps.value!=null&&zd(c,"number",c.value)}switch(b=h?Ol(h):window,e){case"focusin":(wm(b)||b.contentEditable==="true")&&(ar=b,Ud=h,Hl=null);break;case"focusout":Hl=Ud=ar=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Lm(f,i,u);break;case"selectionchange":if(nM)break;case"keydown":case"keyup":Lm(f,i,u)}var x;if(fg)t:{switch(e){case"compositionstart":var S="onCompositionStart";break t;case"compositionend":S="onCompositionEnd";break t;case"compositionupdate":S="onCompositionUpdate";break t}S=void 0}else sr?nv(e,i)&&(S="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(S="onCompositionStart");S&&(iv&&i.locale!=="ko"&&(sr||S!=="onCompositionStart"?S==="onCompositionEnd"&&sr&&(x=ev()):(fs=u,ug="value"in fs?fs.value:fs.textContent,sr=!0)),b=zu(h,S),0<b.length&&(S=new xm(S,e,null,i,u),f.push({event:S,listeners:b}),x?S.data=x:(x=sv(i),x!==null&&(S.data=x)))),(x=Z4?V4(e,i):K4(e,i))&&(S=zu(h,"onBeforeInput"),0<S.length&&(b=new xm("onBeforeInput","beforeinput",null,i,u),f.push({event:b,listeners:S}),b.data=x)),UM(f,e,h,i,u)}tE(f,t)})}function So(e,t,i){return{instance:e,listener:t,currentTarget:i}}function zu(e,t){for(var i=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||a===null||(s=fo(e,i),s!=null&&n.unshift(So(e,s,a)),s=fo(e,t),s!=null&&n.push(So(e,s,a))),e.tag===3)return n;e=e.return}return[]}function YM(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function d1(e,t,i,n,s){for(var a=t._reactName,r=[];i!==null&&i!==n;){var l=i,o=l.alternate,h=l.stateNode;if(l=l.tag,o!==null&&o===n)break;l!==5&&l!==26&&l!==27||h===null||(o=h,s?(h=fo(i,a),h!=null&&r.unshift(So(i,h,o))):s||(h=fo(i,a),h!=null&&r.push(So(i,h,o)))),i=i.return}r.length!==0&&e.push({event:t,listeners:r})}var qM=/\r\n?/g,HM=/\u0000|\uFFFD/g;function g1(e){return(typeof e=="string"?e:""+e).replace(qM,`
`).replace(HM,"")}function iE(e,t){return t=g1(t),g1(e)===t}function Dt(e,t,i,n,s,a){switch(i){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Nr(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Nr(e,""+n);break;case"className":Sh(e,"class",n);break;case"tabIndex":Sh(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Sh(e,i,n);break;case"style":$p(e,n,a);break;case"data":if(t!=="object"){Sh(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=Wh(""+n),e.setAttribute(i,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(i==="formAction"?(t!=="input"&&Dt(e,t,"name",s.name,s,null),Dt(e,t,"formEncType",s.formEncType,s,null),Dt(e,t,"formMethod",s.formMethod,s,null),Dt(e,t,"formTarget",s.formTarget,s,null)):(Dt(e,t,"encType",s.encType,s,null),Dt(e,t,"method",s.method,s,null),Dt(e,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=Wh(""+n),e.setAttribute(i,n);break;case"onClick":n!=null&&(e.onclick=On);break;case"onScroll":n!=null&&ut("scroll",e);break;case"onScrollEnd":n!=null&&ut("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(I(61));if(i=n.__html,i!=null){if(s.children!=null)throw Error(I(60));e.innerHTML=i}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}i=Wh(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""+n):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":n===!0?e.setAttribute(i,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,n):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(i,n):e.removeAttribute(i);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(i):e.setAttribute(i,n);break;case"popover":ut("beforetoggle",e),ut("toggle",e),Kh(e,"popover",n);break;case"xlinkActuate":yn(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":yn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":yn(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":yn(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":yn(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":yn(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":yn(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":yn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":yn(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Kh(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=E4.get(i)||i,Kh(e,i,n))}}function c0(e,t,i,n,s,a){switch(i){case"style":$p(e,n,a);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(I(61));if(i=n.__html,i!=null){if(s.children!=null)throw Error(I(60));e.innerHTML=i}}break;case"children":typeof n=="string"?Nr(e,n):(typeof n=="number"||typeof n=="bigint")&&Nr(e,""+n);break;case"onScroll":n!=null&&ut("scroll",e);break;case"onScrollEnd":n!=null&&ut("scrollend",e);break;case"onClick":n!=null&&(e.onclick=On);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zp.hasOwnProperty(i))t:{if(i[0]==="o"&&i[1]==="n"&&(s=i.endsWith("Capture"),t=i.slice(2,s?i.length-7:void 0),a=e[ni]||null,a=a!=null?a[i]:null,typeof a=="function"&&e.removeEventListener(t,a,s),typeof n=="function")){typeof a!="function"&&a!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,n,s);break t}i in e?e[i]=n:n===!0?e.setAttribute(i,""):Kh(e,i,n)}}}function Le(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",e),ut("load",e);var n=!1,s=!1,a;for(a in i)if(i.hasOwnProperty(a)){var r=i[a];if(r!=null)switch(a){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(I(137,t));default:Dt(e,t,a,r,i,null)}}s&&Dt(e,t,"srcSet",i.srcSet,i,null),n&&Dt(e,t,"src",i.src,i,null);return;case"input":ut("invalid",e);var l=a=r=s=null,o=null,h=null;for(n in i)if(i.hasOwnProperty(n)){var u=i[n];if(u!=null)switch(n){case"name":s=u;break;case"type":r=u;break;case"checked":o=u;break;case"defaultChecked":h=u;break;case"value":a=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(I(137,t));break;default:Dt(e,t,n,u,i,null)}}Wp(e,a,l,o,h,r,s,!1);return;case"select":ut("invalid",e),n=r=a=null;for(s in i)if(i.hasOwnProperty(s)&&(l=i[s],l!=null))switch(s){case"value":a=l;break;case"defaultValue":r=l;break;case"multiple":n=l;default:Dt(e,t,s,l,i,null)}t=a,i=r,e.multiple=!!n,t!=null?pr(e,!!n,t,!1):i!=null&&pr(e,!!n,i,!0);return;case"textarea":ut("invalid",e),a=s=n=null;for(r in i)if(i.hasOwnProperty(r)&&(l=i[r],l!=null))switch(r){case"value":n=l;break;case"defaultValue":s=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(I(91));break;default:Dt(e,t,r,l,i,null)}Jp(e,n,s,a);return;case"option":for(o in i)if(i.hasOwnProperty(o)&&(n=i[o],n!=null))switch(o){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Dt(e,t,o,n,i,null)}return;case"dialog":ut("beforetoggle",e),ut("toggle",e),ut("cancel",e),ut("close",e);break;case"iframe":case"object":ut("load",e);break;case"video":case"audio":for(n=0;n<xo.length;n++)ut(xo[n],e);break;case"image":ut("error",e),ut("load",e);break;case"details":ut("toggle",e);break;case"embed":case"source":case"link":ut("error",e),ut("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in i)if(i.hasOwnProperty(h)&&(n=i[h],n!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(I(137,t));default:Dt(e,t,h,n,i,null)}return;default:if(og(t)){for(u in i)i.hasOwnProperty(u)&&(n=i[u],n!==void 0&&c0(e,t,u,n,i,void 0));return}}for(l in i)i.hasOwnProperty(l)&&(n=i[l],n!=null&&Dt(e,t,l,n,i,null))}function ZM(e,t,i,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,r=null,l=null,o=null,h=null,u=null;for(d in i){var f=i[d];if(i.hasOwnProperty(d)&&f!=null)switch(d){case"checked":break;case"value":break;case"defaultValue":o=f;default:n.hasOwnProperty(d)||Dt(e,t,d,null,n,f)}}for(var c in n){var d=n[c];if(f=i[c],n.hasOwnProperty(c)&&(d!=null||f!=null))switch(c){case"type":a=d;break;case"name":s=d;break;case"checked":h=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(I(137,t));break;default:d!==f&&Dt(e,t,c,d,n,f)}}Pd(e,r,l,o,h,u,a,s);return;case"select":d=r=l=c=null;for(a in i)if(o=i[a],i.hasOwnProperty(a)&&o!=null)switch(a){case"value":break;case"multiple":d=o;default:n.hasOwnProperty(a)||Dt(e,t,a,null,n,o)}for(s in n)if(a=n[s],o=i[s],n.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case"value":c=a;break;case"defaultValue":l=a;break;case"multiple":r=a;default:a!==o&&Dt(e,t,s,a,n,o)}t=l,i=r,n=d,c!=null?pr(e,!!i,c,!1):!!n!=!!i&&(t!=null?pr(e,!!i,t,!0):pr(e,!!i,i?[]:"",!1));return;case"textarea":d=c=null;for(l in i)if(s=i[l],i.hasOwnProperty(l)&&s!=null&&!n.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Dt(e,t,l,null,n,s)}for(r in n)if(s=n[r],a=i[r],n.hasOwnProperty(r)&&(s!=null||a!=null))switch(r){case"value":c=s;break;case"defaultValue":d=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(I(91));break;default:s!==a&&Dt(e,t,r,s,n,a)}Qp(e,c,d);return;case"option":for(var g in i)if(c=i[g],i.hasOwnProperty(g)&&c!=null&&!n.hasOwnProperty(g))switch(g){case"selected":e.selected=!1;break;default:Dt(e,t,g,null,n,c)}for(o in n)if(c=n[o],d=i[o],n.hasOwnProperty(o)&&c!==d&&(c!=null||d!=null))switch(o){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Dt(e,t,o,c,n,d)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var y in i)c=i[y],i.hasOwnProperty(y)&&c!=null&&!n.hasOwnProperty(y)&&Dt(e,t,y,null,n,c);for(h in n)if(c=n[h],d=i[h],n.hasOwnProperty(h)&&c!==d&&(c!=null||d!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(c!=null)throw Error(I(137,t));break;default:Dt(e,t,h,c,n,d)}return;default:if(og(t)){for(var v in i)c=i[v],i.hasOwnProperty(v)&&c!==void 0&&!n.hasOwnProperty(v)&&c0(e,t,v,void 0,n,c);for(u in n)c=n[u],d=i[u],!n.hasOwnProperty(u)||c===d||c===void 0&&d===void 0||c0(e,t,u,c,n,d);return}}for(var _ in i)c=i[_],i.hasOwnProperty(_)&&c!=null&&!n.hasOwnProperty(_)&&Dt(e,t,_,null,n,c);for(f in n)c=n[f],d=i[f],!n.hasOwnProperty(f)||c===d||c==null&&d==null||Dt(e,t,f,c,n,d)}function _1(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function VM(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),n=0;n<i.length;n++){var s=i[n],a=s.transferSize,r=s.initiatorType,l=s.duration;if(a&&l&&_1(r)){for(r=0,l=s.responseEnd,n+=1;n<i.length;n++){var o=i[n],h=o.startTime;if(h>l)break;var u=o.transferSize,f=o.initiatorType;u&&_1(f)&&(o=o.responseEnd,r+=u*(o<l?1:(l-h)/(o-h)))}if(--n,t+=8*(a+r)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var f0=null,d0=null;function ju(e){return e.nodeType===9?e:e.ownerDocument}function m1(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nE(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function g0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hf=null;function KM(){var e=window.event;return e&&e.type==="popstate"?e===Hf?!1:(Hf=e,!0):(Hf=null,!1)}var sE=typeof setTimeout=="function"?setTimeout:void 0,WM=typeof clearTimeout=="function"?clearTimeout:void 0,y1=typeof Promise=="function"?Promise:void 0,QM=typeof queueMicrotask=="function"?queueMicrotask:typeof y1<"u"?function(e){return y1.resolve(null).then(e).catch(JM)}:sE;function JM(e){setTimeout(function(){throw e})}function Xs(e){return e==="head"}function p1(e,t){var i=t,n=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"||i==="/&"){if(n===0){e.removeChild(s),Ur(t);return}n--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")n++;else if(i==="html")io(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,io(i);for(var a=i.firstChild;a;){var r=a.nextSibling,l=a.nodeName;a[Vo]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||i.removeChild(a),a=r}}else i==="body"&&io(e.ownerDocument.body);i=s}while(i);Ur(t)}function v1(e,t){var i=e;e=0;do{var n=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=n}while(i)}function _0(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":_0(i),lg(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function $M(e,t,i,n){for(;e.nodeType===1;){var s=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Vo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(a=e.getAttribute("rel"),a==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(a!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(a=e.getAttribute("src"),(a!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var a=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===a)return e}else return e;if(e=zi(e.nextSibling),e===null)break}return null}function tb(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=zi(e.nextSibling),e===null))return null;return e}function aE(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=zi(e.nextSibling),e===null))return null;return e}function m0(e){return e.data==="$?"||e.data==="$~"}function y0(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function eb(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var n=function(){t(),i.removeEventListener("DOMContentLoaded",n)};i.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function zi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var p0=null;function E1(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return zi(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function x1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function rE(e,t,i){switch(t=ju(i),e){case"html":if(e=t.documentElement,!e)throw Error(I(452));return e;case"head":if(e=t.head,!e)throw Error(I(453));return e;case"body":if(e=t.body,!e)throw Error(I(454));return e;default:throw Error(I(451))}}function io(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);lg(e)}var Ui=new Map,S1=new Set;function Fu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var qn=bt.d;bt.d={f:ib,r:nb,D:sb,C:ab,L:rb,m:lb,X:hb,S:ob,M:ub};function ib(){var e=qn.f(),t=Lc();return e||t}function nb(e){var t=tl(e);t!==null&&t.tag===5&&t.type==="form"?$v(t):qn.r(e)}var sl=typeof document>"u"?null:document;function lE(e,t,i){var n=sl;if(n&&typeof t=="string"&&t){var s=Oi(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof i=="string"&&(s+='[crossorigin="'+i+'"]'),S1.has(s)||(S1.add(s),e={rel:e,crossOrigin:i,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),Le(t,"link",e),xe(t),n.head.appendChild(t)))}}function sb(e){qn.D(e),lE("dns-prefetch",e,null)}function ab(e,t){qn.C(e,t),lE("preconnect",e,t)}function rb(e,t,i){qn.L(e,t,i);var n=sl;if(n&&e&&t){var s='link[rel="preload"][as="'+Oi(t)+'"]';t==="image"&&i&&i.imageSrcSet?(s+='[imagesrcset="'+Oi(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(s+='[imagesizes="'+Oi(i.imageSizes)+'"]')):s+='[href="'+Oi(e)+'"]';var a=s;switch(t){case"style":a=Fr(e);break;case"script":a=al(e)}Ui.has(a)||(e=Xt({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Ui.set(a,e),n.querySelector(s)!==null||t==="style"&&n.querySelector(th(a))||t==="script"&&n.querySelector(eh(a))||(t=n.createElement("link"),Le(t,"link",e),xe(t),n.head.appendChild(t)))}}function lb(e,t){qn.m(e,t);var i=sl;if(i&&e){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Oi(n)+'"][href="'+Oi(e)+'"]',a=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=al(e)}if(!Ui.has(a)&&(e=Xt({rel:"modulepreload",href:e},t),Ui.set(a,e),i.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(eh(a)))return}n=i.createElement("link"),Le(n,"link",e),xe(n),i.head.appendChild(n)}}}function ob(e,t,i){qn.S(e,t,i);var n=sl;if(n&&e){var s=yr(n).hoistableStyles,a=Fr(e);t=t||"default";var r=s.get(a);if(!r){var l={loading:0,preload:null};if(r=n.querySelector(th(a)))l.loading=5;else{e=Xt({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Ui.get(a))&&Hg(e,i);var o=r=n.createElement("link");xe(o),Le(o,"link",e),o._p=new Promise(function(h,u){o.onload=h,o.onerror=u}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,ru(r,t,n)}r={type:"stylesheet",instance:r,count:1,state:l},s.set(a,r)}}}function hb(e,t){qn.X(e,t);var i=sl;if(i&&e){var n=yr(i).hoistableScripts,s=al(e),a=n.get(s);a||(a=i.querySelector(eh(s)),a||(e=Xt({src:e,async:!0},t),(t=Ui.get(s))&&Zg(e,t),a=i.createElement("script"),xe(a),Le(a,"link",e),i.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(s,a))}}function ub(e,t){qn.M(e,t);var i=sl;if(i&&e){var n=yr(i).hoistableScripts,s=al(e),a=n.get(s);a||(a=i.querySelector(eh(s)),a||(e=Xt({src:e,async:!0,type:"module"},t),(t=Ui.get(s))&&Zg(e,t),a=i.createElement("script"),xe(a),Le(a,"link",e),i.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(s,a))}}function M1(e,t,i,n){var s=(s=xs.current)?Fu(s):null;if(!s)throw Error(I(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Fr(i.href),i=yr(s).hoistableStyles,n=i.get(t),n||(n={type:"style",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Fr(i.href);var a=yr(s).hoistableStyles,r=a.get(e);if(r||(s=s.ownerDocument||s,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(e,r),(a=s.querySelector(th(e)))&&!a._p&&(r.instance=a,r.state.loading=5),Ui.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ui.set(e,i),a||cb(s,e,i,r.state))),t&&n===null)throw Error(I(528,""));return r}if(t&&n!==null)throw Error(I(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=al(i),i=yr(s).hoistableScripts,n=i.get(t),n||(n={type:"script",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(I(444,e))}}function Fr(e){return'href="'+Oi(e)+'"'}function th(e){return'link[rel="stylesheet"]['+e+"]"}function oE(e){return Xt({},e,{"data-precedence":e.precedence,precedence:null})}function cb(e,t,i,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Le(t,"link",i),xe(t),e.head.appendChild(t))}function al(e){return'[src="'+Oi(e)+'"]'}function eh(e){return"script[async]"+e}function b1(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Oi(i.href)+'"]');if(n)return t.instance=n,xe(n),n;var s=Xt({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),xe(n),Le(n,"style",s),ru(n,i.precedence,e),t.instance=n;case"stylesheet":s=Fr(i.href);var a=e.querySelector(th(s));if(a)return t.state.loading|=4,t.instance=a,xe(a),a;n=oE(i),(s=Ui.get(s))&&Hg(n,s),a=(e.ownerDocument||e).createElement("link"),xe(a);var r=a;return r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),Le(a,"link",n),t.state.loading|=4,ru(a,i.precedence,e),t.instance=a;case"script":return a=al(i.src),(s=e.querySelector(eh(a)))?(t.instance=s,xe(s),s):(n=i,(s=Ui.get(a))&&(n=Xt({},i),Zg(n,s)),e=e.ownerDocument||e,s=e.createElement("script"),xe(s),Le(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(I(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(n=t.instance,t.state.loading|=4,ru(n,i.precedence,e));return t.instance}function ru(e,t,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,a=s,r=0;r<n.length;r++){var l=n[r];if(l.dataset.precedence===t)a=l;else if(a!==s)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Hg(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Zg(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var lu=null;function w1(e,t,i){if(lu===null){var n=new Map,s=lu=new Map;s.set(i,n)}else s=lu,n=s.get(i),n||(n=new Map,s.set(i,n));if(n.has(e))return n;for(n.set(e,null),i=i.getElementsByTagName(e),s=0;s<i.length;s++){var a=i[s];if(!(a[Vo]||a[Te]||e==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var r=a.getAttribute(t)||"";r=e+r;var l=n.get(r);l?l.push(a):n.set(r,[a])}}return n}function C1(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function fb(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function hE(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function db(e,t,i,n){if(i.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(i.state.loading&4)){if(i.instance===null){var s=Fr(n.href),a=t.querySelector(th(s));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Uu.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=a,xe(a);return}a=t.ownerDocument||t,n=oE(n),(s=Ui.get(s))&&Hg(n,s),a=a.createElement("link"),xe(a);var r=a;r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),Le(a,"link",n),i.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&!(i.state.loading&3)&&(e.count++,i=Uu.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Zf=0;function gb(e,t){return e.stylesheets&&e.count===0&&ou(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var n=setTimeout(function(){if(e.stylesheets&&ou(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4+t);0<e.imgBytes&&Zf===0&&(Zf=62500*VM());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ou(e,e.stylesheets),e.unsuspend)){var a=e.unsuspend;e.unsuspend=null,a()}},(e.imgBytes>Zf?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(s)}}:null}function Uu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ou(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ku=null;function ou(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ku=new Map,t.forEach(_b,e),ku=null,Uu.call(e))}function _b(e,t){if(!(t.state.loading&4)){var i=ku.get(e);if(i)var n=i.get(null);else{i=new Map,ku.set(e,i);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var r=s[a];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(i.set(r.dataset.precedence,r),n=r)}n&&i.set(null,n)}s=t.instance,r=s.getAttribute("data-precedence"),a=i.get(r)||n,a===n&&i.set(null,s),i.set(r,s),this.count++,n=Uu.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),a?a.parentNode.insertBefore(s,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Mo={$$typeof:An,Provider:null,Consumer:null,_currentValue:oa,_currentValue2:oa,_threadCount:0};function mb(e,t,i,n,s,a,r,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mf(0),this.hiddenUpdates=mf(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function uE(e,t,i,n,s,a,r,l,o,h,u,f){return e=new mb(e,t,i,r,o,h,u,f,l),t=1,a===!0&&(t|=24),a=ci(3,null,null,t),e.current=a,a.stateNode=e,t=vg(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:n,isDehydrated:i,cache:t},Sg(a),e}function cE(e){return e?(e=or,e):or}function fE(e,t,i,n,s,a){s=cE(s),n.context===null?n.context=s:n.pendingContext=s,n=Ms(t),n.payload={element:i},a=a===void 0?null:a,a!==null&&(n.callback=a),i=bs(e,n,t),i!==null&&(ii(i,e,t),Vl(i,e,t))}function T1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Vg(e,t){T1(e,t),(e=e.alternate)&&T1(e,t)}function dE(e){if(e.tag===13||e.tag===31){var t=Aa(e,67108864);t!==null&&ii(t,e,67108864),Vg(e,67108864)}}function R1(e){if(e.tag===13||e.tag===31){var t=yi();t=ag(t);var i=Aa(e,t);i!==null&&ii(i,e,t),Vg(e,t)}}var Bu=!0;function yb(e,t,i,n){var s=Q.T;Q.T=null;var a=bt.p;try{bt.p=2,Kg(e,t,i,n)}finally{bt.p=a,Q.T=s}}function pb(e,t,i,n){var s=Q.T;Q.T=null;var a=bt.p;try{bt.p=8,Kg(e,t,i,n)}finally{bt.p=a,Q.T=s}}function Kg(e,t,i,n){if(Bu){var s=v0(n);if(s===null)qf(e,t,n,Xu,i),A1(e,n);else if(Eb(s,e,t,i,n))n.stopPropagation();else if(A1(e,n),t&4&&-1<vb.indexOf(e)){for(;s!==null;){var a=tl(s);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var r=Js(a.pendingLanes);if(r!==0){var l=a;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var o=1<<31-mi(r);l.entanglements[1]|=o,r&=~o}fn(a),!(Mt&6)&&(Nu=gi()+500,$o(0))}}break;case 31:case 13:l=Aa(a,2),l!==null&&ii(l,a,2),Lc(),Vg(a,2)}if(a=v0(n),a===null&&qf(e,t,n,Xu,i),a===s)break;s=a}s!==null&&n.stopPropagation()}else qf(e,t,n,null,i)}}function v0(e){return e=hg(e),Wg(e)}var Xu=null;function Wg(e){if(Xu=null,e=ir(e),e!==null){var t=Yo(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=Gp(t),e!==null)return e;e=null}else if(i===31){if(e=Dp(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xu=e,null}function gE(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(s4()){case jp:return 2;case Fp:return 8;case pu:case a4:return 32;case Up:return 268435456;default:return 32}default:return 32}}var E0=!1,Ts=null,Rs=null,As=null,bo=new Map,wo=new Map,us=[],vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A1(e,t){switch(e){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":bo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(t.pointerId)}}function El(e,t,i,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=tl(t),t!==null&&dE(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Eb(e,t,i,n,s){switch(t){case"focusin":return Ts=El(Ts,e,t,i,n,s),!0;case"dragenter":return Rs=El(Rs,e,t,i,n,s),!0;case"mouseover":return As=El(As,e,t,i,n,s),!0;case"pointerover":var a=s.pointerId;return bo.set(a,El(bo.get(a)||null,e,t,i,n,s)),!0;case"gotpointercapture":return a=s.pointerId,wo.set(a,El(wo.get(a)||null,e,t,i,n,s)),!0}return!1}function _E(e){var t=ir(e.target);if(t!==null){var i=Yo(t);if(i!==null){if(t=i.tag,t===13){if(t=Gp(i),t!==null){e.blockedOn=t,dm(e.priority,function(){R1(i)});return}}else if(t===31){if(t=Dp(i),t!==null){e.blockedOn=t,dm(e.priority,function(){R1(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=v0(e.nativeEvent);if(i===null){i=e.nativeEvent;var n=new i.constructor(i.type,i);jd=n,i.target.dispatchEvent(n),jd=null}else return t=tl(i),t!==null&&dE(t),e.blockedOn=i,!1;t.shift()}return!0}function O1(e,t,i){hu(e)&&i.delete(t)}function xb(){E0=!1,Ts!==null&&hu(Ts)&&(Ts=null),Rs!==null&&hu(Rs)&&(Rs=null),As!==null&&hu(As)&&(As=null),bo.forEach(O1),wo.forEach(O1)}function Oh(e,t){e.blockedOn===t&&(e.blockedOn=null,E0||(E0=!0,ye.unstable_scheduleCallback(ye.unstable_NormalPriority,xb)))}var Lh=null;function L1(e){Lh!==e&&(Lh=e,ye.unstable_scheduleCallback(ye.unstable_NormalPriority,function(){Lh===e&&(Lh=null);for(var t=0;t<e.length;t+=3){var i=e[t],n=e[t+1],s=e[t+2];if(typeof n!="function"){if(Wg(n||i)===null)continue;break}var a=tl(i);a!==null&&(e.splice(t,3),t-=3,t0(a,{pending:!0,data:s,method:i.method,action:n},n,s))}}))}function Ur(e){function t(o){return Oh(o,e)}Ts!==null&&Oh(Ts,e),Rs!==null&&Oh(Rs,e),As!==null&&Oh(As,e),bo.forEach(t),wo.forEach(t);for(var i=0;i<us.length;i++){var n=us[i];n.blockedOn===e&&(n.blockedOn=null)}for(;0<us.length&&(i=us[0],i.blockedOn===null);)_E(i),i.blockedOn===null&&us.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(n=0;n<i.length;n+=3){var s=i[n],a=i[n+1],r=s[ni]||null;if(typeof a=="function")r||L1(i);else if(r){var l=null;if(a&&a.hasAttribute("formAction")){if(s=a,r=a[ni]||null)l=r.formAction;else if(Wg(s)!==null)continue}else l=r.action;typeof l=="function"?i[n+1]=l:(i.splice(n,3),n-=3),L1(i)}}}function mE(){function e(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(r){return s=r})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),n||setTimeout(i,20)}function i(){if(!n&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function Qg(e){this._internalRoot=e}Dc.prototype.render=Qg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));var i=t.current,n=yi();fE(i,n,e,t,null,null)};Dc.prototype.unmount=Qg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fE(e.current,2,null,e,null,null),Lc(),t[$r]=null}};function Dc(e){this._internalRoot=e}Dc.prototype.unstable_scheduleHydration=function(e){if(e){var t=qp();e={blockedOn:null,target:e,priority:t};for(var i=0;i<us.length&&t!==0&&t<us[i].priority;i++);us.splice(i,0,e),i===0&&_E(e)}};var N1=Lp.version;if(N1!=="19.2.0")throw Error(I(527,N1,"19.2.0"));bt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=QS(t),e=e!==null?Ip(e):null,e=e===null?null:e.stateNode,e};var Sb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nh.isDisabled&&Nh.supportsFiber)try{qo=Nh.inject(Sb),_i=Nh}catch{}}yc.createRoot=function(e,t){if(!Np(e))throw Error(I(299));var i=!1,n="",s=l2,a=o2,r=h2;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=uE(e,1,!1,null,null,i,n,null,s,a,r,mE),e[$r]=t.current,qg(e),new Qg(t)};yc.hydrateRoot=function(e,t,i){if(!Np(e))throw Error(I(299));var n=!1,s="",a=l2,r=o2,l=h2,o=null;return i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onUncaughtError!==void 0&&(a=i.onUncaughtError),i.onCaughtError!==void 0&&(r=i.onCaughtError),i.onRecoverableError!==void 0&&(l=i.onRecoverableError),i.formState!==void 0&&(o=i.formState)),t=uE(e,1,!0,t,i??null,n,s,o,a,r,l,mE),t.context=cE(null),i=t.current,n=yi(),n=ag(n),s=Ms(n),s.callback=null,bs(i,s,n),i=n,t.current.lanes=i,Zo(t,i),fn(t),e[$r]=t.current,qg(e),new Dc(t)};yc.version="19.2.0";function yE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yE)}catch(e){console.error(e)}}yE(),wp.exports=yc;var Mb=wp.exports;/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wb=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,n)=>n?n.toUpperCase():i.toLowerCase()),G1=e=>{const t=wb(e);return t.charAt(0).toUpperCase()+t.slice(1)},pE=(...e)=>e.filter((t,i,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===i).join(" ").trim(),Cb=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=dt.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:r,...l},o)=>dt.createElement("svg",{ref:o,...Tb,width:t,height:t,stroke:e,strokeWidth:n?Number(i)*24/Number(t):i,className:pE("lucide",s),...!a&&!Cb(l)&&{"aria-hidden":"true"},...l},[...r.map(([h,u])=>dt.createElement(h,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=(e,t)=>{const i=dt.forwardRef(({className:n,...s},a)=>dt.createElement(Rb,{ref:a,iconNode:t,className:pE(`lucide-${bb(G1(e))}`,`lucide-${e}`,n),...s}));return i.displayName=G1(e),i};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Ob=fe("arrow-down",Ab);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Nb=fe("arrow-up",Lb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Db=fe("circle-plus",Gb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Pb=fe("download",Ib);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],jb=fe("ellipsis-vertical",zb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vE=fe("eye-off",Fb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],EE=fe("eye",Ub);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Bb=fe("file-braces",kb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],D1=fe("file-plus",Xb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],qb=fe("folder-open",Yb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Zb=fe("layers",Hb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Kb=fe("map-pin",Vb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],xE=fe("maximize",Wb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Jb=fe("mouse-pointer",Qb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],t3=fe("pen",$b);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],i3=fe("search",e3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],x0=fe("table",n3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],a3=fe("trash-2",s3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],l3=fe("upload",r3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yu=fe("x",o3),I1=e=>{let t;const i=new Set,n=(h,u)=>{const f=typeof h=="function"?h(t):h;if(!Object.is(f,t)){const c=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),i.forEach(d=>d(t,c))}},s=()=>t,l={setState:n,getState:s,getInitialState:()=>o,subscribe:h=>(i.add(h),()=>i.delete(h))},o=t=e(n,s,l);return l},h3=e=>e?I1(e):I1,u3=e=>e;function c3(e,t=u3){const i=Tl.useSyncExternalStore(e.subscribe,Tl.useCallback(()=>t(e.getState()),[e,t]),Tl.useCallback(()=>t(e.getInitialState()),[e,t]));return Tl.useDebugValue(i),i}const P1=e=>{const t=h3(e),i=n=>c3(t,n);return Object.assign(i,t),i},f3=e=>e?P1(e):P1;function d3(e,t){let i;try{i=e()}catch{return}return{getItem:s=>{var a;const r=o=>o===null?null:JSON.parse(o,void 0),l=(a=i.getItem(s))!=null?a:null;return l instanceof Promise?l.then(r):r(l)},setItem:(s,a)=>i.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>i.removeItem(s)}}const S0=e=>t=>{try{const i=e(t);return i instanceof Promise?i:{then(n){return S0(n)(i)},catch(n){return this}}}catch(i){return{then(n){return this},catch(n){return S0(n)(i)}}}},g3=(e,t)=>(i,n,s)=>{let a={storage:d3(()=>localStorage),partialize:y=>y,version:0,merge:(y,v)=>({...v,...y}),...t},r=!1;const l=new Set,o=new Set;let h=a.storage;if(!h)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),i(...y)},n,s);const u=()=>{const y=a.partialize({...n()});return h.setItem(a.name,{state:y,version:a.version})},f=s.setState;s.setState=(y,v)=>(f(y,v),u());const c=e((...y)=>(i(...y),u()),n,s);s.getInitialState=()=>c;let d;const g=()=>{var y,v;if(!h)return;r=!1,l.forEach(m=>{var p;return m((p=n())!=null?p:c)});const _=((v=a.onRehydrateStorage)==null?void 0:v.call(a,(y=n())!=null?y:c))||void 0;return S0(h.getItem.bind(h))(a.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==a.version){if(a.migrate){const p=a.migrate(m.state,m.version);return p instanceof Promise?p.then(E=>[!0,E]):[!0,p]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var p;const[E,M]=m;if(d=a.merge(M,(p=n())!=null?p:c),i(d,!0),E)return u()}).then(()=>{_==null||_(d,void 0),d=n(),r=!0,o.forEach(m=>m(d))}).catch(m=>{_==null||_(void 0,m)})};return s.persist={setOptions:y=>{a={...a,...y},y.storage&&(h=y.storage)},clearStorage:()=>{h==null||h.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>g(),hasHydrated:()=>r,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(o.add(y),()=>{o.delete(y)})},a.skipHydration||g(),d||c},_3=g3,br=f3(_3(e=>({layers:[],selectedLayerId:null,selectedFeature:null,mapViewState:{center:null,zoom:null},zoomToLayerId:null,addLayer:t=>e(i=>({layers:[...i.layers,t],selectedLayerId:t.id})),removeLayer:t=>e(i=>({layers:i.layers.filter(n=>n.id!==t),selectedLayerId:i.selectedLayerId===t?null:i.selectedLayerId})),toggleLayerVisibility:t=>e(i=>({layers:i.layers.map(n=>n.id===t?{...n,visible:!n.visible}:n)})),reorderLayers:t=>e({layers:t}),moveLayerUp:t=>e(i=>{const n=i.layers.findIndex(a=>a.id===t);if(n<=0)return i;const s=[...i.layers];return[s[n-1],s[n]]=[s[n],s[n-1]],{layers:s}}),moveLayerDown:t=>e(i=>{const n=i.layers.findIndex(a=>a.id===t);if(n===-1||n===i.layers.length-1)return i;const s=[...i.layers];return[s[n+1],s[n]]=[s[n],s[n+1]],{layers:s}}),renameLayer:(t,i)=>e(n=>({layers:n.layers.map(s=>s.id===t?{...s,name:i}:s)})),setProjectState:t=>e({layers:t.layers||[],selectedLayerId:null,selectedFeature:null,mapViewState:t.mapViewState||{center:null,zoom:null}}),resetProject:()=>e({layers:[],selectedLayerId:null,selectedFeature:null,mapViewState:{center:null,zoom:null},zoomToLayerId:null}),selectLayer:t=>e({selectedLayerId:t}),selectFeature:t=>e({selectedFeature:t}),setMapViewState:t=>e({mapViewState:t}),triggerZoomToLayer:t=>e({zoomToLayerId:t}),updateLayerStyle:(t,i)=>e(n=>({layers:n.layers.map(s=>s.id===t?{...s,style:{...s.style,...i}}:s)})),createEmptyLayer:t=>e(i=>{const n={id:crypto.randomUUID(),name:t||"New Layer",type:"vector",source:{type:"FeatureCollection",features:[]},visible:!0,style:{color:"#"+Math.floor(Math.random()*16777215).toString(16),radius:6}};return{layers:[...i.layers,n],selectedLayerId:n.id}}),addFeatureToLayer:(t,i)=>e(n=>({layers:n.layers.map(s=>s.id!==t?s:{...s,source:{...s.source,features:[...s.source.features||[],i]}})})),interactionMode:"default",targetLayerId:null,setInteractionMode:(t,i=null)=>e({interactionMode:t,targetLayerId:i})}),{name:"minigis-storage",partialize:e=>({layers:e.layers,selectedLayerId:e.selectedLayerId,mapViewState:e.mapViewState})}));var SE={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((i,n)=>{e.exports=n()})(CS,function i(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,a=!n.document&&!!n.postMessage,r=n.IS_PAPA_WORKER||!1,l={},o=0,h={};function u(x){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(S){var w=M(S);w.chunkSize=parseInt(w.chunkSize),S.step||S.chunk||(w.chunkSize=null),this._handle=new y(w),(this._handle.streamer=this)._config=w}).call(this,x),this.parseChunk=function(S,w){var A=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<A){let P=this._config.newline;P||(O=this._config.quoteChar||'"',P=this._handle.guessLineEndings(S,O)),S=[...S.split(P).slice(A)].join(P)}this.isFirstChunk&&b(this._config.beforeFirstChunk)&&(O=this._config.beforeFirstChunk(S))!==void 0&&(S=O),this.isFirstChunk=!1,this._halted=!1;var A=this._partialLine+S,O=(this._partialLine="",this._handle.parse(A,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(S=O.meta.cursor,A=(this._finished||(this._partialLine=A.substring(S-this._baseIndex),this._baseIndex=S),O&&O.data&&(this._rowCount+=O.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),r)n.postMessage({results:O,workerId:h.WORKER_ID,finished:A});else if(b(this._config.chunk)&&!w){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=O=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!A||!b(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),A||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(S){b(this._config.error)?this._config.error(S):r&&this._config.error&&n.postMessage({workerId:h.WORKER_ID,error:S,finished:!1})}}function f(x){var S;(x=x||{}).chunkSize||(x.chunkSize=h.RemoteChunkSize),u.call(this,x),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(w){this._input=w,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(S=new XMLHttpRequest,this._config.withCredentials&&(S.withCredentials=this._config.withCredentials),a||(S.onload=T(this._chunkLoaded,this),S.onerror=T(this._chunkError,this)),S.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var w,A=this._config.downloadRequestHeaders;for(w in A)S.setRequestHeader(w,A[w])}var O;this._config.chunkSize&&(O=this._start+this._config.chunkSize-1,S.setRequestHeader("Range","bytes="+this._start+"-"+O));try{S.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}a&&S.status===0&&this._chunkError()}},this._chunkLoaded=function(){S.readyState===4&&(S.status<200||400<=S.status?this._chunkError():(this._start+=this._config.chunkSize||S.responseText.length,this._finished=!this._config.chunkSize||this._start>=(w=>(w=w.getResponseHeader("Content-Range"))!==null?parseInt(w.substring(w.lastIndexOf("/")+1)):-1)(S),this.parseChunk(S.responseText)))},this._chunkError=function(w){w=S.statusText||w,this._sendError(new Error(w))}}function c(x){(x=x||{}).chunkSize||(x.chunkSize=h.LocalChunkSize),u.call(this,x);var S,w,A=typeof FileReader<"u";this.stream=function(O){this._input=O,w=O.slice||O.webkitSlice||O.mozSlice,A?((S=new FileReader).onload=T(this._chunkLoaded,this),S.onerror=T(this._chunkError,this)):S=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var O=this._input,P=(this._config.chunkSize&&(P=Math.min(this._start+this._config.chunkSize,this._input.size),O=w.call(O,this._start,P)),S.readAsText(O,this._config.encoding));A||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(O){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(O.target.result)},this._chunkError=function(){this._sendError(S.error)}}function d(x){var S;u.call(this,x=x||{}),this.stream=function(w){return S=w,this._nextChunk()},this._nextChunk=function(){var w,A;if(!this._finished)return w=this._config.chunkSize,S=w?(A=S.substring(0,w),S.substring(w)):(A=S,""),this._finished=!S,this.parseChunk(A)}}function g(x){u.call(this,x=x||{});var S=[],w=!0,A=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(O){this._input=O,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){A&&S.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),S.length?this.parseChunk(S.shift()):w=!0},this._streamData=T(function(O){try{S.push(typeof O=="string"?O:O.toString(this._config.encoding)),w&&(w=!1,this._checkIsFinished(),this.parseChunk(S.shift()))}catch(P){this._streamError(P)}},this),this._streamError=T(function(O){this._streamCleanUp(),this._sendError(O)},this),this._streamEnd=T(function(){this._streamCleanUp(),A=!0,this._streamData("")},this),this._streamCleanUp=T(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(x){var S,w,A,O,P=Math.pow(2,53),U=-P,Z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,L=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,G=this,D=0,z=0,Y=!1,B=!1,R=[],F={data:[],errors:[],meta:{}};function q(tt){return x.skipEmptyLines==="greedy"?tt.join("").trim()==="":tt.length===1&&tt[0].length===0}function H(){if(F&&A&&(pt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),A=!1),x.skipEmptyLines&&(F.data=F.data.filter(function(Gt){return!q(Gt)})),_t()){let Gt=function(Yt,Et){b(x.transformHeader)&&(Yt=x.transformHeader(Yt,Et)),R.push(Yt)};var nt=Gt;if(F)if(Array.isArray(F.data[0])){for(var tt=0;_t()&&tt<F.data.length;tt++)F.data[tt].forEach(Gt);F.data.splice(0,1)}else F.data.forEach(Gt)}function et(Gt,Yt){for(var Et=x.header?{}:[],rt=0;rt<Gt.length;rt++){var W=rt,Zt=Gt[rt],Zt=((ht,wt)=>(Pt=>(x.dynamicTypingFunction&&x.dynamicTyping[Pt]===void 0&&(x.dynamicTyping[Pt]=x.dynamicTypingFunction(Pt)),(x.dynamicTyping[Pt]||x.dynamicTyping)===!0))(ht)?wt==="true"||wt==="TRUE"||wt!=="false"&&wt!=="FALSE"&&((Pt=>{if(Z.test(Pt)&&(Pt=parseFloat(Pt),U<Pt&&Pt<P))return 1})(wt)?parseFloat(wt):L.test(wt)?new Date(wt):wt===""?null:wt):wt)(W=x.header?rt>=R.length?"__parsed_extra":R[rt]:W,Zt=x.transform?x.transform(Zt,W):Zt);W==="__parsed_extra"?(Et[W]=Et[W]||[],Et[W].push(Zt)):Et[W]=Zt}return x.header&&(rt>R.length?pt("FieldMismatch","TooManyFields","Too many fields: expected "+R.length+" fields but parsed "+rt,z+Yt):rt<R.length&&pt("FieldMismatch","TooFewFields","Too few fields: expected "+R.length+" fields but parsed "+rt,z+Yt)),Et}var ft;F&&(x.header||x.dynamicTyping||x.transform)&&(ft=1,!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(et),ft=F.data.length):F.data=et(F.data,0),x.header&&F.meta&&(F.meta.fields=R),z+=ft)}function _t(){return x.header&&R.length===0}function pt(tt,et,ft,nt){tt={type:tt,code:et,message:ft},nt!==void 0&&(tt.row=nt),F.errors.push(tt)}b(x.step)&&(O=x.step,x.step=function(tt){F=tt,_t()?H():(H(),F.data.length!==0&&(D+=tt.data.length,x.preview&&D>x.preview?w.abort():(F.data=F.data[0],O(F,G))))}),this.parse=function(tt,et,ft){var nt=x.quoteChar||'"',nt=(x.newline||(x.newline=this.guessLineEndings(tt,nt)),A=!1,x.delimiter?b(x.delimiter)&&(x.delimiter=x.delimiter(tt),F.meta.delimiter=x.delimiter):((nt=((Gt,Yt,Et,rt,W)=>{var Zt,ht,wt,Pt;W=W||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var ri=0;ri<W.length;ri++){for(var Me,qt=W[ri],le=0,Be=0,Vt=0,de=(wt=void 0,new _({comments:rt,delimiter:qt,newline:Yt,preview:10}).parse(Gt)),Bi=0;Bi<de.data.length;Bi++)Et&&q(de.data[Bi])?Vt++:(Me=de.data[Bi].length,Be+=Me,wt===void 0?wt=Me:0<Me&&(le+=Math.abs(Me-wt),wt=Me));0<de.data.length&&(Be/=de.data.length-Vt),(ht===void 0||le<=ht)&&(Pt===void 0||Pt<Be)&&1.99<Be&&(ht=le,Zt=qt,Pt=Be)}return{successful:!!(x.delimiter=Zt),bestDelimiter:Zt}})(tt,x.newline,x.skipEmptyLines,x.comments,x.delimitersToGuess)).successful?x.delimiter=nt.bestDelimiter:(A=!0,x.delimiter=h.DefaultDelimiter),F.meta.delimiter=x.delimiter),M(x));return x.preview&&x.header&&nt.preview++,S=tt,w=new _(nt),F=w.parse(S,et,ft),H(),Y?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return Y},this.pause=function(){Y=!0,w.abort(),S=b(x.chunk)?"":S.substring(w.getCharIndex())},this.resume=function(){G.streamer._halted?(Y=!1,G.streamer.parseChunk(S,!0)):setTimeout(G.resume,3)},this.aborted=function(){return B},this.abort=function(){B=!0,w.abort(),F.meta.aborted=!0,b(x.complete)&&x.complete(F),S=""},this.guessLineEndings=function(Gt,nt){Gt=Gt.substring(0,1048576);var nt=new RegExp(v(nt)+"([^]*?)"+v(nt),"gm"),ft=(Gt=Gt.replace(nt,"")).split("\r"),nt=Gt.split(`
`),Gt=1<nt.length&&nt[0].length<ft[0].length;if(ft.length===1||Gt)return`
`;for(var Yt=0,Et=0;Et<ft.length;Et++)ft[Et][0]===`
`&&Yt++;return Yt>=ft.length/2?`\r
`:"\r"}}function v(x){return x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(x){var S=(x=x||{}).delimiter,w=x.newline,A=x.comments,O=x.step,P=x.preview,U=x.fastMode,Z=null,L=!1,G=x.quoteChar==null?'"':x.quoteChar,D=G;if(x.escapeChar!==void 0&&(D=x.escapeChar),(typeof S!="string"||-1<h.BAD_DELIMITERS.indexOf(S))&&(S=","),A===S)throw new Error("Comment character same as delimiter");A===!0?A="#":(typeof A!="string"||-1<h.BAD_DELIMITERS.indexOf(A))&&(A=!1),w!==`
`&&w!=="\r"&&w!==`\r
`&&(w=`
`);var z=0,Y=!1;this.parse=function(B,R,F){if(typeof B!="string")throw new Error("Input must be a string");var q=B.length,H=S.length,_t=w.length,pt=A.length,tt=b(O),et=[],ft=[],nt=[],Gt=z=0;if(!B)return le();if(U||U!==!1&&B.indexOf(G)===-1){for(var Yt=B.split(w),Et=0;Et<Yt.length;Et++){if(nt=Yt[Et],z+=nt.length,Et!==Yt.length-1)z+=w.length;else if(F)return le();if(!A||nt.substring(0,pt)!==A){if(tt){if(et=[],Pt(nt.split(S)),Be(),Y)return le()}else Pt(nt.split(S));if(P&&P<=Et)return et=et.slice(0,P),le(!0)}}return le()}for(var rt=B.indexOf(S,z),W=B.indexOf(w,z),Zt=new RegExp(v(D)+v(G),"g"),ht=B.indexOf(G,z);;)if(B[z]===G)for(ht=z,z++;;){if((ht=B.indexOf(G,ht+1))===-1)return F||ft.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:et.length,index:z}),Me();if(ht===q-1)return Me(B.substring(z,ht).replace(Zt,G));if(G===D&&B[ht+1]===D)ht++;else if(G===D||ht===0||B[ht-1]!==D){rt!==-1&&rt<ht+1&&(rt=B.indexOf(S,ht+1));var wt=ri((W=W!==-1&&W<ht+1?B.indexOf(w,ht+1):W)===-1?rt:Math.min(rt,W));if(B.substr(ht+1+wt,H)===S){nt.push(B.substring(z,ht).replace(Zt,G)),B[z=ht+1+wt+H]!==G&&(ht=B.indexOf(G,z)),rt=B.indexOf(S,z),W=B.indexOf(w,z);break}if(wt=ri(W),B.substring(ht+1+wt,ht+1+wt+_t)===w){if(nt.push(B.substring(z,ht).replace(Zt,G)),qt(ht+1+wt+_t),rt=B.indexOf(S,z),ht=B.indexOf(G,z),tt&&(Be(),Y))return le();if(P&&et.length>=P)return le(!0);break}ft.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:et.length,index:z}),ht++}}else if(A&&nt.length===0&&B.substring(z,z+pt)===A){if(W===-1)return le();z=W+_t,W=B.indexOf(w,z),rt=B.indexOf(S,z)}else if(rt!==-1&&(rt<W||W===-1))nt.push(B.substring(z,rt)),z=rt+H,rt=B.indexOf(S,z);else{if(W===-1)break;if(nt.push(B.substring(z,W)),qt(W+_t),tt&&(Be(),Y))return le();if(P&&et.length>=P)return le(!0)}return Me();function Pt(Vt){et.push(Vt),Gt=z}function ri(Vt){var de=0;return de=Vt!==-1&&(Vt=B.substring(ht+1,Vt))&&Vt.trim()===""?Vt.length:de}function Me(Vt){return F||(Vt===void 0&&(Vt=B.substring(z)),nt.push(Vt),z=q,Pt(nt),tt&&Be()),le()}function qt(Vt){z=Vt,Pt(nt),nt=[],W=B.indexOf(w,z)}function le(Vt){if(x.header&&!R&&et.length&&!L){var de=et[0],Bi=Object.create(null),Pa=new Set(de);let hl=!1;for(let $i=0;$i<de.length;$i++){let Ei=de[$i];if(Bi[Ei=b(x.transformHeader)?x.transformHeader(Ei,$i):Ei]){let Hs,ul=Bi[Ei];for(;Hs=Ei+"_"+ul,ul++,Pa.has(Hs););Pa.add(Hs),de[$i]=Hs,Bi[Ei]++,hl=!0,(Z=Z===null?{}:Z)[Hs]=Ei}else Bi[Ei]=1,de[$i]=Ei;Pa.add(Ei)}hl&&console.warn("Duplicate headers found and renamed."),L=!0}return{data:et,errors:ft,meta:{delimiter:S,linebreak:w,aborted:Y,truncated:!!Vt,cursor:Gt+(R||0),renamedHeaders:Z}}}function Be(){O(le()),et=[],ft=[]}},this.abort=function(){Y=!0},this.getCharIndex=function(){return z}}function m(x){var S=x.data,w=l[S.workerId],A=!1;if(S.error)w.userError(S.error,S.file);else if(S.results&&S.results.data){var O={abort:function(){A=!0,p(S.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:E,resume:E};if(b(w.userStep)){for(var P=0;P<S.results.data.length&&(w.userStep({data:S.results.data[P],errors:S.results.errors,meta:S.results.meta},O),!A);P++);delete S.results}else b(w.userChunk)&&(w.userChunk(S.results,O,S.file),delete S.results)}S.finished&&!A&&p(S.workerId,S.results)}function p(x,S){var w=l[x];b(w.userComplete)&&w.userComplete(S),w.terminate(),delete l[x]}function E(){throw new Error("Not implemented.")}function M(x){if(typeof x!="object"||x===null)return x;var S,w=Array.isArray(x)?[]:{};for(S in x)w[S]=M(x[S]);return w}function T(x,S){return function(){x.apply(S,arguments)}}function b(x){return typeof x=="function"}return h.parse=function(x,S){var w=(S=S||{}).dynamicTyping||!1;if(b(w)&&(S.dynamicTypingFunction=w,w={}),S.dynamicTyping=w,S.transform=!!b(S.transform)&&S.transform,!S.worker||!h.WORKERS_SUPPORTED)return w=null,h.NODE_STREAM_INPUT,typeof x=="string"?(x=(A=>A.charCodeAt(0)!==65279?A:A.slice(1))(x),w=new(S.download?f:d)(S)):x.readable===!0&&b(x.read)&&b(x.on)?w=new g(S):(n.File&&x instanceof File||x instanceof Object)&&(w=new c(S)),w.stream(x);(w=(()=>{var A;return!!h.WORKERS_SUPPORTED&&(A=(()=>{var O=n.URL||n.webkitURL||null,P=i.toString();return h.BLOB_URL||(h.BLOB_URL=O.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",P,")();"],{type:"text/javascript"})))})(),(A=new n.Worker(A)).onmessage=m,A.id=o++,l[A.id]=A)})()).userStep=S.step,w.userChunk=S.chunk,w.userComplete=S.complete,w.userError=S.error,S.step=b(S.step),S.chunk=b(S.chunk),S.complete=b(S.complete),S.error=b(S.error),delete S.worker,w.postMessage({input:x,config:S,workerId:w.id})},h.unparse=function(x,S){var w=!1,A=!0,O=",",P=`\r
`,U='"',Z=U+U,L=!1,G=null,D=!1,z=((()=>{if(typeof S=="object"){if(typeof S.delimiter!="string"||h.BAD_DELIMITERS.filter(function(R){return S.delimiter.indexOf(R)!==-1}).length||(O=S.delimiter),typeof S.quotes!="boolean"&&typeof S.quotes!="function"&&!Array.isArray(S.quotes)||(w=S.quotes),typeof S.skipEmptyLines!="boolean"&&typeof S.skipEmptyLines!="string"||(L=S.skipEmptyLines),typeof S.newline=="string"&&(P=S.newline),typeof S.quoteChar=="string"&&(U=S.quoteChar),typeof S.header=="boolean"&&(A=S.header),Array.isArray(S.columns)){if(S.columns.length===0)throw new Error("Option columns is empty");G=S.columns}S.escapeChar!==void 0&&(Z=S.escapeChar+U),S.escapeFormulae instanceof RegExp?D=S.escapeFormulae:typeof S.escapeFormulae=="boolean"&&S.escapeFormulae&&(D=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(U),"g"));if(typeof x=="string"&&(x=JSON.parse(x)),Array.isArray(x)){if(!x.length||Array.isArray(x[0]))return Y(null,x,L);if(typeof x[0]=="object")return Y(G||Object.keys(x[0]),x,L)}else if(typeof x=="object")return typeof x.data=="string"&&(x.data=JSON.parse(x.data)),Array.isArray(x.data)&&(x.fields||(x.fields=x.meta&&x.meta.fields||G),x.fields||(x.fields=Array.isArray(x.data[0])?x.fields:typeof x.data[0]=="object"?Object.keys(x.data[0]):[]),Array.isArray(x.data[0])||typeof x.data[0]=="object"||(x.data=[x.data])),Y(x.fields||[],x.data||[],L);throw new Error("Unable to serialize unrecognized input");function Y(R,F,q){var H="",_t=(typeof R=="string"&&(R=JSON.parse(R)),typeof F=="string"&&(F=JSON.parse(F)),Array.isArray(R)&&0<R.length),pt=!Array.isArray(F[0]);if(_t&&A){for(var tt=0;tt<R.length;tt++)0<tt&&(H+=O),H+=B(R[tt],tt);0<F.length&&(H+=P)}for(var et=0;et<F.length;et++){var ft=(_t?R:F[et]).length,nt=!1,Gt=_t?Object.keys(F[et]).length===0:F[et].length===0;if(q&&!_t&&(nt=q==="greedy"?F[et].join("").trim()==="":F[et].length===1&&F[et][0].length===0),q==="greedy"&&_t){for(var Yt=[],Et=0;Et<ft;Et++){var rt=pt?R[Et]:Et;Yt.push(F[et][rt])}nt=Yt.join("").trim()===""}if(!nt){for(var W=0;W<ft;W++){0<W&&!Gt&&(H+=O);var Zt=_t&&pt?R[W]:W;H+=B(F[et][Zt],W)}et<F.length-1&&(!q||0<ft&&!Gt)&&(H+=P)}}return H}function B(R,F){var q,H;return R==null?"":R.constructor===Date?JSON.stringify(R).slice(1,25):(H=!1,D&&typeof R=="string"&&D.test(R)&&(R="'"+R,H=!0),q=R.toString().replace(z,Z),(H=H||w===!0||typeof w=="function"&&w(R,F)||Array.isArray(w)&&w[F]||((_t,pt)=>{for(var tt=0;tt<pt.length;tt++)if(-1<_t.indexOf(pt[tt]))return!0;return!1})(q,h.BAD_DELIMITERS)||-1<q.indexOf(O)||q.charAt(0)===" "||q.charAt(q.length-1)===" ")?U+q+U:q)}},h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!a&&!!n.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=_,h.ParserHandle=y,h.NetworkStreamer=f,h.FileStreamer=c,h.StringStreamer=d,h.ReadableStreamStreamer=g,n.jQuery&&((s=n.jQuery).fn.parse=function(x){var S=x.config||{},w=[];return this.each(function(P){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var U=0;U<this.files.length;U++)w.push({file:this.files[U],inputElem:this,instanceConfig:s.extend({},S)})}),A(),this;function A(){if(w.length===0)b(x.complete)&&x.complete();else{var P,U,Z,L,G=w[0];if(b(x.before)){var D=x.before(G.file,G.inputElem);if(typeof D=="object"){if(D.action==="abort")return P="AbortError",U=G.file,Z=G.inputElem,L=D.reason,void(b(x.error)&&x.error({name:P},U,Z,L));if(D.action==="skip")return void O();typeof D.config=="object"&&(G.instanceConfig=s.extend(G.instanceConfig,D.config))}else if(D==="skip")return void O()}var z=G.instanceConfig.complete;G.instanceConfig.complete=function(Y){b(z)&&z(Y,G.file,G.inputElem),O()},h.parse(G.file,G.instanceConfig)}}function O(){w.splice(0,1),A()}}),r&&(n.onmessage=function(x){x=x.data,h.WORKER_ID===void 0&&x&&(h.WORKER_ID=x.workerId),typeof x.input=="string"?n.postMessage({workerId:h.WORKER_ID,results:h.parse(x.input,x.config),finished:!0}):(n.File&&x.input instanceof File||x.input instanceof Object)&&(x=h.parse(x.input,x.config))&&n.postMessage({workerId:h.WORKER_ID,results:x,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(c.prototype=Object.create(u.prototype)).constructor=c,(d.prototype=Object.create(d.prototype)).constructor=d,(g.prototype=Object.create(u.prototype)).constructor=g,h})})(SE);var m3=SE.exports;const y3=_p(m3);function p3(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),e("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var xa=1,Sa=2,wr=3,v3=4,M0=5,z1=6378137,E3=6356752314e-3,j1=.0066943799901413165,no=484813681109536e-20,j=Math.PI/2,x3=.16666666666666666,S3=.04722222222222222,M3=.022156084656084655,k=1e-10,te=.017453292519943295,ti=57.29577951308232,Ct=Math.PI/4,Co=Math.PI*2,ne=3.14159265359,ai={};ai.greenwich=0;ai.lisbon=-9.131906111111;ai.paris=2.337229166667;ai.bogota=-74.080916666667;ai.madrid=-3.687938888889;ai.rome=12.452333333333;ai.bern=7.439583333333;ai.jakarta=106.807719444444;ai.ferro=-17.666666666667;ai.brussels=4.367975;ai.stockholm=18.058277777778;ai.athens=23.7163375;ai.oslo=10.722916666667;const b3={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var F1=/[\s_\-\/\(\)]/g;function zs(e,t){if(e[t])return e[t];for(var i=Object.keys(e),n=t.toLowerCase().replace(F1,""),s=-1,a,r;++s<i.length;)if(a=i[s],r=a.toLowerCase().replace(F1,""),r===n)return e[a]}function b0(e){var t={},i=e.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,o){var h=o.split("=");return h.push(!0),l[h[0].toLowerCase()]=h[1],l},{}),n,s,a,r={proj:"projName",datum:"datumCode",rf:function(l){t.rf=parseFloat(l)},lat_0:function(l){t.lat0=l*te},lat_1:function(l){t.lat1=l*te},lat_2:function(l){t.lat2=l*te},lat_ts:function(l){t.lat_ts=l*te},lon_0:function(l){t.long0=l*te},lon_1:function(l){t.long1=l*te},lon_2:function(l){t.long2=l*te},alpha:function(l){t.alpha=parseFloat(l)*te},gamma:function(l){t.rectified_grid_angle=parseFloat(l)*te},lonc:function(l){t.longc=l*te},x_0:function(l){t.x0=parseFloat(l)},y_0:function(l){t.y0=parseFloat(l)},k_0:function(l){t.k0=parseFloat(l)},k:function(l){t.k0=parseFloat(l)},a:function(l){t.a=parseFloat(l)},b:function(l){t.b=parseFloat(l)},r:function(l){t.a=t.b=parseFloat(l)},r_a:function(){t.R_A=!0},zone:function(l){t.zone=parseInt(l,10)},south:function(){t.utmSouth=!0},towgs84:function(l){t.datum_params=l.split(",").map(function(o){return parseFloat(o)})},to_meter:function(l){t.to_meter=parseFloat(l)},units:function(l){t.units=l;var o=zs(b3,l);o&&(t.to_meter=o.to_meter)},from_greenwich:function(l){t.from_greenwich=l*te},pm:function(l){var o=zs(ai,l);t.from_greenwich=(o||parseFloat(l))*te},nadgrids:function(l){l==="@null"?t.datumCode="none":t.nadgrids=l},axis:function(l){var o="ewnsud";l.length===3&&o.indexOf(l.substr(0,1))!==-1&&o.indexOf(l.substr(1,1))!==-1&&o.indexOf(l.substr(2,1))!==-1&&(t.axis=l)},approx:function(){t.approx=!0},over:function(){t.over=!0}};for(n in i)s=i[n],n in r?(a=r[n],typeof a=="function"?a(s):t[a]=s):t[n]=s;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t.projStr=e,t}class ME{static getId(t){const i=t.find(n=>Array.isArray(n)&&n[0]==="ID");return i&&i.length>=3?{authority:i[1],code:parseInt(i[2],10)}:null}static convertUnit(t,i="unit"){if(!t||t.length<3)return{type:i,name:"unknown",conversion_factor:null};const n=t[1],s=parseFloat(t[2])||null,a=t.find(l=>Array.isArray(l)&&l[0]==="ID"),r=a?{authority:a[1],code:parseInt(a[2],10)}:null;return{type:i,name:n,conversion_factor:s,id:r}}static convertAxis(t){const i=t[1]||"Unknown";let n;const s=i.match(/^\((.)\)$/);if(s){const h=s[1].toUpperCase();if(h==="E")n="east";else if(h==="N")n="north";else if(h==="U")n="up";else throw new Error(`Unknown axis abbreviation: ${h}`)}else n=t[2]?t[2].toLowerCase():"unknown";const a=t.find(h=>Array.isArray(h)&&h[0]==="ORDER"),r=a?parseInt(a[1],10):null,l=t.find(h=>Array.isArray(h)&&(h[0]==="LENGTHUNIT"||h[0]==="ANGLEUNIT"||h[0]==="SCALEUNIT")),o=this.convertUnit(l);return{name:i,direction:n,unit:o,order:r}}static extractAxes(t){return t.filter(i=>Array.isArray(i)&&i[0]==="AXIS").map(i=>this.convertAxis(i)).sort((i,n)=>(i.order||0)-(n.order||0))}static convert(t,i={}){switch(t[0]){case"PROJCRS":i.type="ProjectedCRS",i.name=t[1],i.base_crs=t.find(c=>Array.isArray(c)&&c[0]==="BASEGEOGCRS")?this.convert(t.find(c=>Array.isArray(c)&&c[0]==="BASEGEOGCRS")):null,i.conversion=t.find(c=>Array.isArray(c)&&c[0]==="CONVERSION")?this.convert(t.find(c=>Array.isArray(c)&&c[0]==="CONVERSION")):null;const n=t.find(c=>Array.isArray(c)&&c[0]==="CS");n&&(i.coordinate_system={type:n[1],axis:this.extractAxes(t)});const s=t.find(c=>Array.isArray(c)&&c[0]==="LENGTHUNIT");if(s){const c=this.convertUnit(s);i.coordinate_system.unit=c}i.id=this.getId(t);break;case"BASEGEOGCRS":case"GEOGCRS":i.type="GeographicCRS",i.name=t[1];const a=t.find(c=>Array.isArray(c)&&(c[0]==="DATUM"||c[0]==="ENSEMBLE"));if(a){const c=this.convert(a);a[0]==="ENSEMBLE"?i.datum_ensemble=c:i.datum=c;const d=t.find(g=>Array.isArray(g)&&g[0]==="PRIMEM");d&&d[1]!=="Greenwich"&&(c.prime_meridian={name:d[1],longitude:parseFloat(d[2])})}i.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(t)},i.id=this.getId(t);break;case"DATUM":i.type="GeodeticReferenceFrame",i.name=t[1],i.ellipsoid=t.find(c=>Array.isArray(c)&&c[0]==="ELLIPSOID")?this.convert(t.find(c=>Array.isArray(c)&&c[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":i.type="DatumEnsemble",i.name=t[1],i.members=t.filter(c=>Array.isArray(c)&&c[0]==="MEMBER").map(c=>({type:"DatumEnsembleMember",name:c[1],id:this.getId(c)}));const r=t.find(c=>Array.isArray(c)&&c[0]==="ENSEMBLEACCURACY");r&&(i.accuracy=parseFloat(r[1]));const l=t.find(c=>Array.isArray(c)&&c[0]==="ELLIPSOID");l&&(i.ellipsoid=this.convert(l)),i.id=this.getId(t);break;case"ELLIPSOID":i.type="Ellipsoid",i.name=t[1],i.semi_major_axis=parseFloat(t[2]),i.inverse_flattening=parseFloat(t[3]),t.find(c=>Array.isArray(c)&&c[0]==="LENGTHUNIT")&&this.convert(t.find(c=>Array.isArray(c)&&c[0]==="LENGTHUNIT"),i);break;case"CONVERSION":i.type="Conversion",i.name=t[1],i.method=t.find(c=>Array.isArray(c)&&c[0]==="METHOD")?this.convert(t.find(c=>Array.isArray(c)&&c[0]==="METHOD")):null,i.parameters=t.filter(c=>Array.isArray(c)&&c[0]==="PARAMETER").map(c=>this.convert(c));break;case"METHOD":i.type="Method",i.name=t[1],i.id=this.getId(t);break;case"PARAMETER":i.type="Parameter",i.name=t[1],i.value=parseFloat(t[2]),i.unit=this.convertUnit(t.find(c=>Array.isArray(c)&&(c[0]==="LENGTHUNIT"||c[0]==="ANGLEUNIT"||c[0]==="SCALEUNIT"))),i.id=this.getId(t);break;case"BOUNDCRS":i.type="BoundCRS";const o=t.find(c=>Array.isArray(c)&&c[0]==="SOURCECRS");if(o){const c=o.find(d=>Array.isArray(d));i.source_crs=c?this.convert(c):null}const h=t.find(c=>Array.isArray(c)&&c[0]==="TARGETCRS");if(h){const c=h.find(d=>Array.isArray(d));i.target_crs=c?this.convert(c):null}const u=t.find(c=>Array.isArray(c)&&c[0]==="ABRIDGEDTRANSFORMATION");u?i.transformation=this.convert(u):i.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(i.type="Transformation",i.name=t[1],i.method=t.find(c=>Array.isArray(c)&&c[0]==="METHOD")?this.convert(t.find(c=>Array.isArray(c)&&c[0]==="METHOD")):null,i.parameters=t.filter(c=>Array.isArray(c)&&(c[0]==="PARAMETER"||c[0]==="PARAMETERFILE")).map(c=>{if(c[0]==="PARAMETER")return this.convert(c);if(c[0]==="PARAMETERFILE")return{name:c[1],value:c[2],id:{authority:"EPSG",code:8656}}}),i.parameters.length===7){const c=i.parameters[6];c.name==="Scale difference"&&(c.value=Math.round((c.value-1)*1e12)/1e6)}i.id=this.getId(t);break;case"AXIS":i.coordinate_system||(i.coordinate_system={type:"unspecified",axis:[]}),i.coordinate_system.axis.push(this.convertAxis(t));break;case"LENGTHUNIT":const f=this.convertUnit(t,"LinearUnit");i.coordinate_system&&i.coordinate_system.axis&&i.coordinate_system.axis.forEach(c=>{c.unit||(c.unit=f)}),f.conversion_factor&&f.conversion_factor!==1&&i.semi_major_axis&&(i.semi_major_axis={value:i.semi_major_axis,unit:f});break;default:i.keyword=t[0];break}return i}}class w3 extends ME{static convert(t,i={}){return super.convert(t,i),i.coordinate_system&&i.coordinate_system.subtype==="Cartesian"&&delete i.coordinate_system,i.usage&&delete i.usage,i}}class C3 extends ME{static convert(t,i={}){super.convert(t,i);const n=t.find(a=>Array.isArray(a)&&a[0]==="CS");n&&(i.coordinate_system={subtype:n[1],axis:this.extractAxes(t)});const s=t.find(a=>Array.isArray(a)&&a[0]==="USAGE");if(s){const a=s.find(o=>Array.isArray(o)&&o[0]==="SCOPE"),r=s.find(o=>Array.isArray(o)&&o[0]==="AREA"),l=s.find(o=>Array.isArray(o)&&o[0]==="BBOX");i.usage={},a&&(i.usage.scope=a[1]),r&&(i.usage.area=r[1]),l&&(i.usage.bbox=l.slice(1))}return i}}function T3(e){return e.find(t=>Array.isArray(t)&&t[0]==="USAGE")?"2019":(e.find(t=>Array.isArray(t)&&t[0]==="CS")||e[0]==="BOUNDCRS"||e[0]==="PROJCRS"||e[0]==="GEOGCRS","2015")}function R3(e){return(T3(e)==="2019"?C3:w3).convert(e)}function A3(e){const t=e.toUpperCase();return t.includes("PROJCRS")||t.includes("GEOGCRS")||t.includes("BOUNDCRS")||t.includes("VERTCRS")||t.includes("LENGTHUNIT")||t.includes("ANGLEUNIT")||t.includes("SCALEUNIT")?"WKT2":(t.includes("PROJCS")||t.includes("GEOGCS")||t.includes("LOCAL_CS")||t.includes("VERT_CS")||t.includes("UNIT"),"WKT1")}var To=1,bE=2,wE=3,qu=4,CE=5,Jg=-1,O3=/\s/,L3=/[A-Za-z]/,N3=/[A-Za-z84_]/,Ic=/[,\]]/,TE=/[\d\.E\-\+]/;function Hn(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=To}Hn.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==qu)for(;O3.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case To:return this.neutral(e);case bE:return this.keyword(e);case qu:return this.quoted(e);case CE:return this.afterquote(e);case wE:return this.number(e);case Jg:return}};Hn.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=qu;return}if(Ic.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Hn.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=To;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=To,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Jg);return}};Hn.prototype.number=function(e){if(TE.test(e)){this.word+=e;return}if(Ic.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Hn.prototype.quoted=function(e){if(e==='"'){this.state=CE;return}this.word+=e};Hn.prototype.keyword=function(e){if(N3.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=To;return}if(Ic.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Hn.prototype.neutral=function(e){if(L3.test(e)){this.word=e,this.state=bE;return}if(e==='"'){this.word="",this.state=qu;return}if(TE.test(e)){this.word=e,this.state=wE;return}if(Ic.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Hn.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Jg)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function G3(e){var t=new Hn(e);return t.output()}function Vf(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var n=t?{}:e,s=i.reduce(function(a,r){return fr(r,a),a},n);t&&(e[t]=s)}function fr(e,t){if(!Array.isArray(e)){t[e]=!0;return}var i=e.shift();if(i==="PARAMETER"&&(i=e.shift()),e.length===1){if(Array.isArray(e[0])){t[i]={},fr(e[0],t[i]);return}t[i]=e[0];return}if(!e.length){t[i]=!0;return}if(i==="TOWGS84"){t[i]=e;return}if(i==="AXIS"){i in t||(t[i]=[]),t[i].push(e);return}Array.isArray(i)||(t[i]={});var n;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[i]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&fr(e[2],t[i]);return;case"SPHEROID":case"ELLIPSOID":t[i]={name:e[0],a:e[1],rf:e[2]},e.length===4&&fr(e[3],t[i]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],Vf(t,i,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],Vf(t,i,e),t[i].type=i;return;default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return fr(e,t[i]);return Vf(t,i,e)}}var D3=.017453292519943295;function qi(e){return e*D3}function RE(e){const t=(e.projName||"").toLowerCase().replace(/_/g," ");!e.long0&&e.longc&&(t==="albers conic equal area"||t==="lambert azimuthal equal area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(t==="stereographic south pole"||t==="polar stereographic (variant b)")?(e.lat0=qi(e.lat1>0?90:-90),e.lat_ts=e.lat1,delete e.lat1):!e.lat_ts&&e.lat0&&(t==="polar stereographic"||t==="polar stereographic (variant a)")&&(e.lat_ts=e.lat0,e.lat0=qi(e.lat0>0?90:-90),delete e.lat1)}function U1(e){let t={units:null,to_meter:void 0};return typeof e=="string"?(t.units=e.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.units==="meter"&&(t.to_meter=1)):e&&e.name&&(t.units=e.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.to_meter=e.conversion_factor),t}function k1(e){return typeof e=="object"?e.value*e.unit.conversion_factor:e}function B1(e,t){e.ellipsoid.radius?(t.a=e.ellipsoid.radius,t.rf=0):(t.a=k1(e.ellipsoid.semi_major_axis),e.ellipsoid.inverse_flattening!==void 0?t.rf=e.ellipsoid.inverse_flattening:e.ellipsoid.semi_major_axis!==void 0&&e.ellipsoid.semi_minor_axis!==void 0&&(t.rf=t.a/(t.a-k1(e.ellipsoid.semi_minor_axis))))}function Hu(e,t={}){return!e||typeof e!="object"?e:e.type==="BoundCRS"?(Hu(e.source_crs,t),e.transformation&&(e.transformation.method&&e.transformation.method.name==="NTv2"?t.nadgrids=e.transformation.parameters[0].value:t.datum_params=e.transformation.parameters.map(i=>i.value)),t):(Object.keys(e).forEach(i=>{const n=e[i];if(n!==null)switch(i){case"name":if(t.srsCode)break;t.name=n,t.srsCode=n;break;case"type":n==="GeographicCRS"?t.projName="longlat":n==="ProjectedCRS"&&e.conversion&&e.conversion.method&&(t.projName=e.conversion.method.name);break;case"datum":case"datum_ensemble":n.ellipsoid&&(t.ellps=n.ellipsoid.name,B1(n,t)),n.prime_meridian&&(t.from_greenwich=n.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":t.ellps=n.name,B1(n,t);break;case"prime_meridian":t.long0=(n.longitude||0)*Math.PI/180;break;case"coordinate_system":if(n.axis){if(t.axis=n.axis.map(s=>{const a=s.direction;if(a==="east")return"e";if(a==="north")return"n";if(a==="west")return"w";if(a==="south")return"s";throw new Error(`Unknown axis direction: ${a}`)}).join("")+"u",n.unit){const{units:s,to_meter:a}=U1(n.unit);t.units=s,t.to_meter=a}else if(n.axis[0]&&n.axis[0].unit){const{units:s,to_meter:a}=U1(n.axis[0].unit);t.units=s,t.to_meter=a}}break;case"id":n.authority&&n.code&&(t.title=n.authority+":"+n.code);break;case"conversion":n.method&&n.method.name&&(t.projName=n.method.name),n.parameters&&n.parameters.forEach(s=>{const a=s.name.toLowerCase().replace(/\s+/g,"_"),r=s.value;s.unit&&s.unit.conversion_factor?t[a]=r*s.unit.conversion_factor:s.unit==="degree"?t[a]=r*Math.PI/180:t[a]=r});break;case"unit":n.name&&(t.units=n.name.toLowerCase(),t.units==="metre"&&(t.units="meter")),n.conversion_factor&&(t.to_meter=n.conversion_factor);break;case"base_crs":Hu(n,t),t.datumCode=n.id?n.id.authority+"_"+n.id.code:n.name;break}}),t.latitude_of_false_origin!==void 0&&(t.lat0=t.latitude_of_false_origin),t.longitude_of_false_origin!==void 0&&(t.long0=t.longitude_of_false_origin),t.latitude_of_standard_parallel!==void 0&&(t.lat0=t.latitude_of_standard_parallel,t.lat1=t.latitude_of_standard_parallel),t.latitude_of_1st_standard_parallel!==void 0&&(t.lat1=t.latitude_of_1st_standard_parallel),t.latitude_of_2nd_standard_parallel!==void 0&&(t.lat2=t.latitude_of_2nd_standard_parallel),t.latitude_of_projection_centre!==void 0&&(t.lat0=t.latitude_of_projection_centre),t.longitude_of_projection_centre!==void 0&&(t.longc=t.longitude_of_projection_centre),t.easting_at_false_origin!==void 0&&(t.x0=t.easting_at_false_origin),t.northing_at_false_origin!==void 0&&(t.y0=t.northing_at_false_origin),t.latitude_of_natural_origin!==void 0&&(t.lat0=t.latitude_of_natural_origin),t.longitude_of_natural_origin!==void 0&&(t.long0=t.longitude_of_natural_origin),t.longitude_of_origin!==void 0&&(t.long0=t.longitude_of_origin),t.false_easting!==void 0&&(t.x0=t.false_easting),t.easting_at_projection_centre&&(t.x0=t.easting_at_projection_centre),t.false_northing!==void 0&&(t.y0=t.false_northing),t.northing_at_projection_centre&&(t.y0=t.northing_at_projection_centre),t.standard_parallel_1!==void 0&&(t.lat1=t.standard_parallel_1),t.standard_parallel_2!==void 0&&(t.lat2=t.standard_parallel_2),t.scale_factor_at_natural_origin!==void 0&&(t.k0=t.scale_factor_at_natural_origin),t.scale_factor_at_projection_centre!==void 0&&(t.k0=t.scale_factor_at_projection_centre),t.scale_factor_on_pseudo_standard_parallel!==void 0&&(t.k0=t.scale_factor_on_pseudo_standard_parallel),t.azimuth!==void 0&&(t.alpha=t.azimuth),t.azimuth_at_projection_centre!==void 0&&(t.alpha=t.azimuth_at_projection_centre),t.angle_from_rectified_to_skew_grid&&(t.rectified_grid_angle=t.angle_from_rectified_to_skew_grid),RE(t),t)}var I3=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function P3(e,t){var i=t[0],n=t[1];!(i in e)&&n in e&&(e[i]=e[n],t.length===3&&(e[i]=t[2](e[i])))}function AE(e){for(var t=Object.keys(e),i=0,n=t.length;i<n;++i){var s=t[i];I3.indexOf(s)!==-1&&z3(e[s]),typeof e[s]=="object"&&AE(e[s])}}function z3(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var i="",n=0,s=e.AXIS.length;n<s;++n){var a=[e.AXIS[n][0].toLowerCase(),e.AXIS[n][1].toLowerCase()];a[0].indexOf("north")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="north"?i+="n":a[0].indexOf("south")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="south"?i+="s":a[0].indexOf("east")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="east"?i+="e":(a[0].indexOf("west")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="west")&&(i+="w")}i.length===2&&(i+="u"),i.length===3&&(e.axis=i)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var r=e.GEOGCS;e.type==="GEOGCS"&&(r=e),r&&(r.DATUM?e.datumCode=r.DATUM.name.toLowerCase():e.datumCode=r.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),e.datumCode==="new_zealand_1949"&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode==="belge_1972"&&(e.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(e.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=r.DATUM.SPHEROID.a,e.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(e.datum_params=r.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),e.rectified_grid_angle&&(e.rectified_grid_angle=qi(e.rectified_grid_angle));function l(u){var f=e.to_meter||1;return u*f}var o=function(u){return P3(e,u)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",qi],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",qi],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",qi],["lat0","latitude_of_origin",qi],["lat0","standard_parallel_1",qi],["lat1","standard_parallel_1",qi],["lat2","standard_parallel_2",qi],["azimuth","Azimuth"],["alpha","azimuth",qi],["srsCode","name"]];h.forEach(o),RE(e)}function Zu(e){if(typeof e=="object")return Hu(e);const t=A3(e);var i=G3(e);if(t==="WKT2"){const a=R3(i);return Hu(a)}var n=i[0],s={};return fr(i,s),AE(s),s[n]}function we(e){var t=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?we[e]=b0(arguments[1]):we[e]=Zu(arguments[1]):i&&typeof i=="object"&&!("projName"in i)?we[e]=Zu(arguments[1]):(we[e]=i,i||delete we[e])}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(n){return Array.isArray(n)?we.apply(t,n):we(n)});if(typeof e=="string"){if(e in we)return we[e]}else"EPSG"in e?we["EPSG:"+e.EPSG]=e:"ESRI"in e?we["ESRI:"+e.ESRI]=e:"IAU2000"in e?we["IAU2000:"+e.IAU2000]=e:console.log(e);return}}p3(we);function j3(e){return typeof e=="string"}function F3(e){return e in we}function U3(e){return e.indexOf("+")!==0&&e.indexOf("[")!==-1||typeof e=="object"&&!("srsCode"in e)}var k3=["3857","900913","3785","102113"];function B3(e){var t=zs(e,"authority");if(t){var i=zs(t,"epsg");return i&&k3.indexOf(i)>-1}}function X3(e){var t=zs(e,"extension");if(t)return zs(t,"proj4")}function Y3(e){return e[0]==="+"}function q3(e){if(j3(e)){if(F3(e))return we[e];if(U3(e)){var t=Zu(e);if(B3(t))return we["EPSG:3857"];var i=X3(t);return i?b0(i):t}if(Y3(e))return b0(e)}else return"projName"in e?e:Zu(e)}function X1(e,t){e=e||{};var i,n;if(!t)return e;for(n in t)i=t[n],i!==void 0&&(e[n]=i);return e}function un(e,t,i){var n=e*t;return i/Math.sqrt(1-n*n)}function ih(e){return e<0?-1:1}function X(e,t){return t||Math.abs(e)<=ne?e:e-ih(e)*Co}function Ki(e,t,i){var n=e*i,s=.5*e;return n=Math.pow((1-n)/(1+n),s),Math.tan(.5*(j-t))/n}function Ro(e,t){for(var i=.5*e,n,s,a=j-2*Math.atan(t),r=0;r<=15;r++)if(n=e*Math.sin(a),s=j-2*Math.atan(t*Math.pow((1-n)/(1+n),i))-a,a+=s,Math.abs(s)<=1e-10)return a;return-9999}function H3(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=un(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Z3(e){var t=e.x,i=e.y;if(i*ti>90&&i*ti<-90&&t*ti>180&&t*ti<-180)return null;var n,s;if(Math.abs(Math.abs(i)-j)<=k)return null;if(this.sphere)n=this.x0+this.a*this.k0*X(t-this.long0,this.over),s=this.y0+this.a*this.k0*Math.log(Math.tan(Ct+.5*i));else{var a=Math.sin(i),r=Ki(this.e,i,a);n=this.x0+this.a*this.k0*X(t-this.long0,this.over),s=this.y0-this.a*this.k0*Math.log(r)}return e.x=n,e.y=s,e}function V3(e){var t=e.x-this.x0,i=e.y-this.y0,n,s;if(this.sphere)s=j-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var a=Math.exp(-i/(this.a*this.k0));if(s=Ro(this.e,a),s===-9999)return null}return n=X(this.long0+t/(this.a*this.k0),this.over),e.x=n,e.y=s,e}var K3=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const W3={init:H3,forward:Z3,inverse:V3,names:K3};function Q3(){}function Y1(e){return e}var OE=["longlat","identity"];const J3={init:Q3,forward:Y1,inverse:Y1,names:OE};var $3=[W3,J3],ea={},dr=[];function LE(e,t){var i=dr.length;return e.names?(dr[i]=e,e.names.forEach(function(n){ea[n.toLowerCase()]=i}),this):(console.log(t),!0)}function NE(e){return e.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function tw(e){if(!e)return!1;var t=e.toLowerCase();if(typeof ea[t]<"u"&&dr[ea[t]]||(t=NE(t),t in ea&&dr[ea[t]]))return dr[ea[t]]}function ew(){$3.forEach(LE)}const iw={start:ew,add:LE,get:tw};var GE={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const nw=GE.WGS84;function sw(e,t,i,n){var s=e*e,a=t*t,r=(s-a)/s,l=0;n?(e*=1-r*(x3+r*(S3+r*M3)),s=e*e,r=0):l=Math.sqrt(r);var o=(s-a)/a;return{es:r,e:l,ep2:o}}function aw(e,t,i,n,s){if(!e){var a=zs(GE,n);a||(a=nw),e=a.a,t=a.b,i=a.rf}return i&&!t&&(t=(1-1/i)*e),(i===0||Math.abs(e-t)<k)&&(s=!0,t=e),{a:e,b:t,rf:i,sphere:s}}var uu={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var rw in uu){var Kf=uu[rw];Kf.datumName&&(uu[Kf.datumName]=Kf)}function lw(e,t,i,n,s,a,r){var l={};return e===void 0||e==="none"?l.datum_type=M0:l.datum_type=v3,t&&(l.datum_params=t.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=xa),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=Sa,l.datum_params[3]*=no,l.datum_params[4]*=no,l.datum_params[5]*=no,l.datum_params[6]=l.datum_params[6]/1e6+1)),r&&(l.datum_type=wr,l.grids=r),l.a=i,l.b=n,l.es=s,l.ep2=a,l}var $g={};function ow(e,t,i){return t instanceof ArrayBuffer?hw(e,t,i):{ready:uw(e,t)}}function hw(e,t,i){var n=!0;i!==void 0&&i.includeErrorFields===!1&&(n=!1);var s=new DataView(t),a=dw(s),r=gw(s,a),l=_w(s,r,a,n),o={header:r,subgrids:l};return $g[e]=o,o}async function uw(e,t){for(var i=[],n=await t.getImageCount(),s=n-1;s>=0;s--){var a=await t.getImage(s),r=await a.readRasters(),l=r,o=[a.getWidth(),a.getHeight()],h=a.getBoundingBox().map(q1),u=[a.fileDirectory.ModelPixelScale[0],a.fileDirectory.ModelPixelScale[1]].map(q1),f=h[0]+(o[0]-1)*u[0],c=h[3]-(o[1]-1)*u[1],d=l[0],g=l[1],y=[];for(let m=o[1]-1;m>=0;m--)for(let p=o[0]-1;p>=0;p--){var v=m*o[0]+p;y.push([-ms(g[v]),ms(d[v])])}i.push({del:u,lim:o,ll:[-f,c],cvs:y})}var _={header:{nSubgrids:n},subgrids:i};return $g[e]=_,_}function cw(e){if(e===void 0)return null;var t=e.split(",");return t.map(fw)}function fw(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:$g[e]||null,isNull:!1}}function q1(e){return e*Math.PI/180}function ms(e){return e/3600*Math.PI/180}function dw(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function gw(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:w0(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function w0(e,t,i){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,i)))}function _w(e,t,i,n){for(var s=176,a=[],r=0;r<t.nSubgrids;r++){var l=yw(e,s,i),o=pw(e,s,l,i,n),h=Math.round(1+(l.upperLongitude-l.lowerLongitude)/l.longitudeInterval),u=Math.round(1+(l.upperLatitude-l.lowerLatitude)/l.latitudeInterval);a.push({ll:[ms(l.lowerLongitude),ms(l.lowerLatitude)],del:[ms(l.longitudeInterval),ms(l.latitudeInterval)],lim:[h,u],count:l.gridNodeCount,cvs:mw(o)});var f=16;n===!1&&(f=8),s+=176+l.gridNodeCount*f}return a}function mw(e){return e.map(function(t){return[ms(t.longitudeShift),ms(t.latitudeShift)]})}function yw(e,t,i){return{name:w0(e,t+8,t+16).trim(),parent:w0(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,i),upperLatitude:e.getFloat64(t+88,i),lowerLongitude:e.getFloat64(t+104,i),upperLongitude:e.getFloat64(t+120,i),latitudeInterval:e.getFloat64(t+136,i),longitudeInterval:e.getFloat64(t+152,i),gridNodeCount:e.getInt32(t+168,i)}}function pw(e,t,i,n,s){var a=t+176,r=16;s===!1&&(r=8);for(var l=[],o=0;o<i.gridNodeCount;o++){var h={latitudeShift:e.getFloat32(a+o*r,n),longitudeShift:e.getFloat32(a+o*r+4,n)};s!==!1&&(h.latitudeAccuracy=e.getFloat32(a+o*r+8,n),h.longitudeAccuracy=e.getFloat32(a+o*r+12,n)),l.push(h)}return l}function ji(e,t){if(!(this instanceof ji))return new ji(e);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,t=t||function(h){if(h)throw h};var i=q3(e);if(typeof i!="object"){t("Could not parse to valid json: "+e);return}var n=ji.projections.get(i.projName);if(!n){t("Could not get projection name from: "+e);return}if(i.datumCode&&i.datumCode!=="none"){var s=zs(uu,i.datumCode);s&&(i.datum_params=i.datum_params||(s.towgs84?s.towgs84.split(","):null),i.ellps=s.ellipse,i.datumName=s.datumName?s.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var a=aw(i.a,i.b,i.rf,i.ellps,i.sphere),r=sw(a.a,a.b,a.rf,i.R_A),l=cw(i.nadgrids),o=i.datum||lw(i.datumCode,i.datum_params,a.a,a.b,r.es,r.ep2,l);X1(this,i),X1(this,n),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=o,"init"in this&&typeof this.init=="function"&&this.init(),t(null,this)}ji.projections=iw;ji.projections.start();function vw(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===xa?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===Sa?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function DE(e,t,i){var n=e.x,s=e.y,a=e.z?e.z:0,r,l,o,h;if(s<-j&&s>-1.001*j)s=-j;else if(s>j&&s<1.001*j)s=j;else{if(s<-j)return{x:-1/0,y:-1/0,z:e.z};if(s>j)return{x:1/0,y:1/0,z:e.z}}return n>Math.PI&&(n-=2*Math.PI),l=Math.sin(s),h=Math.cos(s),o=l*l,r=i/Math.sqrt(1-t*o),{x:(r+a)*h*Math.cos(n),y:(r+a)*h*Math.sin(n),z:(r*(1-t)+a)*l}}function IE(e,t,i,n){var s=1e-12,a=s*s,r=30,l,o,h,u,f,c,d,g,y,v,_,m,p,E=e.x,M=e.y,T=e.z?e.z:0,b,x,S;if(l=Math.sqrt(E*E+M*M),o=Math.sqrt(E*E+M*M+T*T),l/i<s){if(b=0,o/i<s)return x=j,S=-n,{x:e.x,y:e.y,z:e.z}}else b=Math.atan2(M,E);h=T/o,u=l/o,f=1/Math.sqrt(1-t*(2-t)*u*u),g=u*(1-t)*f,y=h*f,p=0;do p++,d=i/Math.sqrt(1-t*y*y),S=l*g+T*y-d*(1-t*y*y),c=t*d/(d+S),f=1/Math.sqrt(1-c*(2-c)*u*u),v=u*(1-c)*f,_=h*f,m=_*g-v*y,g=v,y=_;while(m*m>a&&p<r);return x=Math.atan(_/Math.abs(v)),{x:b,y:x,z:S}}function Ew(e,t,i){if(t===xa)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(t===Sa){var n=i[0],s=i[1],a=i[2],r=i[3],l=i[4],o=i[5],h=i[6];return{x:h*(e.x-o*e.y+l*e.z)+n,y:h*(o*e.x+e.y-r*e.z)+s,z:h*(-l*e.x+r*e.y+e.z)+a}}}function xw(e,t,i){if(t===xa)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(t===Sa){var n=i[0],s=i[1],a=i[2],r=i[3],l=i[4],o=i[5],h=i[6],u=(e.x-n)/h,f=(e.y-s)/h,c=(e.z-a)/h;return{x:u+o*f-l*c,y:-o*u+f+r*c,z:l*u-r*f+c}}}function Gh(e){return e===xa||e===Sa}function Sw(e,t,i){if(vw(e,t)||e.datum_type===M0||t.datum_type===M0)return i;var n=e.a,s=e.es;if(e.datum_type===wr){var a=H1(e,!1,i);if(a!==0)return;n=z1,s=j1}var r=t.a,l=t.b,o=t.es;if(t.datum_type===wr&&(r=z1,l=E3,o=j1),s===o&&n===r&&!Gh(e.datum_type)&&!Gh(t.datum_type))return i;if(i=DE(i,s,n),Gh(e.datum_type)&&(i=Ew(i,e.datum_type,e.datum_params)),Gh(t.datum_type)&&(i=xw(i,t.datum_type,t.datum_params)),i=IE(i,o,r,l),t.datum_type===wr){var h=H1(t,!0,i);if(h!==0)return}return i}function H1(e,t,i){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-i.x,y:i.y},s={x:Number.NaN,y:Number.NaN},a=[];t:for(var r=0;r<e.grids.length;r++){var l=e.grids[r];if(a.push(l.name),l.isNull){s=n;break}if(l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}for(var o=l.grid.subgrids,h=0,u=o.length;h<u;h++){var f=o[h],c=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,d=f.ll[0]-c,g=f.ll[1]-c,y=f.ll[0]+(f.lim[0]-1)*f.del[0]+c,v=f.ll[1]+(f.lim[1]-1)*f.del[1]+c;if(!(g>n.y||d>n.x||v<n.y||y<n.x)&&(s=Mw(n,t,f),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*ti+" "+n.y*ti+" tried: '"+a+"'"),-1):(i.x=-s.x,i.y=s.y,0)}function Mw(e,t,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var s={x:e.x,y:e.y};s.x-=i.ll[0],s.y-=i.ll[1],s.x=X(s.x-Math.PI)+Math.PI;var a=Z1(s,i);if(t){if(isNaN(a.x))return n;a.x=s.x-a.x,a.y=s.y-a.y;var r=9,l=1e-12,o,h;do{if(h=Z1(a,i),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:s.x-(h.x+a.x),y:s.y-(h.y+a.y)},a.x+=o.x,a.y+=o.y}while(r--&&Math.abs(o.x)>l&&Math.abs(o.y)>l);if(r<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=X(a.x+i.ll[0]),n.y=a.y+i.ll[1]}else isNaN(a.x)||(n.x=e.x+a.x,n.y=e.y+a.y);return n}function Z1(e,t){var i={x:e.x/t.del[0],y:e.y/t.del[1]},n={x:Math.floor(i.x),y:Math.floor(i.y)},s={x:i.x-1*n.x,y:i.y-1*n.y},a={x:Number.NaN,y:Number.NaN},r;if(n.x<0||n.x>=t.lim[0]||n.y<0||n.y>=t.lim[1])return a;r=n.y*t.lim[0]+n.x;var l={x:t.cvs[r][0],y:t.cvs[r][1]};r++;var o={x:t.cvs[r][0],y:t.cvs[r][1]};r+=t.lim[0];var h={x:t.cvs[r][0],y:t.cvs[r][1]};r--;var u={x:t.cvs[r][0],y:t.cvs[r][1]},f=s.x*s.y,c=s.x*(1-s.y),d=(1-s.x)*(1-s.y),g=(1-s.x)*s.y;return a.x=d*l.x+c*o.x+g*u.x+f*h.x,a.y=d*l.y+c*o.y+g*u.y+f*h.y,a}function V1(e,t,i){var n=i.x,s=i.y,a=i.z||0,r,l,o,h={};for(o=0;o<3;o++)if(!(t&&o===2&&i.z===void 0))switch(o===0?(r=n,"ew".indexOf(e.axis[o])!==-1?l="x":l="y"):o===1?(r=s,"ns".indexOf(e.axis[o])!==-1?l="y":l="x"):(r=a,l="z"),e.axis[o]){case"e":h[l]=r;break;case"w":h[l]=-r;break;case"n":h[l]=r;break;case"s":h[l]=-r;break;case"u":i[l]!==void 0&&(h.z=r);break;case"d":i[l]!==void 0&&(h.z=-r);break;default:return null}return h}function PE(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function bw(e){K1(e.x),K1(e.y)}function K1(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function ww(e,t){return(e.datum.datum_type===xa||e.datum.datum_type===Sa||e.datum.datum_type===wr)&&t.datumCode!=="WGS84"||(t.datum.datum_type===xa||t.datum.datum_type===Sa||t.datum.datum_type===wr)&&e.datumCode!=="WGS84"}function Vu(e,t,i,n){var s;Array.isArray(i)?i=PE(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var a=i.z!==void 0;if(bw(i),e.datum&&t.datum&&ww(e,t)&&(s=new ji("WGS84"),i=Vu(e,s,i,n),e=s),n&&e.axis!=="enu"&&(i=V1(e,!1,i)),e.projName==="longlat")i={x:i.x*te,y:i.y*te,z:i.z||0};else if(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter,z:i.z||0}),i=e.inverse(i),!i)return;if(e.from_greenwich&&(i.x+=e.from_greenwich),i=Sw(e.datum,t.datum,i),!!i)return i=i,t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y,z:i.z||0}),t.projName==="longlat"?i={x:i.x*ti,y:i.y*ti,z:i.z||0}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter,z:i.z||0})),n&&t.axis!=="enu"?V1(t,!0,i):(i&&!a&&delete i.z,i)}var W1=ji("WGS84");function Wf(e,t,i,n){var s,a,r;return Array.isArray(i)?(s=Vu(e,t,i,n)||{x:NaN,y:NaN},i.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(i.slice(3)):[s.x,s.y,i[2]].concat(i.slice(3)):[s.x,s.y].concat(i.slice(2)):[s.x,s.y]):(a=Vu(e,t,i,n),r=Object.keys(i),r.length===2||r.forEach(function(l){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;a[l]=i[l]}),a)}function Dh(e){return e instanceof ji?e:typeof e=="object"&&"oProj"in e?e.oProj:ji(e)}function Cw(e,t,i){var n,s,a=!1,r;return typeof t>"u"?(s=Dh(e),n=W1,a=!0):(typeof t.x<"u"||Array.isArray(t))&&(i=t,s=Dh(e),n=W1,a=!0),n||(n=Dh(e)),s||(s=Dh(t)),i?Wf(n,s,i):(r={forward:function(l,o){return Wf(n,s,l,o)},inverse:function(l,o){return Wf(s,n,l,o)}},a&&(r.oProj=s),r)}var Q1=6,zE="AJSAJS",jE="AFAFAF",gr=65,qe=73,wi=79,Gl=86,Dl=90;const Tw={forward:FE,inverse:Rw,toPoint:UE};function FE(e,t){return t=t||5,Lw(Aw({lat:e[1],lon:e[0]}),t)}function Rw(e){var t=t_(BE(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function UE(e){var t=t_(BE(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Qf(e){return e*(Math.PI/180)}function J1(e){return 180*(e/Math.PI)}function Aw(e){var t=e.lat,i=e.lon,n=6378137,s=.00669438,a=.9996,r,l,o,h,u,f,c,d=Qf(t),g=Qf(i),y,v;v=Math.floor((i+180)/6)+1,i===180&&(v=60),t>=56&&t<64&&i>=3&&i<12&&(v=32),t>=72&&t<84&&(i>=0&&i<9?v=31:i>=9&&i<21?v=33:i>=21&&i<33?v=35:i>=33&&i<42&&(v=37)),r=(v-1)*6-180+3,y=Qf(r),l=s/(1-s),o=n/Math.sqrt(1-s*Math.sin(d)*Math.sin(d)),h=Math.tan(d)*Math.tan(d),u=l*Math.cos(d)*Math.cos(d),f=Math.cos(d)*(g-y),c=n*((1-s/4-3*s*s/64-5*s*s*s/256)*d-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*d)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*d)-35*s*s*s/3072*Math.sin(6*d));var _=a*o*(f+(1-h+u)*f*f*f/6+(5-18*h+h*h+72*u-58*l)*f*f*f*f*f/120)+5e5,m=a*(c+o*Math.tan(d)*(f*f/2+(5-h+9*u+4*u*u)*f*f*f*f/24+(61-58*h+h*h+600*u-330*l)*f*f*f*f*f*f/720));return t<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(_),zoneNumber:v,zoneLetter:Ow(t)}}function t_(e){var t=e.northing,i=e.easting,n=e.zoneLetter,s=e.zoneNumber;if(s<0||s>60)return null;var a=.9996,r=6378137,l=.00669438,o,h=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),u,f,c,d,g,y,v,_,m,p=i-5e5,E=t;n<"N"&&(E-=1e7),v=(s-1)*6-180+3,o=l/(1-l),y=E/a,_=y/(r*(1-l/4-3*l*l/64-5*l*l*l/256)),m=_+(3*h/2-27*h*h*h/32)*Math.sin(2*_)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*_)+151*h*h*h/96*Math.sin(6*_),u=r/Math.sqrt(1-l*Math.sin(m)*Math.sin(m)),f=Math.tan(m)*Math.tan(m),c=o*Math.cos(m)*Math.cos(m),d=r*(1-l)/Math.pow(1-l*Math.sin(m)*Math.sin(m),1.5),g=p/(u*a);var M=m-u*Math.tan(m)/d*(g*g/2-(5+3*f+10*c-4*c*c-9*o)*g*g*g*g/24+(61+90*f+298*c+45*f*f-252*o-3*c*c)*g*g*g*g*g*g/720);M=J1(M);var T=(g-(1+2*f+c)*g*g*g/6+(5-2*c+28*f-3*c*c+8*o+24*f*f)*g*g*g*g*g/120)/Math.cos(m);T=v+J1(T);var b;if(e.accuracy){var x=t_({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});b={top:x.lat,right:x.lon,bottom:M,left:T}}else b={lat:M,lon:T};return b}function Ow(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function Lw(e,t){var i="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+Nw(e.easting,e.northing,e.zoneNumber)+i.substr(i.length-5,t)+n.substr(n.length-5,t)}function Nw(e,t,i){var n=kE(i),s=Math.floor(e/1e5),a=Math.floor(t/1e5)%20;return Gw(s,a,n)}function kE(e){var t=e%Q1;return t===0&&(t=Q1),t}function Gw(e,t,i){var n=i-1,s=zE.charCodeAt(n),a=jE.charCodeAt(n),r=s+e-1,l=a+t,o=!1;r>Dl&&(r=r-Dl+gr-1,o=!0),(r===qe||s<qe&&r>qe||(r>qe||s<qe)&&o)&&r++,(r===wi||s<wi&&r>wi||(r>wi||s<wi)&&o)&&(r++,r===qe&&r++),r>Dl&&(r=r-Dl+gr-1),l>Gl?(l=l-Gl+gr-1,o=!0):o=!1,(l===qe||a<qe&&l>qe||(l>qe||a<qe)&&o)&&l++,(l===wi||a<wi&&l>wi||(l>wi||a<wi)&&o)&&(l++,l===qe&&l++),l>Gl&&(l=l-Gl+gr-1);var h=String.fromCharCode(r)+String.fromCharCode(l);return h}function BE(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,i=null,n="",s,a=0;!/[A-Z]/.test(s=e.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+e;n+=s,a++}var r=parseInt(n,10);if(a===0||a+3>t)throw"MGRSPoint bad conversion from: "+e;var l=e.charAt(a++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+e;i=e.substring(a,a+=2);for(var o=kE(r),h=Dw(i.charAt(0),o),u=Iw(i.charAt(1),o);u<Pw(l);)u+=2e6;var f=t-a;if(f%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var c=f/2,d=0,g=0,y,v,_,m,p;return c>0&&(y=1e5/Math.pow(10,c),v=e.substring(a,a+c),d=parseFloat(v)*y,_=e.substring(a+c),g=parseFloat(_)*y),m=d+h,p=g+u,{easting:m,northing:p,zoneLetter:l,zoneNumber:r,accuracy:y}}function Dw(e,t){for(var i=zE.charCodeAt(t-1),n=1e5,s=!1;i!==e.charCodeAt(0);){if(i++,i===qe&&i++,i===wi&&i++,i>Dl){if(s)throw"Bad character: "+e;i=gr,s=!0}n+=1e5}return n}function Iw(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var i=jE.charCodeAt(t-1),n=0,s=!1;i!==e.charCodeAt(0);){if(i++,i===qe&&i++,i===wi&&i++,i>Gl){if(s)throw"Bad character: "+e;i=gr,s=!0}n+=1e5}return n}function Pw(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function kr(e,t,i){if(!(this instanceof kr))return new kr(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var n=e.split(",");this.x=parseFloat(n[0]),this.y=parseFloat(n[1]),this.z=parseFloat(n[2])||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}kr.fromMGRS=function(e){return new kr(UE(e))};kr.prototype.toMGRS=function(e){return FE([this.x,this.y],e)};var zw=1,jw=.25,$1=.046875,ty=.01953125,ey=.01068115234375,Fw=.75,Uw=.46875,kw=.013020833333333334,Bw=.007120768229166667,Xw=.3645833333333333,Yw=.005696614583333333,qw=.3076171875;function e_(e){var t=[];t[0]=zw-e*(jw+e*($1+e*(ty+e*ey))),t[1]=e*(Fw-e*($1+e*(ty+e*ey)));var i=e*e;return t[2]=i*(Uw-e*(kw+e*Bw)),i*=e,t[3]=i*(Xw-e*Yw),t[4]=i*e*qw,t}function rl(e,t,i,n){return i*=t,t*=t,n[0]*e-i*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}var Hw=20;function i_(e,t,i){for(var n=1/(1-t),s=e,a=Hw;a;--a){var r=Math.sin(s),l=1-t*r*r;if(l=(rl(s,r,Math.cos(s),i)-e)*(l*Math.sqrt(l))*n,s-=l,Math.abs(l)<k)return s}return s}function Zw(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=e_(this.es),this.ml0=rl(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Vw(e){var t=e.x,i=e.y,n=X(t-this.long0,this.over),s,a,r,l=Math.sin(i),o=Math.cos(i);if(this.es){var u=o*n,f=Math.pow(u,2),c=this.ep2*Math.pow(o,2),d=Math.pow(c,2),g=Math.abs(o)>k?Math.tan(i):0,y=Math.pow(g,2),v=Math.pow(y,2);s=1-this.es*Math.pow(l,2),u=u/Math.sqrt(s);var _=rl(i,l,o,this.en);a=this.a*(this.k0*u*(1+f/6*(1-y+c+f/20*(5-18*y+v+14*c-58*y*c+f/42*(61+179*v-v*y-479*y)))))+this.x0,r=this.a*(this.k0*(_-this.ml0+l*n*u/2*(1+f/12*(5-y+9*c+4*d+f/30*(61+v-58*y+270*c-330*y*c+f/56*(1385+543*v-v*y-3111*y))))))+this.y0}else{var h=o*Math.sin(n);if(Math.abs(Math.abs(h)-1)<k)return 93;if(a=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,r=o*Math.cos(n)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(r),h>=1){if(h-1>k)return 93;r=0}else r=Math.acos(r);i<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return e.x=a,e.y=r,e}function Kw(e){var t,i,n,s,a=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+r/this.k0,i=i_(t,this.es,this.en),Math.abs(i)<j){var f=Math.sin(i),c=Math.cos(i),d=Math.abs(c)>k?Math.tan(i):0,g=this.ep2*Math.pow(c,2),y=Math.pow(g,2),v=Math.pow(d,2),_=Math.pow(v,2);t=1-this.es*Math.pow(f,2);var m=a*Math.sqrt(t)/this.k0,p=Math.pow(m,2);t=t*d,n=i-t*p/(1-this.es)*.5*(1-p/12*(5+3*v-9*g*v+g-4*y-p/30*(61+90*v-252*g*v+45*_+46*g-p/56*(1385+3633*v+4095*_+1574*_*v)))),s=X(this.long0+m*(1-p/6*(1+2*v+g-p/20*(5+28*v+24*_+8*g*v+6*g-p/42*(61+662*v+1320*_+720*_*v))))/c,this.over)}else n=j*ih(r),s=0;else{var l=Math.exp(a/this.k0),o=.5*(l-1/l),h=this.lat0+r/this.k0,u=Math.cos(h);t=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(o,2))),n=Math.asin(t),r<0&&(n=-n),o===0&&u===0?s=0:s=X(Math.atan2(o,u)+this.long0,this.over)}return e.x=s,e.y=n,e}var Ww=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const cu={init:Zw,forward:Vw,inverse:Kw,names:Ww};function XE(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function Qe(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),n=Math.min(e,t)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function Qw(e){var t=1+e,i=t-1;return i===0?e:e*Math.log(t)/i}function Jw(e){var t=Math.abs(e);return t=Qw(t*(1+t/(Qe(1,t)+1))),e<0?-t:t}function n_(e,t){for(var i=2*Math.cos(2*t),n=e.length-1,s=e[n],a=0,r;--n>=0;)r=-a+i*s+e[n],a=s,s=r;return t+r*Math.sin(2*t)}function $w(e,t){for(var i=2*Math.cos(t),n=e.length-1,s=e[n],a=0,r;--n>=0;)r=-a+i*s+e[n],a=s,s=r;return Math.sin(t)*r}function tC(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function YE(e,t,i){for(var n=Math.sin(t),s=Math.cos(t),a=XE(i),r=tC(i),l=2*s*r,o=-2*n*a,h=e.length-1,u=e[h],f=0,c=0,d=0,g,y;--h>=0;)g=c,y=f,c=u,f=d,u=-g+l*c-o*f+e[h],d=-y+o*c+l*f;return l=n*r,o=s*a,[l*u-o*d,l*d+o*u]}function eC(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(cu.init.apply(this),this.forward=cu.forward,this.inverse=cu.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),i=i*t,this.cgb[1]=i*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i=i*t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),i=i*t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(-12/5+t*(-24832/14175))),i=i*t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i=i*t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),i=i*t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i=i*t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i=i*t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i=i*t,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var n=n_(this.cbg,this.lat0);this.Zb=-this.Qn*(n+$w(this.gtu,2*n))}function iC(e){var t=X(e.x-this.long0,this.over),i=e.y;i=n_(this.cbg,i);var n=Math.sin(i),s=Math.cos(i),a=Math.sin(t),r=Math.cos(t);i=Math.atan2(n,r*s),t=Math.atan2(a*s,Qe(n,s*r)),t=Jw(Math.tan(t));var l=YE(this.gtu,2*i,2*t);i=i+l[0],t=t+l[1];var o,h;return Math.abs(t)<=2.623395162778?(o=this.a*(this.Qn*t)+this.x0,h=this.a*(this.Qn*i+this.Zb)+this.y0):(o=1/0,h=1/0),e.x=o,e.y=h,e}function nC(e){var t=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,t=t/this.Qn;var n,s;if(Math.abs(t)<=2.623395162778){var a=YE(this.utg,2*i,2*t);i=i+a[0],t=t+a[1],t=Math.atan(XE(t));var r=Math.sin(i),l=Math.cos(i),o=Math.sin(t),h=Math.cos(t);i=Math.atan2(r*h,Qe(o,h*l)),t=Math.atan2(o,h*l),n=X(t+this.long0,this.over),s=n_(this.cgb,i)}else n=1/0,s=1/0;return e.x=n,e.y=s,e}var sC=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const fu={init:eC,forward:iC,inverse:nC,names:sC};function aC(e,t){if(e===void 0){if(e=Math.floor((X(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var rC="etmerc";function lC(){var e=aC(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*te,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,fu.init.apply(this),this.forward=fu.forward,this.inverse=fu.inverse}var oC=["Universal Transverse Mercator System","utm"];const hC={init:lC,names:oC,dependsOn:rC};function s_(e,t){return Math.pow((1-e)/(1+e),t)}var uC=20;function cC(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ct)/(Math.pow(Math.tan(.5*this.lat0+Ct),this.C)*s_(this.e*e,this.ratexp))}function fC(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Ct),this.C)*s_(this.e*Math.sin(i),this.ratexp))-j,e.x=this.C*t,e}function dC(e){for(var t=1e-14,i=e.x/this.C,n=e.y,s=Math.pow(Math.tan(.5*n+Ct)/this.K,1/this.C),a=uC;a>0&&(n=2*Math.atan(s*s_(this.e*Math.sin(e.y),-.5*this.e))-j,!(Math.abs(n-e.y)<t));--a)e.y=n;return a?(e.x=i,e.y=n,e):null}const a_={init:cC,forward:fC,inverse:dC};function gC(){a_.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function _C(e){var t,i,n,s;return e.x=X(e.x-this.long0,this.over),a_.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),n=Math.cos(e.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*n),e.x=s*i*Math.sin(e.x),e.y=s*(this.cosc0*t-this.sinc0*i*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function mC(e){var t,i,n,s,a;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,a=Qe(e.x,e.y)){var r=2*Math.atan2(a,this.R2);t=Math.sin(r),i=Math.cos(r),s=Math.asin(i*this.sinc0+e.y*t*this.cosc0/a),n=Math.atan2(e.x*t,a*this.cosc0*i-e.y*this.sinc0*t)}else s=this.phic0,n=0;return e.x=n,e.y=s,a_.inverse.apply(this,[e]),e.x=X(e.x+this.long0,this.over),e}var yC=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const pC={init:gC,forward:_C,inverse:mC,names:yC};function r_(e,t,i){return t*=i,Math.tan(.5*(j+e))*Math.pow((1-t)/(1+t),.5*i)}function vC(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=k&&(this.k0=.5*(1+ih(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=k&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=k&&Math.abs(Math.cos(this.lat_ts))>k&&(this.k0=.5*this.cons*un(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ki(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=un(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(r_(this.lat0,this.sinlat0,this.e))-j,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function EC(e){var t=e.x,i=e.y,n=Math.sin(i),s=Math.cos(i),a,r,l,o,h,u,f=X(t-this.long0,this.over);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=k&&Math.abs(i+this.lat0)<=k?(e.x=NaN,e.y=NaN,e):this.sphere?(a=2*this.k0/(1+this.sinlat0*n+this.coslat0*s*Math.cos(f)),e.x=this.a*a*s*Math.sin(f)+this.x0,e.y=this.a*a*(this.coslat0*n-this.sinlat0*s*Math.cos(f))+this.y0,e):(r=2*Math.atan(r_(i,n,this.e))-j,o=Math.cos(r),l=Math.sin(r),Math.abs(this.coslat0)<=k?(h=Ki(this.e,i*this.con,this.con*n),u=2*this.a*this.k0*h/this.cons,e.x=this.x0+u*Math.sin(t-this.long0),e.y=this.y0-this.con*u*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<k?(a=2*this.a*this.k0/(1+o*Math.cos(f)),e.y=a*l):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*o*Math.cos(f))),e.y=a*(this.cosX0*l-this.sinX0*o*Math.cos(f))+this.y0),e.x=a*o*Math.sin(f)+this.x0,e))}function xC(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,s,a,r=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var l=2*Math.atan(r/(2*this.a*this.k0));return t=this.long0,i=this.lat0,r<=k?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(l)*this.sinlat0+e.y*Math.sin(l)*this.coslat0/r),Math.abs(this.coslat0)<k?this.lat0>0?t=X(this.long0+Math.atan2(e.x,-1*e.y),this.over):t=X(this.long0+Math.atan2(e.x,e.y),this.over):t=X(this.long0+Math.atan2(e.x*Math.sin(l),r*this.coslat0*Math.cos(l)-e.y*this.sinlat0*Math.sin(l)),this.over),e.x=t,e.y=i,e)}else if(Math.abs(this.coslat0)<=k){if(r<=k)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,n=r*this.cons/(2*this.a*this.k0),i=this.con*Ro(this.e,n),t=this.con*X(this.con*this.long0+Math.atan2(e.x,-1*e.y),this.over)}else s=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,r<=k?a=this.X0:(a=Math.asin(Math.cos(s)*this.sinX0+e.y*Math.sin(s)*this.cosX0/r),t=X(this.long0+Math.atan2(e.x*Math.sin(s),r*this.cosX0*Math.cos(s)-e.y*this.sinX0*Math.sin(s)),this.over)),i=-1*Ro(this.e,Math.tan(.5*(j+a)));return e.x=t,e.y=i,e}var SC=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const MC={init:vC,forward:EC,inverse:xC,names:SC,ssfn_:r_};function bC(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,n=this.rf,s=1/n,a=2*s-Math.pow(s,2),r=this.e=Math.sqrt(a);this.R=this.k0*i*Math.sqrt(1-a)/(1-a*Math.pow(t,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+e/2)),h=Math.log((1+r*t)/(1-r*t));this.K=l-this.alpha*o+this.alpha*r/2*h}function wC(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+i)+this.K,s=2*(Math.atan(Math.exp(n))-Math.PI/4),a=this.alpha*(e.x-this.lambda0),r=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(a))),l=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(a));return e.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,e.x=this.R*r+this.x0,e}function CC(e){for(var t=e.x-this.x0,i=e.y-this.y0,n=t/this.R,s=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(n)),r=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(s))),l=this.lambda0+r/this.alpha,o=0,h=a,u=-1e3,f=0;Math.abs(h-u)>1e-7;){if(++f>20)return;o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),u=h,h=2*Math.atan(Math.exp(o))-Math.PI/2}return e.x=l,e.y=h,e}var TC=["somerc"];const RC={init:bC,forward:wC,inverse:CC,names:TC};var Ka=1e-7;function AC(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof e.projName=="object"?Object.keys(e.projName)[0]:e.projName;return"no_uoff"in e||"no_off"in e||t.indexOf(i)!==-1||t.indexOf(NE(i))!==-1}function OC(){var e,t,i,n,s,a,r,l,o,h,u=0,f,c=0,d=0,g=0,y=0,v=0,_=0;this.no_off=AC(this),this.no_rot="no_rot"in this;var m=!1;"alpha"in this&&(m=!0);var p=!1;if("rectified_grid_angle"in this&&(p=!0),m&&(_=this.alpha),p&&(u=this.rectified_grid_angle),m||p)c=this.longc;else if(d=this.long1,y=this.lat1,g=this.long2,v=this.lat2,Math.abs(y-v)<=Ka||(e=Math.abs(y))<=Ka||Math.abs(e-j)<=Ka||Math.abs(Math.abs(this.lat0)-j)<=Ka||Math.abs(Math.abs(v)-j)<=Ka)throw new Error;var E=1-this.es;t=Math.sqrt(E),Math.abs(this.lat0)>k?(l=Math.sin(this.lat0),i=Math.cos(this.lat0),e=1-this.es*l*l,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/E),this.A=this.B*this.k0*t/e,n=this.B*t/(i*Math.sqrt(e)),s=n*n-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=n,this.E*=Math.pow(Ki(this.e,this.lat0,l),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=s=1),m||p?(m?(f=Math.asin(Math.sin(_)/n),p||(u=_)):(f=u,_=Math.asin(n*Math.sin(f))),this.lam0=c-Math.asin(.5*(s-1/s)*Math.tan(f))/this.B):(a=Math.pow(Ki(this.e,y,Math.sin(y)),this.B),r=Math.pow(Ki(this.e,v,Math.sin(v)),this.B),s=this.E/a,o=(r-a)/(r+a),h=this.E*this.E,h=(h-r*a)/(h+r*a),e=d-g,e<-Math.PI?g-=Co:e>Math.PI&&(g+=Co),this.lam0=X(.5*(d+g)-Math.atan(h*Math.tan(.5*this.B*(d-g))/o)/this.B,this.over),f=Math.atan(2*Math.sin(this.B*X(d-this.lam0,this.over))/(s-1/s)),u=_=Math.asin(n*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(Ct-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(Ct+s))}function LC(e){var t={},i,n,s,a,r,l,o,h;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-j)>k){if(r=this.E/Math.pow(Ki(this.e,e.y,Math.sin(e.y)),this.B),l=1/r,i=.5*(r-l),n=.5*(r+l),a=Math.sin(this.B*e.x),s=(i*this.singam-a*this.cosgam)/n,Math.abs(Math.abs(s)-1)<k)throw new Error;h=.5*this.ArB*Math.log((1-s)/(1+s)),l=Math.cos(this.B*e.x),Math.abs(l)<Ka?o=this.A*e.x:o=this.ArB*Math.atan2(i*this.cosgam+a*this.singam,l)}else h=e.y>0?this.v_pole_n:this.v_pole_s,o=this.ArB*e.y;return this.no_rot?(t.x=o,t.y=h):(o-=this.u_0,t.x=h*this.cosrot+o*this.sinrot,t.y=o*this.cosrot-h*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function NC(e){var t,i,n,s,a,r,l,o={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(i=e.y,t=e.x):(i=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*i),s=.5*(n-1/n),a=.5*(n+1/n),r=Math.sin(this.BrA*t),l=(r*this.cosgam+s*this.singam)/a,Math.abs(Math.abs(l)-1)<k)o.x=0,o.y=l<0?-j:j;else{if(o.y=this.E/Math.sqrt((1+l)/(1-l)),o.y=Ro(this.e,Math.pow(o.y,1/this.B)),o.y===1/0)throw new Error;o.x=-this.rB*Math.atan2(s*this.cosgam-r*this.singam,Math.cos(this.BrA*t))}return o.x+=this.lam0,o}var GC=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const DC={init:OC,forward:LC,inverse:NC,names:GC};function IC(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<k)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),n=un(this.e,t,i),s=Ki(this.e,this.lat1,t),a=Math.sin(this.lat2),r=Math.cos(this.lat2),l=un(this.e,a,r),o=Ki(this.e,this.lat2,a),h=Math.abs(Math.abs(this.lat0)-j)<k?0:Ki(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>k?this.ns=Math.log(n/l)/Math.log(s/o):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function PC(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=k&&(i=ih(i)*(j-2*k));var n=Math.abs(Math.abs(i)-j),s,a;if(n>k)s=Ki(this.e,i,Math.sin(i)),a=this.a*this.f0*Math.pow(s,this.ns);else{if(n=i*this.ns,n<=0)return null;a=0}var r=this.ns*X(t-this.long0,this.over);return e.x=this.k0*(a*Math.sin(r))+this.x0,e.y=this.k0*(this.rh-a*Math.cos(r))+this.y0,e}function zC(e){var t,i,n,s,a,r=(e.x-this.x0)/this.k0,l=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(r*r+l*l),i=1):(t=-Math.sqrt(r*r+l*l),i=-1);var o=0;if(t!==0&&(o=Math.atan2(i*r,i*l)),t!==0||this.ns>0){if(i=1/this.ns,n=Math.pow(t/(this.a*this.f0),i),s=Ro(this.e,n),s===-9999)return null}else s=-j;return a=X(o/this.ns+this.long0,this.over),e.x=a,e.y=s,e}var jC=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const FC={init:IC,forward:PC,inverse:zC,names:jC};function UC(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function kC(e){var t,i,n,s,a,r,l,o=e.x,h=e.y,u=X(o-this.long0,this.over);return t=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/t)-this.s45),n=-u*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),a=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(s)),r=this.n*a,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),e.y=l*Math.cos(r)/1,e.x=l*Math.sin(r)/1,this.czech||(e.y*=-1,e.x*=-1),e}function BC(e){var t,i,n,s,a,r,l,o,h=e.x;e.x=e.y,e.y=h,this.czech||(e.y*=-1,e.x*=-1),r=Math.sqrt(e.x*e.x+e.y*e.y),a=Math.atan2(e.y,e.x),s=a/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(s)),i=Math.asin(Math.cos(n)*Math.sin(s)/Math.cos(t)),e.x=this.long0-i/this.alfa,l=t,o=0;var u=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-e.y)<1e-10&&(o=1),l=e.y,u+=1;while(o===0&&u<15);return u>=15?null:e}var XC=["Krovak","krovak"];const YC={init:UC,forward:kC,inverse:BC,names:XC};function Fe(e,t,i,n,s){return e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)}function nh(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function sh(e){return .375*e*(1+.25*e*(1+.46875*e))}function ah(e){return .05859375*e*e*(1+.75*e)}function rh(e){return e*e*e*(35/3072)}function l_(e,t,i){var n=t*i;return e/Math.sqrt(1-n*n)}function Ys(e){return Math.abs(e)<j?e:e-ih(e)*Math.PI}function Ku(e,t,i,n,s){var a,r;a=e/t;for(var l=0;l<15;l++)if(r=(e-(t*a-i*Math.sin(2*a)+n*Math.sin(4*a)-s*Math.sin(6*a)))/(t-2*i*Math.cos(2*a)+4*n*Math.cos(4*a)-6*s*Math.cos(6*a)),a+=r,Math.abs(r)<=1e-10)return a;return NaN}function qC(){this.sphere||(this.e0=nh(this.es),this.e1=sh(this.es),this.e2=ah(this.es),this.e3=rh(this.es),this.ml0=this.a*Fe(this.e0,this.e1,this.e2,this.e3,this.lat0))}function HC(e){var t,i,n=e.x,s=e.y;if(n=X(n-this.long0,this.over),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(n))-this.lat0);else{var a=Math.sin(s),r=Math.cos(s),l=l_(this.a,this.e,a),o=Math.tan(s)*Math.tan(s),h=n*Math.cos(s),u=h*h,f=this.es*r*r/(1-this.es),c=this.a*Fe(this.e0,this.e1,this.e2,this.e3,s);t=l*h*(1-u*o*(1/6-(8-o+8*f)*u/120)),i=c-this.ml0+l*a/r*u*(.5+(5-o+6*f)*u/24)}return e.x=t+this.x0,e.y=i+this.y0,e}function ZC(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,n,s;if(this.sphere){var a=i+this.lat0;n=Math.asin(Math.sin(a)*Math.cos(t)),s=Math.atan2(Math.tan(t),Math.cos(a))}else{var r=this.ml0/this.a+i,l=Ku(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-j)<=k)return e.x=this.long0,e.y=j,i<0&&(e.y*=-1),e;var o=l_(this.a,this.e,Math.sin(l)),h=o*o*o/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(l),2),f=t*this.a/o,c=f*f;n=l-o*Math.tan(l)/h*f*f*(.5-(1+3*u)*f*f/24),s=f*(1-c*(u/3+(1+3*u)*u*c/15))/Math.cos(l)}return e.x=X(s+this.long0,this.over),e.y=Ys(n),e}var VC=["Cassini","Cassini_Soldner","cass"];const KC={init:qC,forward:HC,inverse:ZC,names:VC};function Os(e,t){var i;return e>1e-7?(i=e*t,(1-e*e)*(t/(1-i*i)-.5/e*Math.log((1-i)/(1+i)))):2*t}var C0=1,T0=2,R0=3,du=4;function WC(){var e=Math.abs(this.lat0);if(Math.abs(e-j)<k?this.mode=this.lat0<0?C0:T0:Math.abs(e)<k?this.mode=R0:this.mode=du,this.es>0){var t;switch(this.qp=Os(this.e,1),this.mmf=.5/(1-this.es),this.apa=a8(this.es),this.mode){case T0:this.dd=1;break;case C0:this.dd=1;break;case R0:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case du:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Os(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===du&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function QC(e){var t,i,n,s,a,r,l,o,h,u,f=e.x,c=e.y;if(f=X(f-this.long0,this.over),this.sphere){if(a=Math.sin(c),u=Math.cos(c),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+u*n:1+this.sinph0*a+this.cosph0*u*n,i<=k)return null;i=Math.sqrt(2/i),t=i*u*Math.sin(f),i*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*u*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(c+this.lat0)<k)return null;i=Ct-c*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),t=i*Math.sin(f),i*=n}}else{switch(l=0,o=0,h=0,n=Math.cos(f),s=Math.sin(f),a=Math.sin(c),r=Os(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=r/this.qp,o=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:h=1+this.sinb1*l+this.cosb1*o*n;break;case this.EQUIT:h=1+o*n;break;case this.N_POLE:h=j+c,r=this.qp-r;break;case this.S_POLE:h=c-j,r=this.qp+r;break}if(Math.abs(h)<k)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?i=this.ymf*h*(this.cosb1*l-this.sinb1*o*n):i=(h=Math.sqrt(2/(1+o*n)))*l*this.ymf,t=this.xmf*h*o*s;break;case this.N_POLE:case this.S_POLE:r>=0?(t=(h=Math.sqrt(r))*s,i=n*(this.mode===this.S_POLE?h:-h)):t=i=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e}function JC(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,n,s,a,r,l,o,h;if(this.sphere){var u=0,f,c=0;if(f=Math.sqrt(t*t+i*i),s=f*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(c=Math.sin(s),u=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(f)<=k?0:Math.asin(i*c/f),t*=c,i=u*f;break;case this.OBLIQ:s=Math.abs(f)<=k?this.lat0:Math.asin(u*this.sinph0+i*c*this.cosph0/f),t*=c*this.cosph0,i=(u-Math.sin(s)*this.sinph0)*f;break;case this.N_POLE:i=-i,s=j-s;break;case this.S_POLE:s-=j;break}n=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,i)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,i*=this.dd,o=Math.sqrt(t*t+i*i),o<k)return e.x=this.long0,e.y=this.lat0,e;r=2*Math.asin(.5*o/this.rq),a=Math.cos(r),t*=r=Math.sin(r),this.mode===this.OBLIQ?(h=a*this.sinb1+i*r*this.cosb1/o,l=this.qp*h,i=o*this.cosb1*a-i*this.sinb1*r):(h=i*r/o,l=this.qp*h,i=o*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),l=t*t+i*i,!l)return e.x=this.long0,e.y=this.lat0,e;h=1-l/this.qp,this.mode===this.S_POLE&&(h=-h)}n=Math.atan2(t,i),s=r8(Math.asin(h),this.apa)}return e.x=X(this.long0+n,this.over),e.y=s,e}var $C=.3333333333333333,t8=.17222222222222222,e8=.10257936507936508,i8=.06388888888888888,n8=.0664021164021164,s8=.016415012942191543;function a8(e){var t,i=[];return i[0]=e*$C,t=e*e,i[0]+=t*t8,i[1]=t*i8,t*=e,i[0]+=t*e8,i[1]+=t*n8,i[2]=t*s8,i}function r8(e,t){var i=e+e;return e+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var l8=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const o8={init:WC,forward:QC,inverse:JC,names:l8,S_POLE:C0,N_POLE:T0,EQUIT:R0,OBLIQ:du};function js(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function h8(){Math.abs(this.lat1+this.lat2)<k||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=un(this.e3,this.sin_po,this.cos_po),this.qs1=Os(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=un(this.e3,this.sin_po,this.cos_po),this.qs2=Os(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Os(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>k?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function u8(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=Os(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,a=this.ns0*X(t-this.long0,this.over),r=s*Math.sin(a)+this.x0,l=this.rh-s*Math.cos(a)+this.y0;return e.x=r,e.y=l,e}function c8(e){var t,i,n,s,a,r;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),s=0,t!==0&&(s=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?r=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,r=this.phi1z(this.e3,i)),a=X(s/this.ns0+this.long0,this.over),e.x=a,e.y=r,e}function f8(e,t){var i,n,s,a,r,l=js(.5*t);if(e<k)return l;for(var o=e*e,h=1;h<=25;h++)if(i=Math.sin(l),n=Math.cos(l),s=e*i,a=1-s*s,r=.5*a*a/n*(t/(1-o)-i/a+.5/e*Math.log((1-s)/(1+s))),l=l+r,Math.abs(r)<=1e-7)return l;return null}var d8=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const g8={init:h8,forward:u8,inverse:c8,names:d8,phi1z:f8};function _8(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function m8(e){var t,i,n,s,a,r,l,o,h=e.x,u=e.y;return n=X(h-this.long0,this.over),t=Math.sin(u),i=Math.cos(u),s=Math.cos(n),r=this.sin_p14*t+this.cos_p14*i*s,a=1,r>0||Math.abs(r)<=k?(l=this.x0+this.a*a*i*Math.sin(n)/r,o=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*i*s)/r):(l=this.x0+this.infinity_dist*i*Math.sin(n),o=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*s)),e.x=l,e.y=o,e}function y8(e){var t,i,n,s,a,r;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(s=Math.atan2(t,this.rc),i=Math.sin(s),n=Math.cos(s),r=js(n*this.sin_p14+e.y*i*this.cos_p14/t),a=Math.atan2(e.x*i,t*this.cos_p14*n-e.y*this.sin_p14*i),a=X(this.long0+a,this.over)):(r=this.phic0,a=0),e.x=a,e.y=r,e}var p8=["gnom"];const v8={init:_8,forward:m8,inverse:y8,names:p8};function E8(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*j:j;for(var n=Math.asin(.5*t),s,a,r,l,o=0;o<30;o++)if(a=Math.sin(n),r=Math.cos(n),l=e*a,s=Math.pow(1-l*l,2)/(2*r)*(t/(1-e*e)-a/(1-l*l)+.5/e*Math.log((1-l)/(1+l))),n+=s,Math.abs(s)<=1e-10)return n;return NaN}function x8(){this.sphere||(this.k0=un(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function S8(e){var t=e.x,i=e.y,n,s,a=X(t-this.long0,this.over);if(this.sphere)n=this.x0+this.a*a*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var r=Os(this.e,Math.sin(i));n=this.x0+this.a*this.k0*a,s=this.y0+this.a*r*.5/this.k0}return e.x=n,e.y=s,e}function M8(e){e.x-=this.x0,e.y-=this.y0;var t,i;return this.sphere?(t=X(this.long0+e.x/this.a/Math.cos(this.lat_ts),this.over),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=E8(this.e,2*e.y*this.k0/this.a),t=X(this.long0+e.x/(this.a*this.k0),this.over)),e.x=t,e.y=i,e}var b8=["cea"];const w8={init:x8,forward:S8,inverse:M8,names:b8};function C8(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function T8(e){var t=e.x,i=e.y,n=X(t-this.long0,this.over),s=Ys(i-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*s,e}function R8(e){var t=e.x,i=e.y;return e.x=X(this.long0+(t-this.x0)/(this.a*this.rc),this.over),e.y=Ys(this.lat0+(i-this.y0)/this.a),e}var A8=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const O8={init:C8,forward:T8,inverse:R8,names:A8};var iy=20;function L8(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=nh(this.es),this.e1=sh(this.es),this.e2=ah(this.es),this.e3=rh(this.es),this.ml0=this.a*Fe(this.e0,this.e1,this.e2,this.e3,this.lat0)}function N8(e){var t=e.x,i=e.y,n,s,a,r=X(t-this.long0,this.over);if(a=r*Math.sin(i),this.sphere)Math.abs(i)<=k?(n=this.a*r,s=-1*this.a*this.lat0):(n=this.a*Math.sin(a)/Math.tan(i),s=this.a*(Ys(i-this.lat0)+(1-Math.cos(a))/Math.tan(i)));else if(Math.abs(i)<=k)n=this.a*r,s=-1*this.ml0;else{var l=l_(this.a,this.e,Math.sin(i))/Math.tan(i);n=l*Math.sin(a),s=this.a*Fe(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+l*(1-Math.cos(a))}return e.x=n+this.x0,e.y=s+this.y0,e}function G8(e){var t,i,n,s,a,r,l,o,h;if(n=e.x-this.x0,s=e.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=k)t=X(n/this.a+this.long0,this.over),i=0;else{r=this.lat0+s/this.a,l=n*n/this.a/this.a+r*r,o=r;var u;for(a=iy;a;--a)if(u=Math.tan(o),h=-1*(r*(o*u+1)-o-.5*(o*o+l)*u)/((o-r)/u-1),o+=h,Math.abs(h)<=k){i=o;break}t=X(this.long0+Math.asin(n*Math.tan(o)/this.a)/Math.sin(i),this.over)}else if(Math.abs(s+this.ml0)<=k)i=0,t=X(this.long0+n/this.a,this.over);else{r=(this.ml0+s)/this.a,l=n*n/this.a/this.a+r*r,o=r;var f,c,d,g,y;for(a=iy;a;--a)if(y=this.e*Math.sin(o),f=Math.sqrt(1-y*y)*Math.tan(o),c=this.a*Fe(this.e0,this.e1,this.e2,this.e3,o),d=this.e0-2*this.e1*Math.cos(2*o)+4*this.e2*Math.cos(4*o)-6*this.e3*Math.cos(6*o),g=c/this.a,h=(r*(f*g+1)-g-.5*f*(g*g+l))/(this.es*Math.sin(2*o)*(g*g+l-2*r*g)/(4*f)+(r-g)*(f*d-2/Math.sin(2*o))-d),o-=h,Math.abs(h)<=k){i=o;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=X(this.long0+Math.asin(n*f/this.a)/Math.sin(i),this.over)}return e.x=t,e.y=i,e}var D8=["Polyconic","American_Polyconic","poly"];const I8={init:L8,forward:N8,inverse:G8,names:D8};function P8(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function z8(e){var t,i=e.x,n=e.y,s=n-this.lat0,a=i-this.long0,r=s/no*1e-5,l=a,o=1,h=0;for(t=1;t<=10;t++)o=o*r,h=h+this.A[t]*o;var u=h,f=l,c=1,d=0,g,y,v=0,_=0;for(t=1;t<=6;t++)g=c*u-d*f,y=d*u+c*f,c=g,d=y,v=v+this.B_re[t]*c-this.B_im[t]*d,_=_+this.B_im[t]*c+this.B_re[t]*d;return e.x=_*this.a+this.x0,e.y=v*this.a+this.y0,e}function j8(e){var t,i=e.x,n=e.y,s=i-this.x0,a=n-this.y0,r=a/this.a,l=s/this.a,o=1,h=0,u,f,c=0,d=0;for(t=1;t<=6;t++)u=o*r-h*l,f=h*r+o*l,o=u,h=f,c=c+this.C_re[t]*o-this.C_im[t]*h,d=d+this.C_im[t]*o+this.C_re[t]*h;for(var g=0;g<this.iterations;g++){var y=c,v=d,_,m,p=r,E=l;for(t=2;t<=6;t++)_=y*c-v*d,m=v*c+y*d,y=_,v=m,p=p+(t-1)*(this.B_re[t]*y-this.B_im[t]*v),E=E+(t-1)*(this.B_im[t]*y+this.B_re[t]*v);y=1,v=0;var M=this.B_re[1],T=this.B_im[1];for(t=2;t<=6;t++)_=y*c-v*d,m=v*c+y*d,y=_,v=m,M=M+t*(this.B_re[t]*y-this.B_im[t]*v),T=T+t*(this.B_im[t]*y+this.B_re[t]*v);var b=M*M+T*T;c=(p*M+E*T)/b,d=(E*M-p*T)/b}var x=c,S=d,w=1,A=0;for(t=1;t<=9;t++)w=w*x,A=A+this.D[t]*w;var O=this.lat0+A*no*1e5,P=this.long0+S;return e.x=P,e.y=O,e}var F8=["New_Zealand_Map_Grid","nzmg"];const U8={init:P8,forward:z8,inverse:j8,names:F8};function k8(){}function B8(e){var t=e.x,i=e.y,n=X(t-this.long0,this.over),s=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=s,e.y=a,e}function X8(e){e.x-=this.x0,e.y-=this.y0;var t=X(this.long0+e.x/this.a,this.over),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e}var Y8=["Miller_Cylindrical","mill"];const q8={init:k8,forward:B8,inverse:X8,names:Y8};var H8=20;function Z8(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=e_(this.es)}function V8(e){var t,i,n=e.x,s=e.y;if(n=X(n-this.long0,this.over),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var a=this.n*Math.sin(s),r=H8;r;--r){var l=(this.m*s+Math.sin(s)-a)/(this.m+Math.cos(s));if(s-=l,Math.abs(l)<k)break}t=this.a*this.C_x*n*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var o=Math.sin(s),h=Math.cos(s);i=this.a*rl(s,o,h,this.en),t=this.a*n*h/Math.sqrt(1-this.es*o*o)}return e.x=t,e.y=i,e}function K8(e){var t,i,n,s;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(t))),this.m?t=js((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=js(Math.sin(t)/this.n)),n=X(n+this.long0,this.over),t=Ys(t)):(t=i_(e.y/this.a,this.es,this.en),s=Math.abs(t),s<j?(s=Math.sin(t),i=this.long0+e.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),n=X(i,this.over)):s-k<j&&(n=this.long0)),e.x=n,e.y=t,e}var W8=["Sinusoidal","sinu"];const Q8={init:Z8,forward:V8,inverse:K8,names:W8};function J8(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function $8(e){for(var t=e.x,i=e.y,n=X(t-this.long0,this.over),s=i,a=Math.PI*Math.sin(i);;){var r=-(s+Math.sin(s)-a)/(1+Math.cos(s));if(s+=r,Math.abs(r)<k)break}s/=2,Math.PI/2-Math.abs(i)<k&&(n=0);var l=.900316316158*this.a*n*Math.cos(s)+this.x0,o=1.4142135623731*this.a*Math.sin(s)+this.y0;return e.x=l,e.y=o,e}function t6(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var n=X(this.long0+e.x/(.900316316158*this.a*Math.cos(t)),this.over);n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return e.x=n,e.y=s,e}var e6=["Mollweide","moll"];const i6={init:J8,forward:$8,inverse:t6,names:e6};function n6(){Math.abs(this.lat1+this.lat2)<k||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=nh(this.es),this.e1=sh(this.es),this.e2=ah(this.es),this.e3=rh(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=un(this.e,this.sin_phi,this.cos_phi),this.ml1=Fe(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<k?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=un(this.e,this.sin_phi,this.cos_phi),this.ml2=Fe(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Fe(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function s6(e){var t=e.x,i=e.y,n;if(this.sphere)n=this.a*(this.g-i);else{var s=Fe(this.e0,this.e1,this.e2,this.e3,i);n=this.a*(this.g-s)}var a=this.ns*X(t-this.long0,this.over),r=this.x0+n*Math.sin(a),l=this.y0+this.rh-n*Math.cos(a);return e.x=r,e.y=l,e}function a6(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,i,n,s;this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var a=0;if(i!==0&&(a=Math.atan2(t*e.x,t*e.y)),this.sphere)return s=X(this.long0+a/this.ns,this.over),n=Ys(this.g-i/this.a),e.x=s,e.y=n,e;var r=this.g-i/this.a;return n=Ku(r,this.e0,this.e1,this.e2,this.e3),s=X(this.long0+a/this.ns,this.over),e.x=s,e.y=n,e}var r6=["Equidistant_Conic","eqdc"];const l6={init:n6,forward:s6,inverse:a6,names:r6};function o6(){this.R=this.a}function h6(e){var t=e.x,i=e.y,n=X(t-this.long0,this.over),s,a;Math.abs(i)<=k&&(s=this.x0+this.R*n,a=this.y0);var r=js(2*Math.abs(i/Math.PI));(Math.abs(n)<=k||Math.abs(Math.abs(i)-j)<=k)&&(s=this.x0,i>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*r):a=this.y0+Math.PI*this.R*-Math.tan(.5*r));var l=.5*Math.abs(Math.PI/n-n/Math.PI),o=l*l,h=Math.sin(r),u=Math.cos(r),f=u/(h+u-1),c=f*f,d=f*(2/h-1),g=d*d,y=Math.PI*this.R*(l*(f-g)+Math.sqrt(o*(f-g)*(f-g)-(g+o)*(c-g)))/(g+o);n<0&&(y=-y),s=this.x0+y;var v=o+f;return y=Math.PI*this.R*(d*v-l*Math.sqrt((g+o)*(o+1)-v*v))/(g+o),i>=0?a=this.y0+y:a=this.y0-y,e.x=s,e.y=a,e}function u6(e){var t,i,n,s,a,r,l,o,h,u,f,c,d;return e.x-=this.x0,e.y-=this.y0,f=Math.PI*this.R,n=e.x/f,s=e.y/f,a=n*n+s*s,r=-Math.abs(s)*(1+a),l=r-2*s*s+n*n,o=-2*r+1+2*s*s+a*a,d=s*s/o+(2*l*l*l/o/o/o-9*r*l/o/o)/27,h=(r-l*l/3/o)/o,u=2*Math.sqrt(-h/3),f=3*d/h/u,Math.abs(f)>1&&(f>=0?f=1:f=-1),c=Math.acos(f)/3,e.y>=0?i=(-u*Math.cos(c+Math.PI/3)-l/3/o)*Math.PI:i=-(-u*Math.cos(c+Math.PI/3)-l/3/o)*Math.PI,Math.abs(n)<k?t=this.long0:t=X(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-s*s)+a*a))/2/n,this.over),e.x=t,e.y=i,e}var c6=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const f6={init:o6,forward:h6,inverse:u6,names:c6};function d6(e,t,i,n,s,a){const r=n-t,l=Math.atan((1-a)*Math.tan(e)),o=Math.atan((1-a)*Math.tan(i)),h=Math.sin(l),u=Math.cos(l),f=Math.sin(o),c=Math.cos(o);let d=r,g,y=100,v,_,m,p,E,M,T,b,x,S,w,A,O,P;do{if(v=Math.sin(d),_=Math.cos(d),m=Math.sqrt(c*v*(c*v)+(u*f-h*c*_)*(u*f-h*c*_)),m===0)return{azi1:0,s12:0};p=h*f+u*c*_,E=Math.atan2(m,p),M=u*c*v/m,T=1-M*M,b=T!==0?p-2*h*f/T:0,x=a/16*T*(4+a*(4-3*T)),g=d,d=r+(1-x)*a*M*(E+x*m*(b+x*p*(-1+2*b*b)))}while(Math.abs(d-g)>1e-12&&--y>0);return y===0?{azi1:NaN,s12:NaN}:(S=T*(s*s-s*(1-a)*(s*(1-a)))/(s*(1-a)*(s*(1-a))),w=1+S/16384*(4096+S*(-768+S*(320-175*S))),A=S/1024*(256+S*(-128+S*(74-47*S))),O=A*m*(b+A/4*(p*(-1+2*b*b)-A/6*b*(-3+4*m*m)*(-3+4*b*b))),P=s*(1-a)*w*(E-O),{azi1:Math.atan2(c*v,u*f-h*c*_),s12:P})}function g6(e,t,i,n,s,a){const r=Math.atan((1-a)*Math.tan(e)),l=Math.sin(r),o=Math.cos(r),h=Math.sin(i),u=Math.cos(i),f=Math.atan2(l,o*u),c=o*h,d=1-c*c,g=d*(s*s-s*(1-a)*(s*(1-a)))/(s*(1-a)*(s*(1-a))),y=1+g/16384*(4096+g*(-768+g*(320-175*g))),v=g/1024*(256+g*(-128+g*(74-47*g)));let _=n/(s*(1-a)*y),m,p=100,E,M,T,b;do E=Math.cos(2*f+_),M=Math.sin(_),T=Math.cos(_),b=v*M*(E+v/4*(T*(-1+2*E*E)-v/6*E*(-3+4*M*M)*(-3+4*E*E))),m=_,_=n/(s*(1-a)*y)+b;while(Math.abs(_-m)>1e-12&&--p>0);if(p===0)return{lat2:NaN,lon2:NaN};const x=l*M-o*T*u,S=Math.atan2(l*T+o*M*u,(1-a)*Math.sqrt(c*c+x*x)),w=Math.atan2(M*h,o*T-l*M*u),A=a/16*d*(4+a*(4-3*d)),O=w-(1-A)*a*c*(_+A*M*(E+A*T*(-1+2*E*E))),P=t+O;return{lat2:S,lon2:P}}function _6(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function m6(e){var t=e.x,i=e.y,n=Math.sin(e.y),s=Math.cos(e.y),a=X(t-this.long0,this.over),r,l,o,h,u,f,c,d,g,y,v;return this.sphere?Math.abs(this.sin_p12-1)<=k?(e.x=this.x0+this.a*(j-i)*Math.sin(a),e.y=this.y0-this.a*(j-i)*Math.cos(a),e):Math.abs(this.sin_p12+1)<=k?(e.x=this.x0+this.a*(j+i)*Math.sin(a),e.y=this.y0+this.a*(j+i)*Math.cos(a),e):(g=this.sin_p12*n+this.cos_p12*s*Math.cos(a),c=Math.acos(g),d=c?c/Math.sin(c):1,e.x=this.x0+this.a*d*s*Math.sin(a),e.y=this.y0+this.a*d*(this.cos_p12*n-this.sin_p12*s*Math.cos(a)),e):(r=nh(this.es),l=sh(this.es),o=ah(this.es),h=rh(this.es),Math.abs(this.sin_p12-1)<=k?(u=this.a*Fe(r,l,o,h,j),f=this.a*Fe(r,l,o,h,i),e.x=this.x0+(u-f)*Math.sin(a),e.y=this.y0-(u-f)*Math.cos(a),e):Math.abs(this.sin_p12+1)<=k?(u=this.a*Fe(r,l,o,h,j),f=this.a*Fe(r,l,o,h,i),e.x=this.x0+(u+f)*Math.sin(a),e.y=this.y0+(u+f)*Math.cos(a),e):Math.abs(t)<k&&Math.abs(i-this.lat0)<k?(e.x=e.y=0,e):(y=d6(this.lat0,this.long0,i,t,this.a,this.f),v=y.azi1,e.x=y.s12*Math.sin(v),e.y=y.s12*Math.cos(v),e))}function y6(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,s,a,r,l,o,h,u,f,c,d,g,y,v;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*j*this.a?void 0:(i=t/this.a,n=Math.sin(i),s=Math.cos(i),a=this.long0,Math.abs(t)<=k?r=this.lat0:(r=js(s*this.sin_p12+e.y*n*this.cos_p12/t),l=Math.abs(this.lat0)-j,Math.abs(l)<=k?this.lat0>=0?a=X(this.long0+Math.atan2(e.x,-e.y),this.over):a=X(this.long0-Math.atan2(-e.x,e.y),this.over):a=X(this.long0+Math.atan2(e.x*n,t*this.cos_p12*s-e.y*this.sin_p12*n),this.over)),e.x=a,e.y=r,e)):(o=nh(this.es),h=sh(this.es),u=ah(this.es),f=rh(this.es),Math.abs(this.sin_p12-1)<=k?(c=this.a*Fe(o,h,u,f,j),t=Math.sqrt(e.x*e.x+e.y*e.y),d=c-t,r=Ku(d/this.a,o,h,u,f),a=X(this.long0+Math.atan2(e.x,-1*e.y),this.over),e.x=a,e.y=r,e):Math.abs(this.sin_p12+1)<=k?(c=this.a*Fe(o,h,u,f,j),t=Math.sqrt(e.x*e.x+e.y*e.y),d=t-c,r=Ku(d/this.a,o,h,u,f),a=X(this.long0+Math.atan2(e.x,e.y),this.over),e.x=a,e.y=r,e):(g=Math.atan2(e.x,e.y),y=Math.sqrt(e.x*e.x+e.y*e.y),v=g6(this.lat0,this.long0,g,y,this.a,this.f),e.x=v.lon2,e.y=v.lat2,e))}var p6=["Azimuthal_Equidistant","aeqd"];const v6={init:_6,forward:m6,inverse:y6,names:p6};function E6(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function x6(e){var t,i,n,s,a,r,l,o,h=e.x,u=e.y;return n=X(h-this.long0,this.over),t=Math.sin(u),i=Math.cos(u),s=Math.cos(n),r=this.sin_p14*t+this.cos_p14*i*s,a=1,(r>0||Math.abs(r)<=k)&&(l=this.a*a*i*Math.sin(n),o=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*i*s)),e.x=l,e.y=o,e}function S6(e){var t,i,n,s,a,r,l;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),i=js(t/this.a),n=Math.sin(i),s=Math.cos(i),r=this.long0,Math.abs(t)<=k?(l=this.lat0,e.x=r,e.y=l,e):(l=js(s*this.sin_p14+e.y*n*this.cos_p14/t),a=Math.abs(this.lat0)-j,Math.abs(a)<=k?(this.lat0>=0?r=X(this.long0+Math.atan2(e.x,-e.y),this.over):r=X(this.long0-Math.atan2(-e.x,e.y),this.over),e.x=r,e.y=l,e):(r=X(this.long0+Math.atan2(e.x*n,t*this.cos_p14*s-e.y*this.sin_p14*n),this.over),e.x=r,e.y=l,e))}var M6=["ortho"];const b6={init:E6,forward:x6,inverse:S6,names:M6};var Kt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Tt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function w6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=j-Ct/2?this.face=Kt.TOP:this.lat0<=-(j-Ct/2)?this.face=Kt.BOTTOM:Math.abs(this.long0)<=Ct?this.face=Kt.FRONT:Math.abs(this.long0)<=j+Ct?this.face=this.long0>0?Kt.RIGHT:Kt.LEFT:this.face=Kt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function C6(e){var t={x:0,y:0},i,n,s,a,r,l,o={value:0};if(e.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):i=e.y,n=e.x,this.face===Kt.TOP)a=j-i,n>=Ct&&n<=j+Ct?(o.value=Tt.AREA_0,s=n-j):n>j+Ct||n<=-(j+Ct)?(o.value=Tt.AREA_1,s=n>0?n-ne:n+ne):n>-(j+Ct)&&n<=-Ct?(o.value=Tt.AREA_2,s=n+j):(o.value=Tt.AREA_3,s=n);else if(this.face===Kt.BOTTOM)a=j+i,n>=Ct&&n<=j+Ct?(o.value=Tt.AREA_0,s=-n+j):n<Ct&&n>=-Ct?(o.value=Tt.AREA_1,s=-n):n<-Ct&&n>=-(j+Ct)?(o.value=Tt.AREA_2,s=-n-j):(o.value=Tt.AREA_3,s=n>0?-n+ne:-n-ne);else{var h,u,f,c,d,g,y;this.face===Kt.RIGHT?n=Cr(n,+j):this.face===Kt.BACK?n=Cr(n,+ne):this.face===Kt.LEFT&&(n=Cr(n,-j)),c=Math.sin(i),d=Math.cos(i),g=Math.sin(n),y=Math.cos(n),h=d*y,u=d*g,f=c,this.face===Kt.FRONT?(a=Math.acos(h),s=Ih(a,f,u,o)):this.face===Kt.RIGHT?(a=Math.acos(u),s=Ih(a,f,-h,o)):this.face===Kt.BACK?(a=Math.acos(-h),s=Ih(a,f,-u,o)):this.face===Kt.LEFT?(a=Math.acos(-u),s=Ih(a,f,h,o)):(a=s=0,o.value=Tt.AREA_0)}return l=Math.atan(12/ne*(s+Math.acos(Math.sin(s)*Math.cos(Ct))-j)),r=Math.sqrt((1-Math.cos(a))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(s))))),o.value===Tt.AREA_1?l+=j:o.value===Tt.AREA_2?l+=ne:o.value===Tt.AREA_3&&(l+=1.5*ne),t.x=r*Math.cos(l),t.y=r*Math.sin(l),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function T6(e){var t={lam:0,phi:0},i,n,s,a,r,l,o,h,u,f={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),i=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?f.value=Tt.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(f.value=Tt.AREA_1,i-=j):e.x<0&&-e.x>=Math.abs(e.y)?(f.value=Tt.AREA_2,i=i<0?i+ne:i-ne):(f.value=Tt.AREA_3,i+=j),u=ne/12*Math.tan(i),r=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),l=Math.atan(r),s=Math.cos(i),a=Math.tan(n),o=1-s*s*a*a*(1-Math.cos(Math.atan(1/Math.cos(l)))),o<-1?o=-1:o>1&&(o=1),this.face===Kt.TOP)h=Math.acos(o),t.phi=j-h,f.value===Tt.AREA_0?t.lam=l+j:f.value===Tt.AREA_1?t.lam=l<0?l+ne:l-ne:f.value===Tt.AREA_2?t.lam=l-j:t.lam=l;else if(this.face===Kt.BOTTOM)h=Math.acos(o),t.phi=h-j,f.value===Tt.AREA_0?t.lam=-l+j:f.value===Tt.AREA_1?t.lam=-l:f.value===Tt.AREA_2?t.lam=-l-j:t.lam=l<0?-l-ne:-l+ne;else{var c,d,g;c=o,u=c*c,u>=1?g=0:g=Math.sqrt(1-u)*Math.sin(l),u+=g*g,u>=1?d=0:d=Math.sqrt(1-u),f.value===Tt.AREA_1?(u=d,d=-g,g=u):f.value===Tt.AREA_2?(d=-d,g=-g):f.value===Tt.AREA_3&&(u=d,d=g,g=-u),this.face===Kt.RIGHT?(u=c,c=-d,d=u):this.face===Kt.BACK?(c=-c,d=-d):this.face===Kt.LEFT&&(u=c,c=d,d=-u),t.phi=Math.acos(-g)-j,t.lam=Math.atan2(d,c),this.face===Kt.RIGHT?t.lam=Cr(t.lam,-j):this.face===Kt.BACK?t.lam=Cr(t.lam,-ne):this.face===Kt.LEFT&&(t.lam=Cr(t.lam,+j))}if(this.es!==0){var y,v,_;y=t.phi<0?1:0,v=Math.tan(t.phi),_=this.b/Math.sqrt(v*v+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-_*_)/(this.one_minus_f*_)),y&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function Ih(e,t,i,n){var s;return e<k?(n.value=Tt.AREA_0,s=0):(s=Math.atan2(t,i),Math.abs(s)<=Ct?n.value=Tt.AREA_0:s>Ct&&s<=j+Ct?(n.value=Tt.AREA_1,s-=j):s>j+Ct||s<=-(j+Ct)?(n.value=Tt.AREA_2,s=s>=0?s-ne:s+ne):(n.value=Tt.AREA_3,s+=j)),s}function Cr(e,t){var i=e+t;return i<-ne?i+=Co:i>+ne&&(i-=Co),i}var R6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const A6={init:w6,forward:C6,inverse:T6,names:R6};var A0=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Il=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],qE=.8487,HE=1.3523,ZE=ti/5,O6=1/ZE,_r=18,Wu=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},L6=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function N6(e,t,i,n){for(var s=t;n;--n){var a=e(s);if(s-=a,Math.abs(a)<i)break}return s}function G6(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function D6(e){var t=X(e.x-this.long0,this.over),i=Math.abs(e.y),n=Math.floor(i*ZE);n<0?n=0:n>=_r&&(n=_r-1),i=ti*(i-O6*n);var s={x:Wu(A0[n],i)*t,y:Wu(Il[n],i)};return e.y<0&&(s.y=-s.y),s.x=s.x*this.a*qE+this.x0,s.y=s.y*this.a*HE+this.y0,s}function I6(e){var t={x:(e.x-this.x0)/(this.a*qE),y:Math.abs(e.y-this.y0)/(this.a*HE)};if(t.y>=1)t.x/=A0[_r][0],t.y=e.y<0?-j:j;else{var i=Math.floor(t.y*_r);for(i<0?i=0:i>=_r&&(i=_r-1);;)if(Il[i][0]>t.y)--i;else if(Il[i+1][0]<=t.y)++i;else break;var n=Il[i],s=5*(t.y-n[0])/(Il[i+1][0]-n[0]);s=N6(function(a){return(Wu(n,a)-t.y)/L6(n,a)},s,k,100),t.x/=Wu(A0[i],s),t.y=(5*i+s)*te,e.y<0&&(t.y=-t.y)}return t.x=X(t.x+this.long0,this.over),t}var P6=["Robinson","robin"];const z6={init:G6,forward:D6,inverse:I6,names:P6};function j6(){this.name="geocent"}function F6(e){var t=DE(e,this.es,this.a);return t}function U6(e){var t=IE(e,this.es,this.a,this.b);return t}var k6=["Geocentric","geocentric","geocent","Geocent"];const B6={init:j6,forward:F6,inverse:U6,names:k6};var Ge={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},xl={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function X6(){if(Object.keys(xl).forEach((function(i){if(typeof this[i]>"u")this[i]=xl[i].def;else{if(xl[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);xl[i].num&&(this[i]=parseFloat(this[i]))}xl[i].degrees&&(this[i]=this[i]*te)}).bind(this)),Math.abs(Math.abs(this.lat0)-j)<k?this.mode=this.lat0<0?Ge.S_POLE:Ge.N_POLE:Math.abs(this.lat0)<k?this.mode=Ge.EQUIT:(this.mode=Ge.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function Y6(e){e.x-=this.long0;var t=Math.sin(e.y),i=Math.cos(e.y),n=Math.cos(e.x),s,a;switch(this.mode){case Ge.OBLIQ:a=this.sinph0*t+this.cosph0*i*n;break;case Ge.EQUIT:a=i*n;break;case Ge.S_POLE:a=-t;break;case Ge.N_POLE:a=t;break}switch(a=this.pn1/(this.p-a),s=a*i*Math.sin(e.x),this.mode){case Ge.OBLIQ:a*=this.cosph0*t-this.sinph0*i*n;break;case Ge.EQUIT:a*=t;break;case Ge.N_POLE:a*=-(i*n);break;case Ge.S_POLE:a*=i*n;break}var r,l;return r=a*this.cg+s*this.sg,l=1/(r*this.sw*this.h1+this.cw),s=(s*this.cg-a*this.sg)*this.cw*l,a=r*l,e.x=s*this.a,e.y=a*this.a,e}function q6(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},i,n,s;s=1/(this.pn1-e.y*this.sw),i=this.pn1*e.x*s,n=this.pn1*e.y*this.cw*s,e.x=i*this.cg+n*this.sg,e.y=n*this.cg-i*this.sg;var a=Qe(e.x,e.y);if(Math.abs(a)<k)t.x=0,t.y=e.y;else{var r,l;switch(l=1-a*a*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/a+a/this.pn1),r=Math.sqrt(1-l*l),this.mode){case Ge.OBLIQ:t.y=Math.asin(r*this.sinph0+e.y*l*this.cosph0/a),e.y=(r-this.sinph0*Math.sin(t.y))*a,e.x*=l*this.cosph0;break;case Ge.EQUIT:t.y=Math.asin(e.y*l/a),e.y=r*a,e.x*=l;break;case Ge.N_POLE:t.y=Math.asin(r),e.y=-e.y;break;case Ge.S_POLE:t.y=-Math.asin(r);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var H6=["Tilted_Perspective","tpers"];const Z6={init:X6,forward:Y6,inverse:q6,names:H6};function V6(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function K6(e){var t=e.x,i=e.y,n,s,a,r;if(t=t-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var l=this.radius_p/Qe(this.radius_p*Math.cos(i),Math.sin(i));if(s=l*Math.cos(t)*Math.cos(i),a=l*Math.sin(t)*Math.cos(i),r=l*Math.sin(i),(this.radius_g-s)*s-a*a-r*r*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;n=this.radius_g-s,this.flip_axis?(e.x=this.radius_g_1*Math.atan(a/Qe(r,n)),e.y=this.radius_g_1*Math.atan(r/n)):(e.x=this.radius_g_1*Math.atan(a/n),e.y=this.radius_g_1*Math.atan(r/Qe(a,n)))}else this.shape==="sphere"&&(n=Math.cos(i),s=Math.cos(t)*n,a=Math.sin(t)*n,r=Math.sin(i),n=this.radius_g-s,this.flip_axis?(e.x=this.radius_g_1*Math.atan(a/Qe(r,n)),e.y=this.radius_g_1*Math.atan(r/n)):(e.x=this.radius_g_1*Math.atan(a/n),e.y=this.radius_g_1*Math.atan(r/Qe(a,n))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function W6(e){var t=-1,i=0,n=0,s,a,r,l;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*Qe(1,n)):(i=Math.tan(e.x/this.radius_g_1),n=Math.tan(e.y/this.radius_g_1)*Qe(1,i));var o=n/this.radius_p;if(s=i*i+o*o+t*t,a=2*this.radius_g*t,r=a*a-4*s*this.C,r<0)return e.x=Number.NaN,e.y=Number.NaN,e;l=(-a-Math.sqrt(r))/(2*s),t=this.radius_g+l*t,i*=l,n*=l,e.x=Math.atan2(i,t),e.y=Math.atan(n*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+n*n)):(i=Math.tan(e.x/this.radius_g_1),n=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+i*i)),s=i*i+n*n+t*t,a=2*this.radius_g*t,r=a*a-4*s*this.C,r<0)return e.x=Number.NaN,e.y=Number.NaN,e;l=(-a-Math.sqrt(r))/(2*s),t=this.radius_g+l*t,i*=l,n*=l,e.x=Math.atan2(i,t),e.y=Math.atan(n*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var Q6=["Geostationary Satellite View","Geostationary_Satellite","geos"];const J6={init:V6,forward:K6,inverse:W6,names:Q6};var so=1.340264,ao=-.081106,ro=893e-6,lo=.003796,Qu=Math.sqrt(3)/2;function $6(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function tT(e){var t=X(e.x-this.long0,this.over),i=e.y,n=Math.asin(Qu*Math.sin(i)),s=n*n,a=s*s*s;return e.x=t*Math.cos(n)/(Qu*(so+3*ao*s+a*(7*ro+9*lo*s))),e.y=n*(so+ao*s+a*(ro+lo*s)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function eT(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,i=12,n=e.y,s,a,r,l,o,h;for(h=0;h<i&&(s=n*n,a=s*s*s,r=n*(so+ao*s+a*(ro+lo*s))-e.y,l=so+3*ao*s+a*(7*ro+9*lo*s),n-=o=r/l,!(Math.abs(o)<t));++h);return s=n*n,a=s*s*s,e.x=Qu*e.x*(so+3*ao*s+a*(7*ro+9*lo*s))/Math.cos(n),e.y=Math.asin(Math.sin(n)/Qu),e.x=X(e.x+this.long0,this.over),e}var iT=["eqearth","Equal Earth","Equal_Earth"];const nT={init:$6,forward:tT,inverse:eT,names:iT};var Ao=1e-10;function sT(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<Ao)throw new Error;this.es?(this.en=e_(this.es),this.m1=rl(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=rT,this.forward=aT):(Math.abs(this.phi1)+Ao>=j?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=oT,this.forward=lT)}function aT(e){var t=X(e.x-(this.long0||0),this.over),i=e.y,n,s,a;return n=this.am1+this.m1-rl(i,s=Math.sin(i),a=Math.cos(i),this.en),s=a*t/(n*Math.sqrt(1-this.es*s*s)),e.x=n*Math.sin(s),e.y=this.am1-n*Math.cos(s),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function rT(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,i,n,s;if(i=Qe(e.x,e.y=this.am1-e.y),s=i_(this.am1+this.m1-i,this.es,this.en),(t=Math.abs(s))<j)t=Math.sin(s),n=i*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(s);else if(Math.abs(t-j)<=Ao)n=0;else throw new Error;return e.x=X(n+(this.long0||0),this.over),e.y=Ys(s),e}function lT(e){var t=X(e.x-(this.long0||0),this.over),i=e.y,n,s;return s=this.cphi1+this.phi1-i,Math.abs(s)>Ao?(e.x=s*Math.sin(n=t*Math.cos(i)/s),e.y=this.cphi1-s*Math.cos(n)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function oT(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,i,n=Qe(e.x,e.y=this.cphi1-e.y);if(i=this.cphi1+this.phi1-n,Math.abs(i)>j)throw new Error;return Math.abs(Math.abs(i)-j)<=Ao?t=0:t=n*Math.atan2(e.x,e.y)/Math.cos(i),e.x=X(t+(this.long0||0),this.over),e.y=Ys(i),e}var hT=["bonne","Bonne (Werner lat_1=90)"];const uT={init:sT,names:hT},ny={OBLIQUE:{forward:_T,inverse:yT},TRANSVERSE:{forward:mT,inverse:pT}},Ju={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function cT(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=OE.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const e=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),t=ji(e);if(!t)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);t.long0=0,this.obliqueProjection=t;let i;const n=Object.keys(Ju),s=l=>{if(typeof this[l]>"u")return;const o=parseFloat(this[l])*te;if(isNaN(o))throw new Error("Invalid value for "+l+": "+this[l]);return o};for(let l=0;l<n.length;l++){const o=n[l],h=Ju[o],u=Object.entries(h);if(u.some(([c])=>typeof this[c]<"u")){i=h;for(let c=0;c<u.length;c++){const[d,g]=u[c],y=s(d);if(typeof y>"u")throw new Error("Missing parameter: "+d+".");this[g]=y}break}}if(!i)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:a,phip:r}=gT(this,i);this.lamp=a,Math.abs(r)>k?(this.cphip=Math.cos(r),this.sphip=Math.sin(r),this.projectionType=ny.OBLIQUE):this.projectionType=ny.TRANSVERSE}function fT(e){return this.projectionType.forward(this,e)}function dT(e){return this.projectionType.inverse(this,e)}function gT(e,t){let i,n;if(t===Ju.ROTATE){let s=e.oLongC,a=e.oLatC,r=e.oAlpha;if(Math.abs(Math.abs(a)-j)<=k)throw new Error("Invalid value for o_lat_c: "+e.o_lat_c+" should be < 90");n=s+Math.atan2(-1*Math.cos(r),-1*Math.sin(r)*Math.sin(a)),i=Math.asin(Math.cos(a)*Math.sin(r))}else if(t===Ju.NEW_POLE)n=e.oLongP,i=e.oLatP;else{let s=e.oLong1,a=e.oLat1,r=e.oLong2,l=e.oLat2,o=Math.abs(a);if(Math.abs(a)>j-k)throw new Error("Invalid value for o_lat_1: "+e.o_lat_1+" should be < 90");if(Math.abs(l)>j-k)throw new Error("Invalid value for o_lat_2: "+e.o_lat_2+" should be < 90");if(Math.abs(a-l)<k)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(o<k)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");n=Math.atan2(Math.cos(a)*Math.sin(l)*Math.cos(s)-Math.sin(a)*Math.cos(l)*Math.cos(r),Math.sin(a)*Math.cos(l)*Math.sin(r)-Math.cos(a)*Math.sin(l)*Math.sin(s)),i=Math.atan(-1*Math.cos(n-s)/Math.tan(a))}return{lamp:n,phip:i}}function _T(e,t){let{x:i,y:n}=t;i+=e.long0;const s=Math.cos(i),a=Math.sin(n),r=Math.cos(n);t.x=X(Math.atan2(r*Math.sin(i),e.sphip*r*s+e.cphip*a)+e.lamp),t.y=Math.asin(e.sphip*a-e.cphip*r*s);const l=e.obliqueProjection.forward(t);return e.isIdentity&&(l.x*=ti,l.y*=ti),l}function mT(e,t){let{x:i,y:n}=t;i+=e.long0;const s=Math.cos(n),a=Math.cos(i);t.x=X(Math.atan2(s*Math.sin(i),Math.sin(n))+e.lamp),t.y=Math.asin(-1*s*a);const r=e.obliqueProjection.forward(t);return e.isIdentity&&(r.x*=ti,r.y*=ti),r}function yT(e,t){e.isIdentity&&(t.x*=te,t.y*=te);const i=e.obliqueProjection.inverse(t);let{x:n,y:s}=i;if(n<Number.MAX_VALUE){n-=e.lamp;const a=Math.cos(n),r=Math.sin(s),l=Math.cos(s);t.x=Math.atan2(l*Math.sin(n),e.sphip*l*a-e.cphip*r),t.y=Math.asin(e.sphip*r+e.cphip*l*a)}return t.x=X(t.x+e.long0),t}function pT(e,t){e.isIdentity&&(t.x*=te,t.y*=te);const i=e.obliqueProjection.inverse(t);let{x:n,y:s}=i;if(n<Number.MAX_VALUE){const a=Math.cos(s);n-=e.lamp,t.x=Math.atan2(a*Math.sin(n),-1*Math.sin(s)),t.y=Math.asin(a*Math.cos(n))}return t.x=X(t.x+e.long0),t}var vT=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const ET={init:cT,forward:fT,inverse:dT,names:vT};function xT(e){e.Proj.projections.add(cu),e.Proj.projections.add(fu),e.Proj.projections.add(hC),e.Proj.projections.add(pC),e.Proj.projections.add(MC),e.Proj.projections.add(RC),e.Proj.projections.add(DC),e.Proj.projections.add(FC),e.Proj.projections.add(YC),e.Proj.projections.add(KC),e.Proj.projections.add(o8),e.Proj.projections.add(g8),e.Proj.projections.add(v8),e.Proj.projections.add(w8),e.Proj.projections.add(O8),e.Proj.projections.add(I8),e.Proj.projections.add(U8),e.Proj.projections.add(q8),e.Proj.projections.add(Q8),e.Proj.projections.add(i6),e.Proj.projections.add(l6),e.Proj.projections.add(f6),e.Proj.projections.add(v6),e.Proj.projections.add(b6),e.Proj.projections.add(A6),e.Proj.projections.add(z6),e.Proj.projections.add(B6),e.Proj.projections.add(Z6),e.Proj.projections.add(J6),e.Proj.projections.add(nT),e.Proj.projections.add(uT),e.Proj.projections.add(ET)}const Pc=Object.assign(Cw,{defaultDatum:"WGS84",Proj:ji,WGS84:new ji("WGS84"),Point:kr,toPoint:PE,defs:we,nadgrid:ow,transform:Vu,mgrs:Tw,version:"__VERSION__"});xT(Pc);var VE,sy=()=>new DecompressionStream("deflate-raw");try{sy(),VE=async e=>{let t=sy(),i=t.writable.getWriter(),n=t.readable.getReader(),s,a=[],r=0,l=0,o;for(i.write(e),i.close();!(o=await n.read()).done;)s=o.value,a.push(s),r+=s.length;return!a[1]&&s||(s=new Uint8Array(r),a.map(h=>(s.set(h,l),l+=h.length))),s}}catch{}var ST=new TextDecoder,Jf=e=>{throw new Error("but-unzip~"+e)},ay=e=>ST.decode(e);function*MT(e,t=VE){let i=e.length-20,n=Math.max(i-65516,2);for(;(i=e.lastIndexOf(80,i-1))!==-1&&!(e[i+1]===75&&e[i+2]===5&&e[i+3]===6)&&i>n;);i===-1&&Jf(2);let s=(h,u)=>e.subarray(i+=h,i+=u),a=new DataView(e.buffer,e.byteOffset),r=h=>a.getUint16(h+i,!0),l=h=>a.getUint32(h+i,!0),o=r(10);for(o!==r(8)&&Jf(3),i=l(16);o--;){let h=r(10),u=r(30),f=r(32),c=l(20),d=l(42),g=ay(s(46,r(28))),y=ay(s(u,f)),v=i,_;i=d,_=s(30+r(26)+r(28),c),yield{filename:g,comment:y,read:()=>h&8?t(_):h?Jf(1):_},i=v}}const bT=/.+\.(shp|dbf|json|prj|cpg)$/i,wT=async e=>{const t={},i=[];for(const a of MT(e))bT.test(a.filename)&&i.push(Promise.resolve(a.read()).then(r=>t[a.filename]=r));await Promise.all(i);const n={},s=new TextDecoder;for(const[a,r]of Object.entries(t))a.slice(-3).toLowerCase()==="shp"||a.slice(-3).toLowerCase()==="dbf"?n[a]=new DataView(r.buffer,r.byteOffset,r.byteLength):n[a]=s.decode(r);return n},CT=globalThis.URL,TT=(e,t)=>{if(!t)return e;const i=new CT(e);return i.pathname=`${i.pathname}.${t}`,i.href};async function Oo(e,t){const i=TT(e,t),n=t==="prj"||t==="cpg";try{const s=await fetch(i);if(s.status>399)throw new Error(s.statusText);if(n)return s.text();const a=await s.arrayBuffer();return new DataView(a)}catch(s){if(n||t==="dbf")return!1;throw s}}function RT(e){let t=0,i=1;const n=e.length;let s,a;const r=[e[0][0],e[0][1],e[0][0],e[0][1]];for(;i<n;)s=a||e[0],a=e[i],t+=(a[0]-s[0])*(a[1]+s[1]),i++,a[0]<r[0]&&(r[0]=a[0]),a[1]<r[1]&&(r[1]=a[1]),a[0]>r[2]&&(r[2]=a[0]),a[1]>r[3]&&(r[3]=a[1]);return{ring:e,clockWise:t>0,bbox:r,children:[]}}function ry(e,t){return!(e.bbox[0]>t.bbox[0]||e.bbox[1]>t.bbox[1]||e.bbox[2]<t.bbox[2]||e.bbox[3]<t.bbox[3])}function KE(e,t=!1){const i=[],n=[];for(const r of e){const l=RT(r);l.clockWise!==t?i.push(l):n.push(l)}const s=[];for(const r of n){let l;for(const o of i)ry(o,r)&&(l?ry(l,o)&&(l=o):l=o);l?l.children.push(r.ring):s.push(r)}if(t)return{outers:i,orphens:s};if(s.length&&!t){const r=KE(e,!0);if(r.orphens.length===0){const l=[];for(const o of r.outers)l.push([o.ring.toReversed()].concat(o.children.map(h=>h.toReversed())));return l}}const a=[];for(const r of i)a.push([r.ring].concat(r.children));return a}re.prototype.parsePoint=function(e){return{type:"Point",coordinates:this.parseCoord(e,0)}};re.prototype.parseZPoint=function(e){const t=this.parsePoint(e);return t.coordinates.push(e.getFloat64(16,!0)),t};re.prototype.parsePointArray=function(e,t,i){const n=[];let s=0;for(;s<i;)n.push(this.parseCoord(e,t)),t+=16,s++;return n};re.prototype.parseZPointArray=function(e,t,i,n){let s=0;for(;s<i;)n[s].push(e.getFloat64(t,!0)),s++,t+=8;return n};re.prototype.parseArrayGroup=function(e,t,i,n,s){const a=[];let r=0,l,o=0,h;for(;r<n;)r++,i+=4,l=o,r===n?o=s:o=e.getInt32(i,!0),h=o-l,h&&(a.push(this.parsePointArray(e,t,h)),t+=h<<4);return a};re.prototype.parseZArrayGroup=function(e,t,i,n){let s=0;for(;s<i;)n[s]=this.parseZPointArray(e,t,n[s].length,n[s]),t+=n[s].length<<3,s++;return n};re.prototype.parseMultiPoint=function(e){const t={},i=e.getInt32(32,!0);if(!i)return null;const n=this.parseCoord(e,0),s=this.parseCoord(e,16);t.bbox=[n[0],n[1],s[0],s[1]];const a=36;return i===1?(t.type="Point",t.coordinates=this.parseCoord(e,a)):(t.type="MultiPoint",t.coordinates=this.parsePointArray(e,a,i)),t};re.prototype.parseZMultiPoint=function(e){const t=this.parseMultiPoint(e);if(!t)return null;let i;if(t.type==="Point")return t.coordinates.push(e.getFloat64(72,!0)),t;i=t.coordinates.length;const n=52+(i<<4);return t.coordinates=this.parseZPointArray(e,n,i,t.coordinates),t};re.prototype.parsePolyline=function(e){const t={},i=e.getInt32(32,!0);if(!i)return null;const n=this.parseCoord(e,0),s=this.parseCoord(e,16);t.bbox=[n[0],n[1],s[0],s[1]];const a=e.getInt32(36,!0);let r,l;return i===1?(t.type="LineString",r=44,t.coordinates=this.parsePointArray(e,r,a)):(t.type="MultiLineString",r=40+(i<<2),l=40,t.coordinates=this.parseArrayGroup(e,r,l,i,a)),t};re.prototype.parseZPolyline=function(e){const t=this.parsePolyline(e);if(!t)return null;const i=t.coordinates.length;let n;return t.type==="LineString"?(n=60+(i<<4),t.coordinates=this.parseZPointArray(e,n,i,t.coordinates),t):(n=56+(t.coordinates.reduce(function(a,r){return a+r.length},0)<<4)+(i<<2),t.coordinates=this.parseZArrayGroup(e,n,i,t.coordinates),t)};re.prototype.polyFuncs=function(e){return e&&(e.type==="LineString"?(e.type="Polygon",e.coordinates=[e.coordinates],e):(e.coordinates=KE(e.coordinates),e.coordinates.length===1?(e.type="Polygon",e.coordinates=e.coordinates[0],e):(e.type="MultiPolygon",e)))};re.prototype.parsePolygon=function(e){return this.polyFuncs(this.parsePolyline(e))};re.prototype.parseZPolygon=function(e){return this.polyFuncs(this.parseZPolyline(e))};const ly={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function AT(e){return e?function(t,i){const n=[t.getFloat64(i,!0),t.getFloat64(i+8,!0)];return e.inverse(n)}:function(t,i){return[t.getFloat64(i,!0),t.getFloat64(i+8,!0)]}}function re(e,t){if(!(this instanceof re))return new re(e,t);this.buffer=e,this.headers=this.parseHeader(),this.shpFuncs(t),this.rows=this.getRows()}re.prototype.shpFuncs=function(e){let t=this.headers.shpCode;if(t>20&&(t-=20),!(t in ly))throw new Error(`I don't know shp type "${t}"`);this.parseFunc=this[ly[t]],this.parseCoord=AT(e)};re.prototype.getShpCode=function(){return this.parseHeader().shpCode};re.prototype.parseHeader=function(){const e=this.buffer;return{length:e.getInt32(24)<<1,version:e.getInt32(28,!0),shpCode:e.getInt32(32,!0),bbox:[e.getFloat64(36,!0),e.getFloat64(44,!0),e.getFloat64(52,!0),e.getFloat64(60,!0)]}};re.prototype.getRows=function(){let e=100;const t=this.buffer.byteLength-8,i=[];let n;for(;e<=t&&(n=this.getRow(e),!!n);)e+=8,e+=n.len,n.type?i.push(this.parseFunc(n.data)):i.push(null);return i};re.prototype.getRow=function(e){const t=this.buffer.getInt32(e),i=this.buffer.getInt32(e+4)<<1;if(i===0)return{id:t,len:i,type:0};if(!(e+i+8>this.buffer.byteLength))return{id:t,len:i,data:new DataView(this.buffer.buffer,this.buffer.byteOffset+e+12,i-4),type:this.buffer.getInt32(e+8,!0)}};function o_(e,t){return new re(e,t).rows}var OT=/^(?:ANSI\s)?(\d+)$/m;function WE(e,t){if(!e)return n;try{new TextDecoder(e.trim())}catch{var i=OT.exec(e);return i&&!t?WE("windows-"+i[1],!0):(e=void 0,n)}return n;function n(s){var a=new TextDecoder(e||void 0),r=a.decode(s,{stream:!0})+a.decode();return r.replace(/\0/g,"").trim()}}function LT(e){var t={};return t.lastUpdated=new Date(e.getUint8(1)+1900,e.getUint8(2),e.getUint8(3)),t.records=e.getUint32(4,!0),t.headerLen=e.getUint16(8,!0),t.recLen=e.getUint16(10,!0),t}function NT(e,t,i){for(var n=[],s=32;s<t&&(n.push({name:i(new Uint8Array(e.buffer.slice(e.byteOffset+s,e.byteOffset+s+11))),dataType:String.fromCharCode(e.getUint8(s+11)),len:e.getUint8(s+16),decimal:e.getUint8(s+17)}),e.getUint8(s+32)!==13);)s+=32;return n}function GT(e,t,i,n,s){const a=new Uint8Array(e.buffer.slice(e.byteOffset+t,e.byteOffset+t+i));var r=s(a);switch(n){case"N":case"F":case"O":return parseFloat(r,10);case"D":return new Date(r.slice(0,4),parseInt(r.slice(4,6),10)-1,r.slice(6,8));case"L":return r.toLowerCase()==="y"||r.toLowerCase()==="t";default:return r}}function DT(e,t,i,n){for(var s={},a=0,r=i.length,l,o;a<r;)o=i[a],l=GT(e,t,o.len,o.dataType,n),t+=o.len,typeof l<"u"&&(s[o.name]=l),a++;return s}function h_(e,t){for(var i=WE(t),n=LT(e),s=NT(e,n.headerLen-1,i),a=(s.length+1<<5)+2,r=n.recLen,l=n.records,o=[];l;)o.push(DT(e,a,s,i)),a+=r,l--;return o}const IT=globalThis.URL,PT=e=>{if(!e)throw new Error("forgot to pass buffer");if(Br(e))return new Uint8Array(e);if(Br(e.buffer))return e.BYTES_PER_ELEMENT===1?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("invalid buffer like object")},zT=new TextDecoder,QE=e=>{if(e){if(typeof e=="string")return e;if(Br(e)||ArrayBuffer.isView(e)||u_(e))return zT.decode(e)}},JE=e=>{if(!e)throw new Error("forgot to pass buffer");if(u_(e))return e;if(Br(e))return new DataView(e);if(Br(e.buffer))return new DataView(e.buffer,e.byteOffset,e.byteLength);throw new Error("invalid buffer like object")};function Br(e){return e instanceof globalThis.ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]"}function u_(e){return e instanceof globalThis.DataView||Object.prototype.toString.call(e)==="[object DataView]"}const c_=function([e,t]){const i={};i.type="FeatureCollection",i.features=[];let n=0;const s=e.length;for(t||(t=[]);n<s;)i.features.push({type:"Feature",geometry:e[n],properties:t[n]||{}}),n++;return i},$E=async function(e,t){let i;e=PT(e);const n=await wT(e),s=[];t=t||[];for(i in n)i.indexOf("__MACOSX")===-1&&(i.slice(-4).toLowerCase()===".shp"?(s.push(i.slice(0,-4)),n[i.slice(0,-3)+i.slice(-3).toLowerCase()]=n[i]):i.slice(-4).toLowerCase()===".prj"?n[i.slice(0,-3)+i.slice(-3).toLowerCase()]=Pc(n[i]):i.slice(-5).toLowerCase()===".json"||t.indexOf(i.split(".").pop())>-1?s.push(i.slice(0,-3)+i.slice(-3).toLowerCase()):(i.slice(-4).toLowerCase()===".dbf"||i.slice(-4).toLowerCase()===".cpg")&&(n[i.slice(0,-3)+i.slice(-3).toLowerCase()]=n[i]));if(!s.length)throw new Error("no layers founds");const a=s.map(function(r){let l,o;const h=r.lastIndexOf(".");return h>-1&&r.slice(h).indexOf("json")>-1?(l=JSON.parse(n[r]),l.fileName=r.slice(0,h)):t.indexOf(r.slice(h+1))>-1?(l=n[r],l.fileName=r):(n[r+".dbf"]&&(o=h_(n[r+".dbf"],n[r+".cpg"])),l=c_([o_(n[r+".shp"],n[r+".prj"]),o]),l.fileName=r),l});return a.length===1?a[0]:a};async function jT(e,t){const i=await Oo(e);return $E(i,t)}const FT=async e=>{const t=await Promise.all([Oo(e,"shp"),Oo(e,"prj")]);let i=!1;try{t[1]&&(i=Pc(t[1]))}catch{i=!1}return o_(t[0],i)},UT=async e=>{const[t,i]=await Promise.all([Oo(e,"dbf"),Oo(e,"cpg")]);if(t)return h_(t,i)},oy=(e,t)=>{var n;return new IT(e,(n=globalThis==null?void 0:globalThis.document)==null?void 0:n.location).pathname.slice(-4).toLowerCase()===t},kT=({shp:e,dbf:t,cpg:i,prj:n})=>{const s=[XT(e,n)];return t&&s.push(YT(t,i)),c_(s)},BT=async function(e,t){if(typeof e!="string"){if(Br(e)||ArrayBuffer.isView(e)||u_(e))return $E(e);if(e.shp)return kT(e);throw new TypeError("must be a string, some sort of Buffer, or an object with at least a .shp property")}if(oy(e,".zip"))return jT(e,t);oy(e,".shp")&&(e=e.slice(0,-4));const i=await Promise.all([FT(e),UT(e)]);return c_(i)},XT=function(e,t){if(e=JE(e),t=QE(t),typeof t=="string")try{t=Pc(t)}catch{t=!1}return o_(e,t)},YT=function(e,t){return e=JE(e),t=QE(t),h_(e,t)},be=[];for(let e=0;e<256;++e)be.push((e+256).toString(16).slice(1));function qT(e,t=0){return(be[e[t+0]]+be[e[t+1]]+be[e[t+2]]+be[e[t+3]]+"-"+be[e[t+4]]+be[e[t+5]]+"-"+be[e[t+6]]+be[e[t+7]]+"-"+be[e[t+8]]+be[e[t+9]]+"-"+be[e[t+10]]+be[e[t+11]]+be[e[t+12]]+be[e[t+13]]+be[e[t+14]]+be[e[t+15]]).toLowerCase()}let $f;const HT=new Uint8Array(16);function ZT(){if(!$f){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");$f=crypto.getRandomValues.bind(crypto)}return $f(HT)}const VT=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hy={randomUUID:VT};function KT(e,t,i){var s;e=e||{};const n=e.random??((s=e.rng)==null?void 0:s.call(e))??ZT();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,qT(n)}function WT(e,t,i){return hy.randomUUID&&!e?hy.randomUUID():KT(e)}const QT=e=>new Promise((t,i)=>{y3.parse(e,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,complete:n=>{n.errors.length>0&&console.warn("CSV Parse Errors:",n.errors);const s=n.data;if(!s||s.length===0){i(new Error("Empty CSV"));return}const a=Object.keys(s[0]),r=a.find(h=>/lat|latitude/i.test(h)),l=a.find(h=>/lon|lng|longitude/i.test(h));if(!r||!l){i(new Error("Could not detect Latitude/Longitude columns."));return}const o=s.map(h=>{const u=parseFloat(String(h[r]).replace(",",".")),f=parseFloat(String(h[l]).replace(",","."));return isNaN(u)||isNaN(f)?null:{type:"Feature",properties:h,geometry:{type:"Point",coordinates:[f,u]}}}).filter(h=>h!==null);t({type:"FeatureCollection",features:o,fileName:e.name})},error:n=>i(n)})}),JT=async e=>{const t=await e.arrayBuffer(),i=await BT(t);return Array.isArray(i)?{type:"FeatureCollection",features:i.flatMap(s=>s.features),fileName:e.name}:{...i,fileName:e.name}},uy=(e,t)=>({id:WT(),name:t||"New Layer",type:"vector",source:e,visible:!0,style:{color:"#"+Math.floor(Math.random()*16777215).toString(16),radius:6}}),$T=({isOpen:e,onClose:t,onAdd:i})=>{const[n,s]=dt.useState(""),[a,r]=dt.useState(""),[l,o]=dt.useState(!1),[h,u]=dt.useState(null);if(!e)return null;const f=async c=>{c.preventDefault(),o(!0),u(null);try{const d=await fetch(n);if(!d.ok)throw new Error("Failed to fetch GeoJSON");const g=await d.json();i(g,a||"New GeoJSON Layer"),t(),s(""),r("")}catch(d){u(d.message)}finally{o(!1)}};return C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 p-6",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Add GeoJSON from URL"}),C.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:C.jsx(Yu,{size:20})})]}),C.jsxs("form",{onSubmit:f,className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Layer Name"}),C.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"My Layer",value:a,onChange:c=>r(c.target.value),required:!0})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GeoJSON URL"}),C.jsx("input",{type:"url",className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/data.geojson",value:n,onChange:c=>s(c.target.value),required:!0})]}),h&&C.jsx("div",{className:"text-red-500 text-sm",children:h}),C.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[C.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),C.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:l?"Loading...":"Add Layer"})]})]})]})})},tR=({isOpen:e,onClose:t,onAdd:i,onEnableClickMode:n})=>{const[s,a]=dt.useState("address"),[r,l]=dt.useState(""),[o,h]=dt.useState(""),[u,f]=dt.useState(""),[c,d]=dt.useState(!1);if(!e)return null;const g=async()=>{if(r){d(!0);try{const _=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r)}`)).json();if(_&&_.length>0){const{lat:m,lon:p}=_[0];i({lat:parseFloat(m),lon:parseFloat(p)}),t()}else alert("Address not found")}catch{alert("Error searching address")}finally{d(!1)}}},y=()=>{const v=parseFloat(o),_=parseFloat(u);if(isNaN(v)||isNaN(_)){alert("Invalid coordinates");return}i({lat:v,lon:_}),t()};return C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-96",children:[C.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[C.jsx(Kb,{size:20,className:"text-blue-600"}),"Add Feature"]}),C.jsxs("div",{className:"flex gap-2 mb-4",children:[C.jsx("button",{className:`flex-1 py-1 text-sm rounded border ${s==="address"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300"}`,onClick:()=>a("address"),children:"Address"}),C.jsx("button",{className:`flex-1 py-1 text-sm rounded border ${s==="coords"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300"}`,onClick:()=>a("coords"),children:"Lat/Lon"})]}),s==="address"?C.jsx("div",{className:"space-y-3",children:C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Address"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"Search address...",value:r,onChange:v=>l(v.target.value),onKeyDown:v=>v.key==="Enter"&&g()}),C.jsx("button",{onClick:g,disabled:c,className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:C.jsx(i3,{size:16})})]})]})}):C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex gap-2",children:[C.jsxs("div",{className:"flex-1",children:[C.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Latitude"}),C.jsx("input",{type:"number",step:"any",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",value:o,onChange:v=>h(v.target.value)})]}),C.jsxs("div",{className:"flex-1",children:[C.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Longitude"}),C.jsx("input",{type:"number",step:"any",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",value:u,onChange:v=>f(v.target.value)})]})]}),C.jsx("button",{onClick:y,className:"w-full py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"Add Point"})]}),C.jsxs("div",{className:"relative my-4",children:[C.jsx("div",{className:"absolute inset-0 flex items-center",children:C.jsx("div",{className:"w-full border-t border-gray-200"})}),C.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:C.jsx("span",{className:"bg-white px-2 text-gray-500",children:"Or"})})]}),C.jsxs("button",{onClick:()=>{n(),t()},className:"w-full py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-50 text-sm flex items-center justify-center gap-2",children:[C.jsx(Jb,{size:16}),"Click on Map"]}),C.jsx("div",{className:"mt-4 flex justify-end",children:C.jsx("button",{onClick:t,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})})]})})},eR=({isOpen:e,onClose:t,layer:i})=>{var r;if(!e||!i)return null;const n=((r=i.source)==null?void 0:r.features)||[];if(n.length===0)return C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-96",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[C.jsx(x0,{size:20,className:"text-blue-600"}),i.name]}),C.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:C.jsx(Yu,{size:20})})]}),C.jsx("p",{className:"text-gray-500 text-center",children:"No features in this layer."})]})});const s=new Set;n.forEach(l=>{l.properties&&Object.keys(l.properties).forEach(o=>s.add(o))});const a=Array.from(s);return C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-3/4 h-3/4 flex flex-col",children:[C.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center bg-gray-50 rounded-t-lg",children:[C.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[C.jsx(x0,{size:20,className:"text-blue-600"}),i.name," ",C.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",n.length," features)"]})]}),C.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:C.jsx(Yu,{size:20})})]}),C.jsx("div",{className:"flex-1 overflow-auto p-4",children:C.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[C.jsx("thead",{className:"bg-gray-50",children:C.jsx("tr",{children:a.map(l=>C.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:l},l))})}),C.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((l,o)=>C.jsx("tr",{className:"hover:bg-gray-50",children:a.map(h=>{var u;return C.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 border-r border-gray-100 last:border-r-0",children:((u=l.properties)==null?void 0:u[h])!==void 0?String(l.properties[h]):"-"},h)})},o))})]})})]})})},iR=({x:e,y:t,layer:i,onClose:n,onAction:s})=>{const a=dt.useRef(null),[r,l]=dt.useState(!1),[o,h]=dt.useState(i.name);dt.useEffect(()=>{const c=d=>{a.current&&!a.current.contains(d.target)&&n()};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[n]);const u=(c,d)=>{d.stopPropagation(),s(c,i.id),c!=="rename"&&n()},f=c=>{c.preventDefault(),s("rename",i.id,o),n()};return r?C.jsx("div",{ref:a,className:"fixed bg-white border border-gray-200 shadow-xl rounded z-50 p-2 w-48",style:{top:t,left:e},onClick:c=>c.stopPropagation(),children:C.jsxs("form",{onSubmit:f,children:[C.jsx("input",{type:"text",value:o,onChange:c=>h(c.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm mb-2",autoFocus:!0}),C.jsxs("div",{className:"flex justify-end gap-2",children:[C.jsx("button",{type:"button",onClick:n,className:"text-xs text-gray-500 hover:text-gray-700",children:"Cancel"}),C.jsx("button",{type:"submit",className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"Save"})]})]})}):C.jsxs("div",{ref:a,className:"fixed bg-white border border-gray-200 shadow-xl rounded z-50 py-1 w-48",style:{top:t,left:e},children:[C.jsxs("button",{onClick:c=>u("zoom",c),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[C.jsx(xE,{size:14})," Zoom to Layer"]}),C.jsxs("button",{onClick:c=>u("toggle",c),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[i.visible?C.jsx(vE,{size:14}):C.jsx(EE,{size:14}),i.visible?"Hide Layer":"Show Layer"]}),C.jsxs("button",{onClick:c=>{c.stopPropagation(),l(!0)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[C.jsx(t3,{size:14})," Rename"]}),C.jsxs("button",{onClick:c=>u("addFeature",c),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[C.jsx(Db,{size:14})," Add Feature"]}),C.jsxs("button",{onClick:c=>u("viewTable",c),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[C.jsx(x0,{size:14})," View Table"]}),C.jsx("div",{className:"border-t border-gray-100 my-1"}),C.jsxs("button",{onClick:c=>u("moveUp",c),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[C.jsx(Nb,{size:14})," Move Up"]}),C.jsxs("button",{onClick:c=>u("moveDown",c),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[C.jsx(Ob,{size:14})," Move Down"]}),C.jsx("div",{className:"border-t border-gray-100 my-1"}),C.jsxs("button",{onClick:c=>u("delete",c),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[C.jsx(a3,{size:14})," Delete"]})]})},nR=()=>{const{layers:e,toggleLayerVisibility:t,removeLayer:i,reorderLayers:n,selectedLayerId:s,selectLayer:a,addLayer:r,triggerZoomToLayer:l,moveLayerUp:o,moveLayerDown:h,renameLayer:u,mapViewState:f,setProjectState:c,resetProject:d,createEmptyLayer:g,addFeatureToLayer:y,setInteractionMode:v}=br(),[_,m]=dt.useState(!1),[p,E]=dt.useState(!1),[M,T]=dt.useState(!1),[b,x]=dt.useState(null),[S,w]=dt.useState(null),A=dt.useRef(null),O=dt.useRef(null),P=dt.useRef(null),U=async(R,F)=>{const q=R.target.files[0];if(q)try{if(F==="project"){const _t=await q.text(),pt=JSON.parse(_t);pt.layers&&Array.isArray(pt.layers)?c(pt):alert("Invalid project file.");return}let H;if(F==="csv"?H=await QT(q):F==="shp"&&(H=await JT(q)),H){const _t=uy(H,H.fileName||"New Layer");r(_t)}}catch(H){alert(`Error importing file: ${H.message}`)}finally{R.target.value=""}},Z=()=>{const R={layers:e,mapViewState:f},F=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),q=URL.createObjectURL(F),H=document.createElement("a");H.href=q,H.download="minigis-project.json",document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(q)},L=()=>{window.confirm("Are you sure you want to create a new project? All unsaved changes will be lost.")&&d()},G=(R,F)=>{const q=uy(R,F);r(q)},D=(R,F)=>{R.preventDefault(),w({x:R.clientX,y:R.clientY,layerId:F.id})},z=R=>{if(b){const F={type:"Feature",properties:{id:crypto.randomUUID(),addedAt:new Date().toISOString()},geometry:{type:"Point",coordinates:[R.lon,R.lat]}};y(b,F)}},Y=()=>{b&&v("addPoint",b)},B=(R,F,q)=>{switch(R){case"zoom":l(F);break;case"toggle":t(F);break;case"delete":window.confirm("Are you sure you want to delete this layer?")&&i(F);break;case"moveUp":o(F);break;case"moveDown":h(F);break;case"rename":u(F,q);break;case"addFeature":x(F),E(!0);break;case"viewTable":x(F),T(!0);break}};return C.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col h-full shadow-lg z-10",children:[C.jsx($T,{isOpen:_,onClose:()=>m(!1),onAdd:G}),C.jsx(tR,{isOpen:p,onClose:()=>E(!1),onAdd:z,onEnableClickMode:Y}),C.jsx(eR,{isOpen:M,onClose:()=>T(!1),layer:e.find(R=>R.id===b)}),S&&C.jsx(iR,{x:S.x,y:S.y,layer:e.find(R=>R.id===S.layerId),onClose:()=>w(null),onAction:B}),C.jsx("input",{type:"file",ref:A,accept:".csv",className:"hidden",onChange:R=>U(R,"csv")}),C.jsx("input",{type:"file",ref:O,accept:".zip",className:"hidden",onChange:R=>U(R,"shp")}),C.jsx("input",{type:"file",ref:P,accept:".json",className:"hidden",onChange:R=>U(R,"project")}),C.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[C.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Tools"}),C.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[C.jsxs("button",{onClick:()=>A.current.click(),className:"flex flex-col items-center justify-center p-2 bg-white border border-gray-200 rounded hover:bg-blue-50 hover:border-blue-300 transition-colors group",children:[C.jsx(l3,{size:20,className:"text-gray-600 group-hover:text-blue-600 mb-1"}),C.jsx("span",{className:"text-xs text-gray-600 group-hover:text-blue-600",children:"CSV"})]}),C.jsxs("button",{onClick:()=>O.current.click(),className:"flex flex-col items-center justify-center p-2 bg-white border border-gray-200 rounded hover:bg-blue-50 hover:border-blue-300 transition-colors group",children:[C.jsx(Zb,{size:20,className:"text-gray-600 group-hover:text-blue-600 mb-1"}),C.jsx("span",{className:"text-xs text-gray-600 group-hover:text-blue-600",children:"Shapefile"})]}),C.jsxs("button",{onClick:()=>m(!0),className:"flex flex-col items-center justify-center p-2 bg-white border border-gray-200 rounded hover:bg-blue-50 hover:border-blue-300 transition-colors group",children:[C.jsx(Bb,{size:20,className:"text-gray-600 group-hover:text-blue-600 mb-1"}),C.jsx("span",{className:"text-xs text-gray-600 group-hover:text-blue-600",children:"GeoJSON"})]}),C.jsxs("button",{onClick:()=>g(),className:"flex flex-col items-center justify-center p-2 bg-white border border-gray-200 rounded hover:bg-blue-50 hover:border-blue-300 transition-colors group",children:[C.jsx(D1,{size:20,className:"text-gray-600 group-hover:text-blue-600 mb-1"}),C.jsx("span",{className:"text-xs text-gray-600 group-hover:text-blue-600",children:"Empty"})]})]}),C.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[C.jsxs("button",{onClick:L,className:"flex items-center justify-center gap-2 p-2 bg-red-50 border border-red-200 rounded hover:bg-red-100 transition-colors text-xs text-red-700",title:"New Project (Reset)",children:[C.jsx(D1,{size:14})," New"]}),C.jsxs("button",{onClick:Z,className:"flex items-center justify-center gap-2 p-2 bg-gray-100 border border-gray-200 rounded hover:bg-gray-200 transition-colors text-xs text-gray-700",children:[C.jsx(Pb,{size:14})," Export Project"]}),C.jsxs("button",{onClick:()=>P.current.click(),className:"flex items-center justify-center gap-2 p-2 bg-gray-100 border border-gray-200 rounded hover:bg-gray-200 transition-colors text-xs text-gray-700",children:[C.jsx(qb,{size:14})," Import Project"]})]})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[C.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Layers"}),e.length===0?C.jsxs("div",{className:"text-center text-gray-400 text-sm mt-10",children:["No layers added.",C.jsx("br",{}),"Use tools above to add data."]}):C.jsx("ul",{className:"space-y-2",children:e.map(R=>{var F;return C.jsxs("li",{className:`flex items-center justify-between p-3 rounded border cursor-pointer transition-colors ${s===R.id?"bg-blue-50 border-blue-300 ring-1 ring-blue-300":"bg-white border-gray-200 hover:border-gray-300"}`,onClick:()=>a(R.id),onContextMenu:q=>D(q,R),children:[C.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[C.jsx("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:((F=R.style)==null?void 0:F.color)||"#ccc"}}),C.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:R.name})]}),C.jsxs("div",{className:"flex items-center gap-1",children:[C.jsx("button",{onClick:q=>{q.stopPropagation(),l(R.id)},className:"p-1 text-gray-400 hover:text-blue-600 rounded hover:bg-blue-50",title:"Zoom to Layer",children:C.jsx(xE,{size:16})}),C.jsx("button",{onClick:q=>{q.stopPropagation(),t(R.id)},className:"p-1 text-gray-400 hover:text-gray-700 rounded hover:bg-gray-100",children:R.visible?C.jsx(EE,{size:16}):C.jsx(vE,{size:16})}),C.jsx("button",{onClick:q=>{q.stopPropagation(),D(q,R)},className:"p-1 text-gray-400 hover:text-gray-700 rounded hover:bg-gray-100",children:C.jsx(jb,{size:16})})]})]},R.id)})})]})]})},sR=()=>{var l,o,h,u,f,c,d,g,y,v,_,m;const{selectedLayerId:e,layers:t,selectedFeature:i,selectLayer:n,updateLayerStyle:s}=br(),a=t.find(p=>p.id===e);if(!a)return null;const r=(p,E)=>{s(e,{[p]:E})};return C.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col h-full shadow-lg z-10",children:[C.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[C.jsx("h2",{className:"font-semibold text-gray-700 truncate",children:a.name}),C.jsx("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-gray-700",children:C.jsx(Yu,{size:20})})]}),C.jsxs("div",{className:"p-4 border-b border-gray-200 space-y-4",children:[C.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Styling"}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Color (Point / Border)"}),C.jsx("div",{className:"flex gap-2",children:C.jsx("input",{type:"color",className:"h-8 w-full cursor-pointer rounded border border-gray-300",value:((l=a.style)==null?void 0:l.color)||"#3b82f6",onChange:p=>r("color",p.target.value)})})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Fill Color (Polygon)"}),C.jsx("div",{className:"flex gap-2",children:C.jsx("input",{type:"color",className:"h-8 w-full cursor-pointer rounded border border-gray-300",value:((o=a.style)==null?void 0:o.fillColor)||((h=a.style)==null?void 0:h.color)||"#3b82f6",onChange:p=>r("fillColor",p.target.value)})})]}),C.jsxs("div",{children:[C.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Opacity: ",Math.round((((u=a.style)==null?void 0:u.opacity)??1)*100),"%"]}),C.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:((f=a.style)==null?void 0:f.opacity)??1,onChange:p=>r("opacity",parseFloat(p.target.value)),className:"w-full"})]}),(()=>{var b,x,S,w,A,O,P;const p=(x=(b=a.source)==null?void 0:b.features)==null?void 0:x[0],E=(S=p==null?void 0:p.geometry)==null?void 0:S.type,M=E==="Point"||E==="MultiPoint",T=E==="Polygon"||E==="MultiPolygon";return M?C.jsxs("div",{children:[C.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Point Radius: ",((w=a.style)==null?void 0:w.radius)||6,"px"]}),C.jsx("input",{type:"range",min:"2",max:"20",value:((A=a.style)==null?void 0:A.radius)||6,onChange:U=>r("radius",parseInt(U.target.value)),className:"w-full"})]}):T?C.jsxs("div",{children:[C.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Border Width: ",((O=a.style)==null?void 0:O.borderWidth)||2,"px"]}),C.jsx("input",{type:"range",min:"1",max:"10",value:((P=a.style)==null?void 0:P.borderWidth)||2,onChange:U=>r("borderWidth",parseInt(U.target.value)),className:"w-full"})]}):null})(),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Icon Style"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("button",{className:`p-2 border rounded ${(c=a.style)!=null&&c.iconType?"bg-white":"bg-blue-50 border-blue-500"}`,onClick:()=>r("iconType",null),children:C.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"})}),C.jsx("button",{className:`p-2 border rounded ${((d=a.style)==null?void 0:d.iconType)==="icon"?"bg-blue-50 border-blue-500":"bg-white"}`,onClick:()=>r("iconType","icon"),children:C.jsx("img",{src:"https://openlayers.org/en/latest/examples/data/icon.png",className:"w-4 h-4",alt:"icon"})})]})]}),((g=a.style)==null?void 0:g.iconType)==="icon"&&C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Select Icon"}),C.jsxs("select",{className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",value:((y=a.style)==null?void 0:y.iconUrl)||"https://openlayers.org/en/latest/examples/data/icon.png",onChange:p=>r("iconUrl",p.target.value),children:[C.jsx("option",{value:"https://openlayers.org/en/latest/examples/data/icon.png",children:"Pin"}),C.jsx("option",{value:"https://upload.wikimedia.org/wikipedia/commons/8/88/Map_marker.svg",children:"Marker"}),C.jsx("option",{value:"https://upload.wikimedia.org/wikipedia/commons/e/ec/Red_dot.svg",children:"Red Dot"})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Label Field"}),C.jsxs("select",{className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",value:((v=a.style)==null?void 0:v.labelField)||"",onChange:p=>r("labelField",p.target.value),children:[C.jsx("option",{value:"",children:"None"}),(()=>{var E,M,T;const p=(i==null?void 0:i.properties)||((T=(M=(E=a.source)==null?void 0:E.features)==null?void 0:M[0])==null?void 0:T.properties)||{};return Object.keys(p).map(b=>C.jsx("option",{value:b,children:b},b))})()]})]}),((_=a.style)==null?void 0:_.labelField)&&C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Label Placement"}),C.jsxs("select",{className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",value:((m=a.style)==null?void 0:m.labelPlacement)||"top-right",onChange:p=>r("labelPlacement",p.target.value),children:[C.jsx("option",{value:"center",children:"Center"}),C.jsx("option",{value:"top",children:"Top"}),C.jsx("option",{value:"bottom",children:"Bottom"}),C.jsx("option",{value:"left",children:"Left"}),C.jsx("option",{value:"right",children:"Right"}),C.jsx("option",{value:"top-right",children:"Top Right"}),C.jsx("option",{value:"top-left",children:"Top Left"}),C.jsx("option",{value:"bottom-right",children:"Bottom Right"}),C.jsx("option",{value:"bottom-left",children:"Bottom Left"})]})]})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:[C.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Feature Attributes"}),i?C.jsx("div",{className:"space-y-2",children:Object.entries(i.properties||{}).map(([p,E])=>C.jsxs("div",{className:"bg-white p-2 rounded border border-gray-200",children:[C.jsx("div",{className:"text-xs text-gray-500 font-medium",children:p}),C.jsx("div",{className:"text-sm text-gray-800 break-words",children:String(E)})]},p))}):C.jsx("div",{className:"text-center text-gray-400 text-sm mt-10",children:"Select a feature on the map to view attributes."})]})]})},Ve={ADD:"add",REMOVE:"remove"},Xr={PROPERTYCHANGE:"propertychange"},st={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class zc{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function aR(e,t,i){let n,s;i=i||In;let a=0,r=e.length,l=!1;for(;a<r;)n=a+(r-a>>1),s=+i(e[n],t),s<0?a=n+1:(r=n,l=!s);return l?a:~a}function In(e,t){return e>t?1:e<t?-1:0}function rR(e,t){return e<t?1:e>t?-1:0}function f_(e,t,i){if(e[0]<=t)return 0;const n=e.length;if(t<=e[n-1])return n-1;if(typeof i=="function"){for(let s=1;s<n;++s){const a=e[s];if(a===t)return s;if(a<t)return i(t,e[s-1],a)>0?s-1:s}return n-1}if(i>0){for(let s=1;s<n;++s)if(e[s]<t)return s-1;return n-1}if(i<0){for(let s=1;s<n;++s)if(e[s]<=t)return s;return n-1}for(let s=1;s<n;++s){if(e[s]==t)return s;if(e[s]<t)return e[s-1]-t<t-e[s]?s-1:s}return n-1}function lR(e,t,i){for(;t<i;){const n=e[t];e[t]=e[i],e[i]=n,++t,--i}}function hn(e,t){const i=Array.isArray(t)?t:[t],n=i.length;for(let s=0;s<n;s++)e[e.length]=i[s]}function qs(e,t){const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}function oR(e,t,i){const n=t||In;return e.every(function(s,a){if(a===0)return!0;const r=n(e[a-1],s);return!(r>0||r===0)})}function Lo(){return!0}function jc(){return!1}function No(){}function tx(e){let t,i,n;return function(){const s=Array.prototype.slice.call(arguments);return(!i||this!==n||!qs(s,i))&&(n=this,i=s,t=e.apply(this,arguments)),t}}function hR(e){function t(){let i;try{i=e()}catch(n){return Promise.reject(n)}return i instanceof Promise?i:Promise.resolve(i)}return t()}function lh(e){for(const t in e)delete e[t]}function Ma(e){let t;for(t in e)return!1;return!t}class Zn{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Fc extends zc{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,i){if(!t||!i)return;const n=this.listeners_||(this.listeners_={}),s=n[t]||(n[t]=[]);s.includes(i)||s.push(i)}dispatchEvent(t){const i=typeof t=="string",n=i?t:t.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const a=i?new Zn(t):t;a.target||(a.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});n in r||(r[n]=0,l[n]=0),++r[n];let o;for(let h=0,u=s.length;h<u;++h)if("handleEvent"in s[h]?o=s[h].handleEvent(a):o=s[h].call(this,a),o===!1||a.propagationStopped){o=!1;break}if(--r[n]===0){let h=l[n];for(delete l[n];h--;)this.removeEventListener(n,No);delete r[n]}return o}disposeInternal(){this.listeners_&&lh(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,i){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const s=n.indexOf(i);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[s]=No,++this.pendingRemovals_[t]):(n.splice(s,1),n.length===0&&delete this.listeners_[t]))}}function vt(e,t,i,n,s){if(s){const r=i;i=function(l){return e.removeEventListener(t,i),r.call(n??this,l)}}else n&&n!==e&&(i=i.bind(n));const a={target:e,type:t,listener:i};return e.addEventListener(t,i),a}function $u(e,t,i,n){return vt(e,t,i,n,!0)}function Bt(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),lh(e))}class oh extends Fc{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(st.CHANGE)}getRevision(){return this.revision_}onInternal(t,i){if(Array.isArray(t)){const n=t.length,s=new Array(n);for(let a=0;a<n;++a)s[a]=vt(this,t[a],i);return s}return vt(this,t,i)}onceInternal(t,i){let n;if(Array.isArray(t)){const s=t.length;n=new Array(s);for(let a=0;a<s;++a)n[a]=$u(this,t[a],i)}else n=$u(this,t,i);return i.ol_key=n,n}unInternal(t,i){const n=i.ol_key;if(n)uR(n);else if(Array.isArray(t))for(let s=0,a=t.length;s<a;++s)this.removeEventListener(t[s],i);else this.removeEventListener(t,i)}}oh.prototype.on;oh.prototype.once;oh.prototype.un;function uR(e){if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)Bt(e[t]);else Bt(e)}function $(){throw new Error("Unimplemented abstract method.")}let cR=0;function xt(e){return e.ol_uid||(e.ol_uid=String(++cR))}class cy extends Zn{constructor(t,i,n){super(t),this.key=i,this.oldValue=n}}class dn extends oh{constructor(t){super(),this.on,this.once,this.un,xt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,i){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new cy(n,t,i)),n=Xr.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new cy(n,t,i))}addChangeListener(t,i){this.addEventListener(`change:${t}`,i)}removeChangeListener(t,i){this.removeEventListener(`change:${t}`,i)}set(t,i,n){const s=this.values_||(this.values_={});if(n)s[t]=i;else{const a=s[t];s[t]=i,a!==i&&this.notify(t,a)}}setProperties(t,i){for(const n in t)this.set(n,t[n],i)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,i){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],Ma(this.values_)&&(this.values_=null),i||this.notify(t,n)}}}const fy={LENGTH:"length"};class Ph extends Zn{constructor(t,i,n){super(t),this.element=i,this.index=n}}class Gi extends dn{constructor(t,i){if(super(),this.on,this.once,this.un,i=i||{},this.unique_=!!i.unique,this.array_=t??[],this.unique_)for(let n=1,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let i=0,n=t.length;i<n;++i)this.push(t[i]);return this}forEach(t){const i=this.array_;for(let n=0,s=i.length;n<s;++n)t(i[n],n,i)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(fy.LENGTH)}insertAt(t,i){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new Ph(Ve.ADD,i,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){const i=this.getLength();return this.insertAt(i,t),this.getLength()}remove(t){const i=this.array_;for(let n=0,s=i.length;n<s;++n)if(i[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Ph(Ve.REMOVE,i,t)),i}setAt(t,i){const n=this.getLength();if(t>=n){this.insertAt(t,i);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i,t);const s=this.array_[t];this.array_[t]=i,this.dispatchEvent(new Ph(Ve.REMOVE,s,t)),this.dispatchEvent(new Ph(Ve.ADD,i,t))}updateLength_(){this.set(fy.LENGTH,this.array_.length)}assertUnique_(t,i){const n=this.array_;for(let s=0,a=n.length;s<a;++s)if(n[s]===t&&s!==i)throw new Error("Duplicate item added to a unique collection")}}class Wa extends Zn{constructor(t,i,n){super(t),this.map=i,this.frameState=n!==void 0?n:null}}class is extends Wa{constructor(t,i,n,s,a,r){super(t,i,a),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=r}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const $t={SINGLECLICK:"singleclick",CLICK:st.CLICK,DBLCLICK:st.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ba=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",fR=ba.includes("safari")&&!ba.includes("chrom");fR&&(ba.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ba));const dR=ba.includes("webkit")&&!ba.includes("edge"),ex=ba.includes("macintosh"),gR=typeof devicePixelRatio<"u"?devicePixelRatio:1,di=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,ix=typeof Image<"u"&&Image.prototype.decode,nx=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}(),O0={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class _R extends Fc{constructor(t,i){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i===void 0?1:i,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=vt(n,O0.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=vt(n,O0.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(st.TOUCHMOVE,this.boundHandleTouchMove_,nx?{passive:!1}:!1)}emulateClick_(t){let i=new is($t.CLICK,this.map_,t);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new is($t.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new is($t.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const i=t,n=i.pointerId;if(i.type==$t.POINTERUP||i.type==$t.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==i.target){delete this.trackedTouches_[s];break}}else(i.type==$t.POINTERDOWN||i.type==$t.POINTERMOVE)&&(this.trackedTouches_[n]=i);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const i=new is($t.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Bt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const i=new is($t.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(vt(n,$t.POINTERMOVE,this.handlePointerMove_,this),vt(n,$t.POINTERUP,this.handlePointerUp_,this),vt(this.element_,$t.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(vt(this.element_.getRootNode(),$t.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const i=new is($t.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new is($t.POINTERMOVE,this.map_,t,i))}handleTouchMove_(t){const i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Bt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(st.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Bt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Bt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const ns={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ne={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},V={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Rt(e,t){if(!e)throw new Error(t)}const tc=1/0;class mR{constructor(t,i){this.priorityFunction_=t,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,lh(this.queuedElements_)}dequeue(){const t=this.elements_,i=this.priorities_,n=t[0];t.length==1?(t.length=0,i.length=0):(t[0]=t.pop(),i[0]=i.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(t){Rt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const i=this.priorityFunction_(t);return i!=tc?(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const i=this.elements_,n=this.priorities_,s=i.length,a=i[t],r=n[t],l=t;for(;t<s>>1;){const o=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),u=h<s&&n[h]<n[o]?h:o;i[t]=i[u],n[t]=n[u],t=u}i[t]=a,n[t]=r,this.siftDown_(l,t)}siftDown_(t,i){const n=this.elements_,s=this.priorities_,a=n[i],r=s[i];for(;i>t;){const l=this.getParentIndex_(i);if(s[l]>r)n[i]=n[l],s[i]=s[l],i=l;else break}n[i]=a,s[i]=r}reprioritize(){const t=this.priorityFunction_,i=this.elements_,n=this.priorities_;let s=0;const a=i.length;let r,l,o;for(l=0;l<a;++l)r=i[l],o=t(r),o==tc?delete this.queuedElements_[this.keyFunction_(r)]:(n[s]=o,i[s++]=r);i.length=s,n.length=s,this.heapify_()}}class yR extends mR{constructor(t,i){super(n=>t.apply(null,n),n=>n[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const i=super.enqueue(t);return i&&t[0].addEventListener(st.CHANGE,this.boundHandleTileChange_),i}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const i=t.target,n=i.getState();if(n===V.LOADED||n===V.ERROR||n===V.EMPTY){n!==V.ERROR&&i.removeEventListener(st.CHANGE,this.boundHandleTileChange_);const s=i.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,i){let n=0;for(;this.tilesLoading_<t&&n<i&&this.getCount()>0;){const s=this.dequeue()[0],a=s.getKey();s.getState()===V.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++n,s.load())}}}function pR(e,t,i,n,s){if(!e||!(i in e.wantedTiles)||!e.wantedTiles[i][t.getKey()])return tc;const a=e.viewState.center,r=n[0]-a[0],l=n[1]-a[1];return 65536*Math.log(s)+Math.sqrt(r*r+l*l)/s}const De={ANIMATING:0,INTERACTING:1},Yi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Wt(e,t,i){return Math.min(Math.max(e,t),i)}function vR(e,t,i,n,s,a){const r=s-i,l=a-n;if(r!==0||l!==0){const o=((e-i)*r+(t-n)*l)/(r*r+l*l);o>1?(i=s,n=a):o>0&&(i+=r*o,n+=l*o)}return da(e,t,i,n)}function da(e,t,i,n){const s=i-e,a=n-t;return s*s+a*a}function ER(e){const t=e.length;for(let n=0;n<t;n++){let s=n,a=Math.abs(e[n][n]);for(let l=n+1;l<t;l++){const o=Math.abs(e[l][n]);o>a&&(a=o,s=l)}if(a===0)return null;const r=e[s];e[s]=e[n],e[n]=r;for(let l=n+1;l<t;l++){const o=-e[l][n]/e[n][n];for(let h=n;h<t+1;h++)n==h?e[l][h]=0:e[l][h]+=o*e[n][h]}}const i=new Array(t);for(let n=t-1;n>=0;n--){i[n]=e[n][t]/e[n][n];for(let s=n-1;s>=0;s--)e[s][t]-=e[s][n]*i[n]}return i}function dy(e){return e*180/Math.PI}function Ls(e){return e*Math.PI/180}function ga(e,t){const i=e%t;return i*t<0?i+t:i}function hi(e,t,i){return e+i*(t-e)}function Uc(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}function zh(e,t){return Math.floor(Uc(e,t))}function jh(e,t){return Math.ceil(Uc(e,t))}function L0(e,t,i){if(e>=t&&e<i)return e;const n=i-t;return((e-t)%n+n)%n+t}function gy(e,t,i){return function(n,s,a,r,l){if(!n)return;if(!s&&!t)return n;const o=t?0:a[0]*s,h=t?0:a[1]*s,u=l?l[0]:0,f=l?l[1]:0;let c=e[0]+o/2+u,d=e[2]-o/2+u,g=e[1]+h/2+f,y=e[3]-h/2+f;c>d&&(c=(d+c)/2,d=c),g>y&&(g=(y+g)/2,y=g);let v=Wt(n[0],c,d),_=Wt(n[1],g,y);if(r&&i&&s){const m=30*s;v+=-m*Math.log(1+Math.max(0,c-n[0])/m)+m*Math.log(1+Math.max(0,n[0]-d)/m),_+=-m*Math.log(1+Math.max(0,g-n[1])/m)+m*Math.log(1+Math.max(0,n[1]-y)/m)}return[v,_]}}function xR(e){return e}const pe={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function _y(e){const t=ki();for(let i=0,n=e.length;i<n;++i)oo(t,e[i]);return t}function d_(e,t,i){return i?(i[0]=e[0]-t,i[1]=e[1]-t,i[2]=e[2]+t,i[3]=e[3]+t,i):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function sx(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function La(e,t,i){let n,s;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,i<e[1]?s=e[1]-i:e[3]<i?s=i-e[3]:s=0,n*n+s*s}function Yr(e,t){return g_(e,t[0],t[1])}function Pl(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function g_(e,t,i){return e[0]<=t&&t<=e[2]&&e[1]<=i&&i<=e[3]}function N0(e,t){const i=e[0],n=e[1],s=e[2],a=e[3],r=t[0],l=t[1];let o=pe.UNKNOWN;return r<i?o=o|pe.LEFT:r>s&&(o=o|pe.RIGHT),l<n?o=o|pe.BELOW:l>a&&(o=o|pe.ABOVE),o===pe.UNKNOWN&&(o=pe.INTERSECTING),o}function ki(){return[1/0,1/0,-1/0,-1/0]}function Fs(e,t,i,n,s){return s?(s[0]=e,s[1]=t,s[2]=i,s[3]=n,s):[e,t,i,n]}function hh(e){return Fs(1/0,1/0,-1/0,-1/0,e)}function ax(e,t){const i=e[0],n=e[1];return Fs(i,n,i,n,t)}function __(e,t,i,n,s){const a=hh(s);return lx(a,e,t,i,n)}function Go(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function rx(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function oo(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function lx(e,t,i,n,s){for(;i<n;i+=s)SR(e,t[i],t[i+1]);return e}function SR(e,t,i){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],i),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],i)}function ox(e,t){let i;return i=t(kc(e)),i||(i=t(Bc(e)),i)||(i=t(Xc(e)),i)||(i=t(Na(e)),i)?i:!1}function G0(e){let t=0;return Yc(e)||(t=Nt(e)*Ue(e)),t}function kc(e){return[e[0],e[1]]}function Bc(e){return[e[2],e[1]]}function Us(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function MR(e,t){let i;if(t==="bottom-left")i=kc(e);else if(t==="bottom-right")i=Bc(e);else if(t==="top-left")i=Na(e);else if(t==="top-right")i=Xc(e);else throw new Error("Invalid corner");return i}function D0(e,t,i,n,s){const[a,r,l,o,h,u,f,c]=hx(e,t,i,n);return Fs(Math.min(a,l,h,f),Math.min(r,o,u,c),Math.max(a,l,h,f),Math.max(r,o,u,c),s)}function hx(e,t,i,n){const s=t*n[0]/2,a=t*n[1]/2,r=Math.cos(i),l=Math.sin(i),o=s*r,h=s*l,u=a*r,f=a*l,c=e[0],d=e[1];return[c-o+f,d-h-u,c-o-f,d-h+u,c+o-f,d+h+u,c+o+f,d+h-u,c-o+f,d-h-u]}function Ue(e){return e[3]-e[1]}function _a(e,t,i){const n=i||ki();return Je(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):hh(n),n}function Na(e){return[e[0],e[3]]}function Xc(e){return[e[2],e[3]]}function Nt(e){return e[2]-e[0]}function Je(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Yc(e){return e[2]<e[0]||e[3]<e[1]}function bR(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function wR(e,t,i){let n=!1;const s=N0(e,t),a=N0(e,i);if(s===pe.INTERSECTING||a===pe.INTERSECTING)n=!0;else{const r=e[0],l=e[1],o=e[2],h=e[3],u=t[0],f=t[1],c=i[0],d=i[1],g=(d-f)/(c-u);let y,v;a&pe.ABOVE&&!(s&pe.ABOVE)&&(y=c-(d-h)/g,n=y>=r&&y<=o),!n&&a&pe.RIGHT&&!(s&pe.RIGHT)&&(v=d-(c-o)*g,n=v>=l&&v<=h),!n&&a&pe.BELOW&&!(s&pe.BELOW)&&(y=c-(d-l)/g,n=y>=r&&y<=o),!n&&a&pe.LEFT&&!(s&pe.LEFT)&&(v=d-(c-r)*g,n=v>=l&&v<=h)}return n}function ux(e,t){const i=t.getExtent(),n=Us(e);if(t.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const s=Nt(i),r=Math.floor((n[0]-i[0])/s)*s;e[0]-=r,e[2]-=r}return e}function cx(e,t,i){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[n[0],e[1],n[2],e[3]]];ux(e,t);const s=Nt(n);if(Nt(e)>s&&!i)return[[n[0],e[1],n[2],e[3]]];if(e[0]<n[0])return[[e[0]+s,e[1],n[2],e[3]],[n[0],e[1],e[2],e[3]]];if(e[2]>n[2])return[[e[0],e[1],n[2],e[3]],[n[0],e[1],e[2]-s,e[3]]]}return[e]}function CR(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function ec(e,t){let i=!0;for(let n=e.length-1;n>=0;--n)if(e[n]!=t[n]){i=!1;break}return i}function m_(e,t){const i=Math.cos(t),n=Math.sin(t),s=e[0]*i-e[1]*n,a=e[1]*i+e[0]*n;return e[0]=s,e[1]=a,e}function TR(e,t){return e[0]*=t,e[1]*=t,e}function fx(e,t){if(t.canWrapX()){const i=Nt(t.getExtent()),n=RR(e,t,i);n&&(e[0]-=n*i)}return e}function RR(e,t,i){const n=t.getExtent();let s=0;return t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])&&(i=i||Nt(n),s=Math.floor((e[0]-n[0])/i)),s}function dx(e){return Math.pow(e,3)}function ll(e){return 1-dx(1-e)}function AR(e){return 3*e*e-2*e*e*e}function OR(e){return e}const LR=63710088e-1;function my(e,t,i){i=i||LR;const n=Ls(e[1]),s=Ls(t[1]),a=(s-n)/2,r=Ls(t[0]-e[0])/2,l=Math.sin(a)*Math.sin(a)+Math.sin(r)*Math.sin(r)*Math.cos(n)*Math.cos(s);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function gx(...e){console.warn(...e)}const y_={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class p_{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||y_[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const uh=6378137,mr=Math.PI*uh,NR=[-mr,-mr,mr,mr],GR=[-180,-85,180,85],Fh=uh*Math.log(Math.tan(Math.PI/2));class Fa extends p_{constructor(t){super({code:t,units:"m",extent:NR,global:!0,worldExtent:GR,getPointResolution:function(i,n){return i/Math.cosh(n[1]/uh)}})}}const yy=[new Fa("EPSG:3857"),new Fa("EPSG:102100"),new Fa("EPSG:102113"),new Fa("EPSG:900913"),new Fa("http://www.opengis.net/def/crs/EPSG/0/3857"),new Fa("http://www.opengis.net/gml/srs/epsg.xml#3857")];function DR(e,t,i,n){const s=e.length;i=i>1?i:2,n=n??i,t===void 0&&(i>2?t=e.slice():t=new Array(s));for(let a=0;a<s;a+=n){t[a]=mr*e[a]/180;let r=uh*Math.log(Math.tan(Math.PI*(+e[a+1]+90)/360));r>Fh?r=Fh:r<-Fh&&(r=-Fh),t[a+1]=r}return t}function IR(e,t,i,n){const s=e.length;i=i>1?i:2,n=n??i,t===void 0&&(i>2?t=e.slice():t=new Array(s));for(let a=0;a<s;a+=n)t[a]=180*e[a]/mr,t[a+1]=360*Math.atan(Math.exp(e[a+1]/uh))/Math.PI-90;return t}const PR=6378137,py=[-180,-90,180,90],zR=Math.PI*PR/180;class Ks extends p_{constructor(t,i){super({code:t,units:"degrees",extent:py,axisOrientation:i,global:!0,metersPerUnit:zR,worldExtent:py})}}const vy=[new Ks("CRS:84"),new Ks("EPSG:4326","neu"),new Ks("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ks("urn:ogc:def:crs:OGC:2:84"),new Ks("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ks("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ks("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let I0={};function jR(e){return I0[e]||I0[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function FR(e,t){I0[e]=t}let Tr={};function Do(e,t,i){const n=e.getCode(),s=t.getCode();n in Tr||(Tr[n]={}),Tr[n][s]=i}function td(e,t){return e in Tr&&t in Tr[e]?Tr[e][t]:null}const ic=.9996,Fi=.00669438,qc=Fi*Fi,Hc=qc*Fi,sa=Fi/(1-Fi),Ey=Math.sqrt(1-Fi),qr=(1-Ey)/(1+Ey),_x=qr*qr,v_=_x*qr,E_=v_*qr,mx=E_*qr,yx=1-Fi/4-3*qc/64-5*Hc/256,UR=3*Fi/8+3*qc/32+45*Hc/1024,kR=15*qc/256+45*Hc/1024,BR=35*Hc/3072,XR=3/2*qr-27/32*v_+269/512*mx,YR=21/16*_x-55/32*E_,qR=151/96*v_-417/128*mx,HR=1097/512*E_,nc=6378137;function ZR(e,t,i){const n=e-5e5,r=(i.north?t:t-1e7)/ic/(nc*yx),l=r+XR*Math.sin(2*r)+YR*Math.sin(4*r)+qR*Math.sin(6*r)+HR*Math.sin(8*r),o=Math.sin(l),h=o*o,u=Math.cos(l),f=o/u,c=f*f,d=c*c,g=1-Fi*h,y=Math.sqrt(1-Fi*h),v=nc/y,_=(1-Fi)/g,m=sa*u**2,p=m*m,E=n/(v*ic),M=E*E,T=M*E,b=T*E,x=b*E,S=x*E,w=l-f/_*(M/2-b/24*(5+3*c+10*m-4*p-9*sa))+S/720*(61+90*c+298*m+45*d-252*sa-3*p);let A=(E-T/6*(1+2*c+m)+x/120*(5-2*m+28*c-3*p+8*sa+24*d))/u;return A=L0(A+Ls(px(i.number)),-Math.PI,Math.PI),[dy(A),dy(w)]}const xy=-80,Sy=84,VR=-180,KR=180;function WR(e,t,i){e=L0(e,VR,KR),t<xy?t=xy:t>Sy&&(t=Sy);const n=Ls(t),s=Math.sin(n),a=Math.cos(n),r=s/a,l=r*r,o=l*l,h=Ls(e),u=px(i.number),f=Ls(u),c=nc/Math.sqrt(1-Fi*s**2),d=sa*a**2,g=a*L0(h-f,-Math.PI,Math.PI),y=g*g,v=y*g,_=v*g,m=_*g,p=m*g,E=nc*(yx*n-UR*Math.sin(2*n)+kR*Math.sin(4*n)-BR*Math.sin(6*n)),M=ic*c*(g+v/6*(1-l+d)+m/120*(5-18*l+o+72*d-58*sa))+5e5;let T=ic*(E+c*r*(y/2+_/24*(5-l+9*d+4*d**2)+p/720*(61-58*l+o+600*d-330*sa)));return i.north||(T+=1e7),[M,T]}function px(e){return(e-1)*6-180+3}const QR=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function vx(e){let t=0;for(const s of QR){const a=e.match(s);if(a){t=parseInt(a[1]);break}}if(!t)return null;let i=0,n=!1;return t>32700&&t<32761?i=t-32700:t>32600&&t<32661&&(n=!0,i=t-32600),i?{number:i,north:n}:null}function My(e,t){return function(i,n,s,a){const r=i.length;s=s>1?s:2,a=a??s,n||(s>2?n=i.slice():n=new Array(r));for(let l=0;l<r;l+=a){const o=i[l],h=i[l+1],u=e(o,h,t);n[l]=u[0],n[l+1]=u[1]}return n}}function JR(e){return vx(e)?new p_({code:e,units:"m"}):null}function $R(e){const t=vx(e.getCode());return t?{forward:My(WR,t),inverse:My(ZR,t)}:null}const t5=[$R],e5=[JR];let P0=!0;function Ex(e){P0=!1}function x_(e,t){if(t!==void 0){for(let i=0,n=e.length;i<n;++i)t[i]=e[i];t=t}else t=e.slice();return t}function z0(e){FR(e.getCode(),e),Do(e,e,x_)}function i5(e){e.forEach(z0)}function ie(e){if(typeof e!="string")return e;const t=jR(e);if(t)return t;for(const i of e5){const n=i(e);if(n)return n}return null}function by(e,t,i,n){e=ie(e);let s;const a=e.getPointResolutionFunc();if(a)s=a(t,i);else{const r=e.getUnits();if(r=="degrees"&&!n||n=="degrees")s=t;else{const l=M_(e,ie("EPSG:4326"));if(!l&&r!=="degrees")s=t*e.getMetersPerUnit();else{let h=[i[0]-t/2,i[1],i[0]+t/2,i[1],i[0],i[1]-t/2,i[0],i[1]+t/2];h=l(h,h,2);const u=my(h.slice(0,2),h.slice(2,4)),f=my(h.slice(4,6),h.slice(6,8));s=(u+f)/2}const o=e.getMetersPerUnit();o!==void 0&&(s/=o)}}return s}function wy(e){i5(e),e.forEach(function(t){e.forEach(function(i){t!==i&&Do(t,i,x_)})})}function n5(e,t,i,n){e.forEach(function(s){t.forEach(function(a){Do(s,a,i),Do(a,s,n)})})}function S_(e,t){return e?typeof e=="string"?ie(e):e:ie(t)}function s5(e){return function(t,i,n,s){const a=t.length;n=n!==void 0?n:2,s=s??n,i=i!==void 0?i:new Array(a);for(let r=0;r<a;r+=s){const l=e(t.slice(r,r+n)),o=l.length;for(let h=0,u=s;h<u;++h)i[r+h]=h>=o?t[r+h]:l[h]}return i}}function a5(e,t){return Ex(),Zc(e,"EPSG:4326","EPSG:3857")}function r5(e,t){const i=Zc(e,"EPSG:3857","EPSG:4326"),n=i[0];return(n<-180||n>180)&&(i[0]=ga(n+180,360)-180),i}function ho(e,t){if(e===t)return!0;const i=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||M_(e,t)===x_)&&i}function M_(e,t){const i=e.getCode(),n=t.getCode();let s=td(i,n);if(s)return s;let a=null,r=null;for(const o of t5)a||(a=o(e)),r||(r=o(t));if(!a&&!r)return null;const l="EPSG:4326";if(r)if(a)s=ed(a.inverse,r.forward);else{const o=td(i,l);o&&(s=ed(o,r.forward))}else{const o=td(l,n);o&&(s=ed(a.inverse,o))}return s&&(z0(e),z0(t),Do(e,t,s)),s}function ed(e,t){return function(i,n,s,a){return n=e(i,n,s,a),t(n,n,s,a)}}function Io(e,t){const i=ie(e),n=ie(t);return M_(i,n)}function Zc(e,t,i){const n=Io(t,i);if(!n){const s=ie(t).getCode(),a=ie(i).getCode();throw new Error(`No transform available between ${s} and ${a}`)}return n(e,void 0,e.length)}function j0(e,t){return e}function bn(e,t){return P0&&!ec(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(P0=!1,gx("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function xx(e,t){return e}function ys(e,t){return e}function l5(){wy(yy),wy(vy),n5(vy,yy,DR,IR)}l5();new Array(6);function Wi(){return[1,0,0,1,0,0]}function o5(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ee(e,t){const i=t[0],n=t[1];return t[0]=e[0]*i+e[2]*n+e[4],t[1]=e[1]*i+e[3]*n+e[5],t}function Yn(e,t,i,n,s,a,r,l){const o=Math.sin(a),h=Math.cos(a);return e[0]=n*h,e[1]=s*o,e[2]=-n*o,e[3]=s*h,e[4]=r*n*h-l*n*o+t,e[5]=r*s*o+l*s*h+i,e}function Sx(e,t){const i=h5(t);Rt(i!==0,"Transformation matrix cannot be inverted");const n=t[0],s=t[1],a=t[2],r=t[3],l=t[4],o=t[5];return e[0]=r/i,e[1]=-s/i,e[2]=-a/i,e[3]=n/i,e[4]=(a*o-r*l)/i,e[5]=-(n*o-s*l)/i,e}function h5(e){return e[0]*e[3]-e[1]*e[2]}const u5=[1e5,1e5,1e5,1e5,2,2];function c5(e){return"matrix("+e.join(", ")+")"}function F0(e){return e.substring(7,e.length-1).split(",").map(parseFloat)}function f5(e,t){const i=F0(e),n=F0(t);for(let s=0;s<6;++s)if(Math.round((i[s]-n[s])*u5[s])!==0)return!1;return!0}function Ns(e,t,i,n,s,a,r){a=a||[],r=r||2;let l=0;for(let o=t;o<i;o+=n){const h=e[o],u=e[o+1];a[l++]=s[0]*h+s[2]*u+s[4],a[l++]=s[1]*h+s[3]*u+s[5];for(let f=2;f<r;f++)a[l++]=e[o+f]}return a&&a.length!=l&&(a.length=l),a}function Mx(e,t,i,n,s,a,r){r=r||[];const l=Math.cos(s),o=Math.sin(s),h=a[0],u=a[1];let f=0;for(let c=t;c<i;c+=n){const d=e[c]-h,g=e[c+1]-u;r[f++]=h+d*l-g*o,r[f++]=u+d*o+g*l;for(let y=c+2;y<c+n;++y)r[f++]=e[y]}return r&&r.length!=f&&(r.length=f),r}function d5(e,t,i,n,s,a,r,l){l=l||[];const o=r[0],h=r[1];let u=0;for(let f=t;f<i;f+=n){const c=e[f]-o,d=e[f+1]-h;l[u++]=o+s*c,l[u++]=h+a*d;for(let g=f+2;g<f+n;++g)l[u++]=e[g]}return l&&l.length!=u&&(l.length=u),l}function g5(e,t,i,n,s,a,r){r=r||[];let l=0;for(let o=t;o<i;o+=n){r[l++]=e[o]+s,r[l++]=e[o+1]+a;for(let h=o+2;h<o+n;++h)r[l++]=e[h]}return r&&r.length!=l&&(r.length=l),r}const Cy=Wi(),_5=[NaN,NaN];class bx extends dn{constructor(){super(),this.extent_=ki(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=tx((t,i,n)=>{if(!n)return this.getSimplifiedGeometry(i);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(i)})}simplifyTransformed(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)}clone(){return $()}closestPointXY(t,i,n,s){return $()}containsXY(t,i){return this.closestPointXY(t,i,_5,Number.MIN_VALUE)===0}getClosestPoint(t,i){return i=i||[NaN,NaN],this.closestPointXY(t[0],t[1],i,1/0),i}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return $()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&hh(i),this.extentRevision_=this.getRevision()}return bR(this.extent_,t)}rotate(t,i){$()}scale(t,i,n){$()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return $()}getType(){return $()}applyTransform(t){$()}intersectsExtent(t){return $()}translate(t,i){$()}transform(t,i){const n=ie(t),s=n.getUnits()=="tile-pixels"?function(a,r,l){const o=n.getExtent(),h=n.getWorldExtent(),u=Ue(h)/Ue(o);Yn(Cy,h[0],h[3],u,-u,0,0,0);const f=Ns(a,0,a.length,l,Cy,r),c=Io(n,i);return c?c(f,f,l):f}:Io(n,i);return this.applyTransform(s),this}}class Ga extends bx{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return __(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return $()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,i){this.stride=Ty(t),this.layout=t,this.flatCoordinates=i}setCoordinates(t,i){$()}setLayout(t,i,n){let s;if(t)s=Ty(t);else{for(let a=0;a<n;++a){if(i.length===0){this.layout="XY",this.stride=2;return}i=i[0]}s=i.length,t=Da(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,i){const n=this.getFlatCoordinates();if(n){const s=this.getStride();Mx(n,0,n.length,s,t,i,n),this.changed()}}scale(t,i,n){i===void 0&&(i=t),n||(n=Us(this.getExtent()));const s=this.getFlatCoordinates();if(s){const a=this.getStride();d5(s,0,s.length,a,t,i,n,s),this.changed()}}translate(t,i){const n=this.getFlatCoordinates();if(n){const s=this.getStride();g5(n,0,n.length,s,t,i,n),this.changed()}}}function Da(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function Ty(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}function m5(e,t,i){const n=e.getFlatCoordinates();if(!n)return null;const s=e.getStride();return Ns(n,0,n.length,s,t,i)}function wx(e,t,i,n){let s=0;const a=e[i-n],r=e[i-n+1];let l=0,o=0;for(;t<i;t+=n){const h=e[t]-a,u=e[t+1]-r;s+=o*h-l*u,l=h,o=u}return s/2}function Cx(e,t,i,n){let s=0;for(let a=0,r=i.length;a<r;++a){const l=i[a];s+=wx(e,t,l,n),t=l}return s}function y5(e,t,i,n){let s=0;for(let a=0,r=i.length;a<r;++a){const l=i[a];s+=Cx(e,t,l,n),t=l[l.length-1]}return s}function Ry(e,t,i,n,s,a,r){const l=e[t],o=e[t+1],h=e[i]-l,u=e[i+1]-o;let f;if(h===0&&u===0)f=t;else{const c=((s-l)*h+(a-o)*u)/(h*h+u*u);if(c>1)f=i;else if(c>0){for(let d=0;d<n;++d)r[d]=hi(e[t+d],e[i+d],c);r.length=n;return}else f=t}for(let c=0;c<n;++c)r[c]=e[f+c];r.length=n}function b_(e,t,i,n,s){let a=e[t],r=e[t+1];for(t+=n;t<i;t+=n){const l=e[t],o=e[t+1],h=da(a,r,l,o);h>s&&(s=h),a=l,r=o}return s}function w_(e,t,i,n,s){for(let a=0,r=i.length;a<r;++a){const l=i[a];s=b_(e,t,l,n,s),t=l}return s}function p5(e,t,i,n,s){for(let a=0,r=i.length;a<r;++a){const l=i[a];s=w_(e,t,l,n,s),t=l[l.length-1]}return s}function C_(e,t,i,n,s,a,r,l,o,h,u){if(t==i)return h;let f,c;if(s===0){if(c=da(r,l,e[t],e[t+1]),c<h){for(f=0;f<n;++f)o[f]=e[t+f];return o.length=n,c}return h}u=u||[NaN,NaN];let d=t+n;for(;d<i;)if(Ry(e,d-n,d,n,r,l,u),c=da(r,l,u[0],u[1]),c<h){for(h=c,f=0;f<n;++f)o[f]=u[f];o.length=n,d+=n}else d+=n*Math.max((Math.sqrt(c)-Math.sqrt(h))/s|0,1);if(a&&(Ry(e,i-n,t,n,r,l,u),c=da(r,l,u[0],u[1]),c<h)){for(h=c,f=0;f<n;++f)o[f]=u[f];o.length=n}return h}function T_(e,t,i,n,s,a,r,l,o,h,u){u=u||[NaN,NaN];for(let f=0,c=i.length;f<c;++f){const d=i[f];h=C_(e,t,d,n,s,a,r,l,o,h,u),t=d}return h}function v5(e,t,i,n,s,a,r,l,o,h,u){u=u||[NaN,NaN];for(let f=0,c=i.length;f<c;++f){const d=i[f];h=T_(e,t,d,n,s,a,r,l,o,h,u),t=d[d.length-1]}return h}function E5(e,t,i,n){for(let s=0,a=i.length;s<a;++s)e[t++]=i[s];return t}function Vc(e,t,i,n){for(let s=0,a=i.length;s<a;++s){const r=i[s];for(let l=0;l<n;++l)e[t++]=r[l]}return t}function ch(e,t,i,n,s){s=s||[];let a=0;for(let r=0,l=i.length;r<l;++r){const o=Vc(e,t,i[r],n);s[a++]=o,t=o}return s.length=a,s}function Tx(e,t,i,n,s){s=s||[];let a=0;for(let r=0,l=i.length;r<l;++r){const o=ch(e,t,i[r],n,s[a]);o.length===0&&(o[0]=t),s[a++]=o,t=o[o.length-1]}return s.length=a,s}function ps(e,t,i,n,s){s=s!==void 0?s:[];let a=0;for(let r=t;r<i;r+=n)s[a++]=e.slice(r,r+n);return s.length=a,s}function Po(e,t,i,n,s){s=s!==void 0?s:[];let a=0;for(let r=0,l=i.length;r<l;++r){const o=i[r];s[a++]=ps(e,t,o,n,s[a]),t=o}return s.length=a,s}function U0(e,t,i,n,s){s=s!==void 0?s:[];let a=0;for(let r=0,l=i.length;r<l;++r){const o=i[r];s[a++]=o.length===1&&o[0]===t?[]:Po(e,t,o,n,s[a]),t=o[o.length-1]}return s.length=a,s}function Kc(e,t,i,n,s,a,r){const l=(i-t)/n;if(l<3){for(;t<i;t+=n)a[r++]=e[t],a[r++]=e[t+1];return r}const o=new Array(l);o[0]=1,o[l-1]=1;const h=[t,i-n];let u=0;for(;h.length>0;){const f=h.pop(),c=h.pop();let d=0;const g=e[c],y=e[c+1],v=e[f],_=e[f+1];for(let m=c+n;m<f;m+=n){const p=e[m],E=e[m+1],M=vR(p,E,g,y,v,_);M>d&&(u=m,d=M)}d>s&&(o[(u-t)/n]=1,c+n<u&&h.push(c,u),u+n<f&&h.push(u,f))}for(let f=0;f<l;++f)o[f]&&(a[r++]=e[t+f*n],a[r++]=e[t+f*n+1]);return r}function Rx(e,t,i,n,s,a,r,l){for(let o=0,h=i.length;o<h;++o){const u=i[o];r=Kc(e,t,u,n,s,a,r),l.push(r),t=u}return r}function ia(e,t){return t*Math.round(e/t)}function x5(e,t,i,n,s,a,r){if(t==i)return r;let l=ia(e[t],s),o=ia(e[t+1],s);t+=n,a[r++]=l,a[r++]=o;let h,u;do if(h=ia(e[t],s),u=ia(e[t+1],s),t+=n,t==i)return a[r++]=h,a[r++]=u,r;while(h==l&&u==o);for(;t<i;){const f=ia(e[t],s),c=ia(e[t+1],s);if(t+=n,f==h&&c==u)continue;const d=h-l,g=u-o,y=f-l,v=c-o;if(d*v==g*y&&(d<0&&y<d||d==y||d>0&&y>d)&&(g<0&&v<g||g==v||g>0&&v>g)){h=f,u=c;continue}a[r++]=h,a[r++]=u,l=h,o=u,h=f,u=c}return a[r++]=h,a[r++]=u,r}function R_(e,t,i,n,s,a,r,l){for(let o=0,h=i.length;o<h;++o){const u=i[o];r=x5(e,t,u,n,s,a,r),l.push(r),t=u}return r}function S5(e,t,i,n,s,a,r,l){for(let o=0,h=i.length;o<h;++o){const u=i[o],f=[];r=R_(e,t,u,n,s,a,r,f),l.push(f),t=u[u.length-1]}return r}class zo extends Ga{constructor(t,i){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}clone(){return new zo(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,i,n,s){return s<La(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(b_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),C_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,n,s))}getArea(){return wx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ps(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const i=[];return i.length=Kc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new zo(i,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vc(this.flatCoordinates,0,t,this.stride),this.changed()}}class Hr extends Ga{constructor(t,i){super(),this.setCoordinates(t,i)}clone(){const t=new Hr(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,s){const a=this.flatCoordinates,r=da(t,i,a[0],a[1]);if(r<s){const l=this.stride;for(let o=0;o<l;++o)n[o]=a[o];return n.length=l,r}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return ax(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return g_(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=E5(this.flatCoordinates,0,t,this.stride),this.changed()}}function M5(e,t,i,n,s){return!ox(s,function(r){return!aa(e,t,i,n,r[0],r[1])})}function aa(e,t,i,n,s,a){let r=0,l=e[i-n],o=e[i-n+1];for(;t<i;t+=n){const h=e[t],u=e[t+1];o<=a?u>a&&(h-l)*(a-o)-(s-l)*(u-o)>0&&r++:u<=a&&(h-l)*(a-o)-(s-l)*(u-o)<0&&r--,l=h,o=u}return r!==0}function A_(e,t,i,n,s,a){if(i.length===0||!aa(e,t,i[0],n,s,a))return!1;for(let r=1,l=i.length;r<l;++r)if(aa(e,i[r-1],i[r],n,s,a))return!1;return!0}function b5(e,t,i,n,s,a){if(i.length===0)return!1;for(let r=0,l=i.length;r<l;++r){const o=i[r];if(A_(e,t,o,n,s,a))return!0;t=o[o.length-1]}return!1}function O_(e,t,i,n,s,a,r){let l,o,h,u,f,c,d;const g=s[a+1],y=[];for(let m=0,p=i.length;m<p;++m){const E=i[m];for(u=e[E-n],c=e[E-n+1],l=t;l<E;l+=n)f=e[l],d=e[l+1],(g<=c&&d<=g||c<=g&&g<=d)&&(h=(g-c)/(d-c)*(f-u)+u,y.push(h)),u=f,c=d}let v=NaN,_=-1/0;for(y.sort(In),u=y[0],l=1,o=y.length;l<o;++l){f=y[l];const m=Math.abs(f-u);m>_&&(h=(u+f)/2,A_(e,t,i,n,h,g)&&(v=h,_=m)),u=f}return isNaN(v)&&(v=s[a]),r?(r.push(v,g,_),r):[v,g,_]}function Ax(e,t,i,n,s){let a=[];for(let r=0,l=i.length;r<l;++r){const o=i[r];a=O_(e,t,o,n,s,2*r,a),t=o[o.length-1]}return a}function Ox(e,t,i,n,s){let a;for(t+=n;t<i;t+=n)if(a=s(e.slice(t-n,t),e.slice(t,t+n)),a)return a;return!1}function Wc(e,t,i,n,s,a){return a=a??lx(ki(),e,t,i,n),Je(s,a)?a[0]>=s[0]&&a[2]<=s[2]||a[1]>=s[1]&&a[3]<=s[3]?!0:Ox(e,t,i,n,function(r,l){return wR(s,r,l)}):!1}function w5(e,t,i,n,s){for(let a=0,r=i.length;a<r;++a){if(Wc(e,t,i[a],n,s))return!0;t=i[a]}return!1}function Lx(e,t,i,n,s){return!!(Wc(e,t,i,n,s)||aa(e,t,i,n,s[0],s[1])||aa(e,t,i,n,s[0],s[3])||aa(e,t,i,n,s[2],s[1])||aa(e,t,i,n,s[2],s[3]))}function Nx(e,t,i,n,s){if(!Lx(e,t,i[0],n,s))return!1;if(i.length===1)return!0;for(let a=1,r=i.length;a<r;++a)if(M5(e,i[a-1],i[a],n,s)&&!Wc(e,i[a-1],i[a],n,s))return!1;return!0}function C5(e,t,i,n,s){for(let a=0,r=i.length;a<r;++a){const l=i[a];if(Nx(e,t,l,n,s))return!0;t=l[l.length-1]}return!1}function T5(e,t,i,n){for(;t<i-n;){for(let s=0;s<n;++s){const a=e[t+s];e[t+s]=e[i-n+s],e[i-n+s]=a}t+=n,i-=n}}function L_(e,t,i,n){let s=0,a=e[i-n],r=e[i-n+1];for(;t<i;t+=n){const l=e[t],o=e[t+1];s+=(l-a)*(o+r),a=l,r=o}return s===0?void 0:s>0}function N_(e,t,i,n,s){s=s!==void 0?s:!1;for(let a=0,r=i.length;a<r;++a){const l=i[a],o=L_(e,t,l,n);if(a===0){if(s&&o||!s&&!o)return!1}else if(s&&!o||!s&&o)return!1;t=l}return!0}function Gx(e,t,i,n,s){for(let a=0,r=i.length;a<r;++a){const l=i[a];if(!N_(e,t,l,n,s))return!1;l.length&&(t=l[l.length-1])}return!0}function sc(e,t,i,n,s){s=s!==void 0?s:!1;for(let a=0,r=i.length;a<r;++a){const l=i[a],o=L_(e,t,l,n);(a===0?s&&o||!s&&!o:s&&!o||!s&&o)&&T5(e,t,l,n),t=l}return t}function k0(e,t,i,n,s){for(let a=0,r=i.length;a<r;++a)t=sc(e,t,i[a],n,s);return t}function R5(e,t){const i=[];let n=0,s=0,a;for(let r=0,l=t.length;r<l;++r){const o=t[r],h=L_(e,n,o,2);if(a===void 0&&(a=h),h===a)i.push(t.slice(s,r+1));else{if(i.length===0)continue;i[i.length-1].push(t[s])}s=r+1,n=o}return i}class ks extends Ga{constructor(t,i,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,i!==void 0&&n?(this.setFlatCoordinates(i,t),this.ends_=n):this.setCoordinates(t,i)}appendLinearRing(t){this.flatCoordinates?hn(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ks(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,n,s){return s<La(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(w_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),T_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,n,s))}containsXY(t,i){return A_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)}getArea(){return Cx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),sc(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,Po(i,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Us(this.getExtent());this.flatInteriorPoint_=O_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Hr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new zo(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,i=this.flatCoordinates,n=this.ends_,s=[];let a=0;for(let r=0,l=n.length;r<l;++r){const o=n[r],h=new zo(i.slice(a,o),t);s.push(h),a=o}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;N_(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=sc(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const i=[],n=[];return i.length=R_(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new ks(i,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return Nx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=ch(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function Ay(e){if(Yc(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],i=e[1],n=e[2],s=e[3],a=[t,i,t,s,n,s,n,i,t,i];return new ks(a,"XY",[a.length])}function G_(e,t,i,n){const s=Nt(t)/i[0],a=Ue(t)/i[1];return n?Math.min(e,Math.max(s,a)):Math.min(e,Math.min(s,a))}function D_(e,t,i){let n=Math.min(e,t);const s=50;return n*=Math.log(1+s*Math.max(0,e/t-1))/s+1,i&&(n=Math.max(n,i),n/=Math.log(1+s*Math.max(0,i/e-1))/s+1),Wt(n,i/2,t*2)}function A5(e,t,i,n){return t=t!==void 0?t:!0,function(s,a,r,l){if(s!==void 0){const o=e[0],h=e[e.length-1],u=i?G_(o,i,r,n):o;if(l)return t?D_(s,u,h):Wt(s,h,u);const f=Math.min(u,s),c=Math.floor(f_(e,f,a));return e[c]>u&&c<e.length-1?e[c+1]:e[c]}}}function O5(e,t,i,n,s,a){return n=n!==void 0?n:!0,i=i!==void 0?i:0,function(r,l,o,h){if(r!==void 0){const u=s?G_(t,s,o,a):t;if(h)return n?D_(r,u,i):Wt(r,i,u);const f=1e-9,c=Math.ceil(Math.log(t/u)/Math.log(e)-f),d=-l*(.5-f)+.5,g=Math.min(u,r),y=Math.floor(Math.log(t/g)/Math.log(e)+d),v=Math.max(c,y),_=t/Math.pow(e,v);return Wt(_,i,u)}}}function Oy(e,t,i,n,s){return i=i!==void 0?i:!0,function(a,r,l,o){if(a!==void 0){const h=n?G_(e,n,l,s):e;return!i||!o?Wt(a,t,h):D_(a,h,t)}}}function I_(e){if(e!==void 0)return 0}function Ly(e){if(e!==void 0)return e}function L5(e){const t=2*Math.PI/e;return function(i,n){if(n)return i;if(i!==void 0)return i=Math.floor(i/t+.5)*t,i}}function N5(e){const t=Ls(5);return function(i,n){return n||i===void 0?i:Math.abs(i)<=t?0:i}}const G5=42,P_=256,id=0;class en extends dn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=S_(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Ex(),t.center&&(t.center=bn(t.center,this.projection_)),t.extent&&(t.extent=ys(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const i=Object.assign({},t);for(const l in Yi)delete i[l];this.setProperties(i,!0);const n=I5(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const s=D5(t),a=n.constraint,r=P5(t);this.constraints_={center:s,resolution:a,rotation:r},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let i=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const s=t||[0,0,0,0];i=i||[0,0,0,0];const a=this.getResolution(),r=a/2*(s[3]-i[3]+i[1]-s[1]),l=a/2*(s[0]-i[0]+i[2]-s[2]);this.setCenterInternal([n[0]+r,n[1]-l])}}getUpdatedOptions_(t){const i=this.getProperties();return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),Object.assign({},i,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const i=new Array(arguments.length);for(let n=0;n<i.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=bn(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=bn(s.anchor,this.getProjection())),i[n]=s}this.animateInternal.apply(this,i)}animateInternal(t){let i=arguments.length,n;i>1&&typeof arguments[i-1]=="function"&&(n=arguments[i-1],--i);let s=0;for(;s<i&&!this.isDef();++s){const u=arguments[s];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(s===i){n&&Uh(n,!0);return}let a=Date.now(),r=this.targetCenter_.slice(),l=this.targetResolution_,o=this.targetRotation_;const h=[];for(;s<i;++s){const u=arguments[s],f={start:a,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||AR,callback:n};if(u.center&&(f.sourceCenter=r,f.targetCenter=u.center.slice(),r=f.targetCenter),u.zoom!==void 0?(f.sourceResolution=l,f.targetResolution=this.getResolutionForZoom(u.zoom),l=f.targetResolution):u.resolution&&(f.sourceResolution=l,f.targetResolution=u.resolution,l=f.targetResolution),u.rotation!==void 0){f.sourceRotation=o;const c=ga(u.rotation-o+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=o+c,o=f.targetRotation}z5(f)?f.complete=!0:a+=f.duration,h.push(f)}this.animations_.push(h),this.setHint(De.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[De.ANIMATING]>0}getInteracting(){return this.hints_[De.INTERACTING]>0}cancelAnimations(){this.setHint(De.ANIMATING,-this.hints_[De.ANIMATING]);let t;for(let i=0,n=this.animations_.length;i<n;++i){const s=this.animations_[i];if(s[0].callback&&Uh(s[0].callback,!1),!t)for(let a=0,r=s.length;a<r;++a){const l=s[a];if(!l.complete){t=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let i=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let a=!0;for(let r=0,l=s.length;r<l;++r){const o=s[r];if(o.complete)continue;const h=t-o.start;let u=o.duration>0?h/o.duration:1;u>=1?(o.complete=!0,u=1):a=!1;const f=o.easing(u);if(o.sourceCenter){const c=o.sourceCenter[0],d=o.sourceCenter[1],g=o.targetCenter[0],y=o.targetCenter[1];this.nextCenter_=o.targetCenter;const v=c+f*(g-c),_=d+f*(y-d);this.targetCenter_=[v,_]}if(o.sourceResolution&&o.targetResolution){const c=f===1?o.targetResolution:o.sourceResolution+f*(o.targetResolution-o.sourceResolution);if(o.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(c,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=c,this.applyTargetState_(!0)}if(o.sourceRotation!==void 0&&o.targetRotation!==void 0){const c=f===1?ga(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+f*(o.targetRotation-o.sourceRotation);if(o.anchor){const d=this.constraints_.rotation(c,!0);this.targetCenter_=this.calculateCenterRotate(d,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=c}if(this.applyTargetState_(!0),i=!0,!o.complete)break}if(a){this.animations_[n]=null,this.setHint(De.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const r=s[0].callback;r&&Uh(r,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,i){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-i[0],s[1]-i[1]],m_(n,t-this.getRotation()),CR(n,i)),n}calculateCenterZoom(t,i){let n;const s=this.getCenterInternal(),a=this.getResolution();if(s!==void 0&&a!==void 0){const r=i[0]-t*(i[0]-s[0])/a,l=i[1]-t*(i[1]-s[1])/a;n=[r,l]}return n}getViewportSize_(t){const i=this.viewportSize_;if(t){const n=i[0],s=i[1];return[Math.abs(n*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(s*Math.cos(t))]}return i}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&j0(t,this.getProjection())}getCenterInternal(){return this.get(Yi.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const i=this.calculateExtentInternal(t);return xx(i,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const i=this.getCenterInternal();Rt(i,"The view center is not defined");const n=this.getResolution();Rt(n!==void 0,"The view resolution is not defined");const s=this.getRotation();return Rt(s!==void 0,"The view rotation is not defined"),D0(i,n,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Yi.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,i){return this.getResolutionForExtentInternal(ys(t,this.getProjection()),i)}getResolutionForExtentInternal(t,i){i=i||this.getViewportSizeMinusPadding_();const n=Nt(t)/i[0],s=Ue(t)/i[1];return Math.max(n,s)}getResolutionForValueFunction(t){t=t||2;const i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/Math.log(t);return function(a){return i/Math.pow(t,a*s)}}getRotation(){return this.get(Yi.ROTATION)}getValueForResolutionFunction(t){const i=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,a=Math.log(n/s)/i;return function(r){return Math.log(n/r)/i/a}}getViewportSizeMinusPadding_(t){let i=this.getViewportSize_(t);const n=this.padding_;return n&&(i=[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]),i}getState(){const t=this.getProjection(),i=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const a=this.padding_;if(a){const r=this.getViewportSizeMinusPadding_();s=nd(s,this.getViewportSize_(),[r[0]/2+a[3],r[1]/2+a[0]],i,n)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t}getZoomForResolution(t){let i=this.minZoom_||0,n,s;if(this.resolutions_){const a=f_(this.resolutions_,t,1);i=a,n=this.resolutions_[a],a==this.resolutions_.length-1?s=2:s=n/this.resolutions_[a+1]}else n=this.maxResolution_,s=this.zoomFactor_;return i+Math.log(n/t)/Math.log(s)}getResolutionForZoom(t){var i;if((i=this.resolutions_)!=null&&i.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=Wt(Math.floor(t),0,this.resolutions_.length-2),s=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(s,Wt(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,i){let n;if(Rt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Rt(!Yc(t),"Cannot fit empty extent provided as `geometry`");const s=ys(t,this.getProjection());n=Ay(s)}else if(t.getType()==="Circle"){const s=ys(t.getExtent(),this.getProjection());n=Ay(s),n.rotate(this.getRotation(),Us(s))}else n=t;this.fitInternal(n,i)}rotatedExtentForGeometry(t){const i=this.getRotation(),n=Math.cos(i),s=Math.sin(-i),a=t.getFlatCoordinates(),r=t.getStride();let l=1/0,o=1/0,h=-1/0,u=-1/0;for(let f=0,c=a.length;f<c;f+=r){const d=a[f]*n-a[f+1]*s,g=a[f]*s+a[f+1]*n;l=Math.min(l,d),o=Math.min(o,g),h=Math.max(h,d),u=Math.max(u,g)}return[l,o,h,u]}fitInternal(t,i){i=i||{};let n=i.size;n||(n=this.getViewportSizeMinusPadding_());const s=i.padding!==void 0?i.padding:[0,0,0,0],a=i.nearest!==void 0?i.nearest:!1;let r;i.minResolution!==void 0?r=i.minResolution:i.maxZoom!==void 0?r=this.getResolutionForZoom(i.maxZoom):r=0;const l=this.rotatedExtentForGeometry(t);let o=this.getResolutionForExtentInternal(l,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);o=isNaN(o)?r:Math.max(o,r),o=this.getConstrainedResolution(o,a?0:1);const h=this.getRotation(),u=Math.sin(h),f=Math.cos(h),c=Us(l);c[0]+=(s[1]-s[3])/2*o,c[1]+=(s[0]-s[2])/2*o;const d=c[0]*f-c[1]*u,g=c[1]*f+c[0]*u,y=this.getConstrainedCenter([d,g],o),v=i.callback?i.callback:No;i.duration!==void 0?this.animateInternal({resolution:o,center:y,duration:i.duration,easing:i.easing},v):(this.targetResolution_=o,this.targetCenter_=y,this.applyTargetState_(!1,!0),Uh(v,!0))}centerOn(t,i,n){this.centerOnInternal(bn(t,this.getProjection()),i,n)}centerOnInternal(t,i,n){this.setCenterInternal(nd(t,i,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,i,n,s){let a;const r=this.padding_;if(r&&t){const l=this.getViewportSizeMinusPadding_(-n),o=nd(t,s,[l[0]/2+r[3],l[1]/2+r[0]],i,n);a=[t[0]-o[0],t[1]-o[1]]}return a}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const i=j0(this.targetCenter_,this.getProjection());this.setCenter([i[0]+t[0],i[1]+t[1]])}adjustCenterInternal(t){const i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])}adjustResolution(t,i){i=i&&bn(i,this.getProjection()),this.adjustResolutionInternal(t,i)}adjustResolutionInternal(t,i){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*t,0,s,n);i&&(this.targetCenter_=this.calculateCenterZoom(a,i)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)}adjustRotation(t,i){i&&(i=bn(i,this.getProjection())),this.adjustRotationInternal(t,i)}adjustRotationInternal(t,i){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,n);i&&(this.targetCenter_=this.calculateCenterRotate(s,i)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&bn(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,i){const n=this.getAnimating()||this.getInteracting()||i,s=this.constraints_.rotation(this.targetRotation_,n),a=this.getViewportSize_(s),r=this.constraints_.resolution(this.targetResolution_,0,a,n),l=this.constraints_.center(this.targetCenter_,r,a,n,this.calculateCenterShift(this.targetCenter_,r,s,a));this.get(Yi.ROTATION)!==s&&this.set(Yi.ROTATION,s),this.get(Yi.RESOLUTION)!==r&&(this.set(Yi.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(Yi.CENTER)||!ec(this.get(Yi.CENTER),l))&&this.set(Yi.CENTER,l),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,i,n){t=t!==void 0?t:200;const s=i||0,a=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(a),l=this.constraints_.resolution(this.targetResolution_,s,r),o=this.constraints_.center(this.targetCenter_,l,r,!1,this.calculateCenterShift(this.targetCenter_,l,a,r));if(t===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=a,this.targetCenter_=o,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==a||!this.getCenterInternal()||!ec(this.getCenterInternal(),o))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:a,center:o,resolution:l,duration:t,easing:ll,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(De.INTERACTING,1)}endInteraction(t,i,n){n=n&&bn(n,this.getProjection()),this.endInteractionInternal(t,i,n)}endInteractionInternal(t,i,n){this.getInteracting()&&(this.setHint(De.INTERACTING,-1),this.resolveConstraints(t,i,n))}getConstrainedCenter(t,i){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),n)}getConstrainedZoom(t,i){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,i))}getConstrainedResolution(t,i){i=i||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,n)}}function Uh(e,t){setTimeout(function(){e(t)},0)}function D5(e){if(e.extent!==void 0){const i=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return gy(e.extent,e.constrainOnlyCenter,i)}const t=S_(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const i=t.getExtent().slice();return i[0]=-1/0,i[2]=1/0,gy(i,!1,!1)}return xR}function I5(e){let t,i,n,r=e.minZoom!==void 0?e.minZoom:id,l=e.maxZoom!==void 0?e.maxZoom:28;const o=e.zoomFactor!==void 0?e.zoomFactor:2,h=e.multiWorld!==void 0?e.multiWorld:!1,u=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,f=e.showFullExtent!==void 0?e.showFullExtent:!1,c=S_(e.projection,"EPSG:3857"),d=c.getExtent();let g=e.constrainOnlyCenter,y=e.extent;if(!h&&!y&&c.isGlobal()&&(g=!1,y=d),e.resolutions!==void 0){const v=e.resolutions;i=v[r],n=v[l]!==void 0?v[l]:v[v.length-1],e.constrainResolution?t=A5(v,u,!g&&y,f):t=Oy(i,n,u,!g&&y,f)}else{const _=(d?Math.max(Nt(d),Ue(d)):360*y_.degrees/c.getMetersPerUnit())/P_/Math.pow(2,id),m=_/Math.pow(2,28-id);i=e.maxResolution,i!==void 0?r=0:i=_/Math.pow(o,r),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=i/Math.pow(o,l):n=_/Math.pow(o,l):n=m),l=r+Math.floor(Math.log(i/n)/Math.log(o)),n=i/Math.pow(o,l-r),e.constrainResolution?t=O5(o,i,n,u,!g&&y,f):t=Oy(i,n,u,!g&&y,f)}return{constraint:t,maxResolution:i,minResolution:n,minZoom:r,zoomFactor:o}}function P5(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const i=e.constrainRotation;return i===void 0||i===!0?N5():i===!1?Ly:typeof i=="number"?L5(i):Ly}return I_}function z5(e){return!(e.sourceCenter&&e.targetCenter&&!ec(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function nd(e,t,i,n,s){const a=Math.cos(-s);let r=Math.sin(-s),l=e[0]*a-e[1]*r,o=e[1]*a+e[0]*r;l+=(t[0]/2-i[0])*n,o+=(i[1]-t[1]/2)*n,r=-r;const h=l*a-o*r,u=o*a+l*r;return[h,u]}const kh="ol-hidden",Qc="ol-unselectable",z_="ol-control",Ny="ol-collapsed",j5=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),Gy=["style","variant","weight","size","lineHeight","family"],B0={normal:400,bold:700},X0=function(e){const t=e.match(j5);if(!t)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let n=0,s=Gy.length;n<s;++n){const a=t[n+1];a!==void 0&&(i[Gy[n]]=typeof a=="string"?a.trim():a)}return isNaN(Number(i.weight))&&i.weight in B0&&(i.weight=B0[i.weight]),i.families=i.family.split(/,\s?/).map(n=>n.trim().replace(/^['"]|['"]$/g,"")),i};function me(e,t,i,n){let s;return i&&i.length?s=i.shift():di?s=new class extends OffscreenCanvas{constructor(){super(...arguments);uf(this,"style",{})}}(e??300,t??150):s=document.createElement("canvas"),e&&(s.width=e),t&&(s.height=t),s.getContext("2d",n)}let sd;function ac(){return sd||(sd=me(1,1)),sd}function Jc(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function Dy(e,t){const i=t.parentNode;i&&i.replaceChild(e,t)}function F5(e){for(;e.lastChild;)e.lastChild.remove()}function U5(e,t){const i=e.childNodes;for(let n=0;;++n){const s=i[n],a=t[n];if(!s&&!a)break;if(s!==a){if(!s){e.appendChild(a);continue}if(!a){e.removeChild(s),--n;continue}e.insertBefore(a,s)}}}function Dx(){return new Proxy({childNodes:[],appendChild:function(t){return this.childNodes.push(t),t},remove:function(){},removeChild:function(t){const i=this.childNodes.indexOf(t);if(i===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(i,1),t},insertBefore:function(t,i){const n=this.childNodes.indexOf(i);if(n===-1)throw new Error("Reference node not found");return this.childNodes.splice(n,0,t),t},style:{}},{get(t,i,n){return i==="firstElementChild"?t.childNodes.length>0?t.childNodes[0]:null:Reflect.get(t,i,n)}})}function vs(e){return typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas}class j_ extends dn{constructor(t){super();const i=t.element;i&&!t.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),this.element=i||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){var t;(t=this.element)==null||t.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){var i;this.map_&&((i=this.element)==null||i.remove());for(let n=0,s=this.listenerKeys.length;n<s;++n)Bt(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=t,t){const n=this.target_??t.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==No&&this.listenerKeys.push(vt(t,ns.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class k5 extends j_{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const i=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:i+"-expand",a=t.collapseLabel!==void 0?t.collapseLabel:"",r=t.collapseClassName!==void 0?t.collapseClassName:i+"-collapse";typeof a=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a,this.collapseLabel_.className=r):this.collapseLabel_=a;const l=t.label!==void 0?t.label:"i";typeof l=="string"?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=s):this.label_=l;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(o),this.toggleButton_.addEventListener(st.CLICK,this.handleClick_.bind(this),!1);const h=i+" "+Qc+" "+z_+(this.collapsed_&&this.collapsible_?" "+Ny:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=h,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const i=this.getMap().getAllLayers(),n=new Set(i.flatMap(s=>s.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>n.add(s)):n.add(this.attributions_)),!this.overrideCollapsible_){const s=!i.some(a=>{var r;return((r=a.getSource())==null?void 0:r.getAttributionsCollapsible())===!1});this.setCollapsible(s)}return Array.from(n)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const i=await Promise.all(this.collectSourceAttributions_(t).map(s=>hR(()=>s))),n=i.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!qs(i,this.renderedAttributions_)){F5(this.ulElement_);for(let s=0,a=i.length;s<a;++s){const r=document.createElement("li");r.innerHTML=i[s],this.ulElement_.appendChild(r)}this.renderedAttributions_=i}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Ny),this.collapsed_?Dy(this.collapseLabel_,this.label_):Dy(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class B5 extends j_{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const i=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const a=t.tipLabel?t.tipLabel:"Reset rotation",r=document.createElement("button");r.className=i+"-reset",r.setAttribute("type","button"),r.title=a,r.appendChild(this.label_),r.addEventListener(st.CLICK,this.handleClick_.bind(this),!1);const l=i+" "+Qc+" "+z_,o=this.element;o.className=l,o.appendChild(r),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(kh)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const i=this.getMap().getView();if(!i)return;const n=i.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?i.animate({rotation:0,duration:this.duration_,easing:ll}):i.setRotation(0))}render(t){const i=t.frameState;if(!i)return;const n=i.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const a=this.element.classList.contains(kh);!a&&n===0?this.element.classList.add(kh):a&&n!==0&&this.element.classList.remove(kh)}this.label_.style.transform=s}this.rotation_=n}}class X5 extends j_{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const i=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:i+"-in",a=t.zoomOutClassName!==void 0?t.zoomOutClassName:i+"-out",r=t.zoomInLabel!==void 0?t.zoomInLabel:"+",l=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",o=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",h=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=o,u.appendChild(typeof r=="string"?document.createTextNode(r):r),u.addEventListener(st.CLICK,this.handleClick_.bind(this,n),!1);const f=document.createElement("button");f.className=a,f.setAttribute("type","button"),f.title=h,f.appendChild(typeof l=="string"?document.createTextNode(l):l),f.addEventListener(st.CLICK,this.handleClick_.bind(this,-n),!1);const c=i+" "+Qc+" "+z_,d=this.element;d.className=c,d.appendChild(u),d.appendChild(f),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,i){i.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const a=n.getConstrainedZoom(s+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:a,duration:this.duration_,easing:ll})):n.setZoom(a)}}}function Ix(e){e=e||{};const t=new Gi;return(e.zoom!==void 0?e.zoom:!0)&&t.push(new X5(e.zoomOptions)),(e.rotate!==void 0?e.rotate:!0)&&t.push(new B5(e.rotateOptions)),(e.attribution!==void 0?e.attribution:!0)&&t.push(new k5(e.attributionOptions)),t}class Y5{constructor(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,i){this.points_.push(t,i,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;let n=i-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const s=this.points_[i+2]-this.points_[n+2];if(s<1e3/60)return!1;const a=this.points_[i]-this.points_[n],r=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(r,a),this.initialVelocity_=Math.sqrt(a*a+r*r)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Iy={ACTIVE:"active"};class fh extends dn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Iy.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Iy.ACTIVE,t)}setMap(t){this.map_=t}}function q5(e,t,i){const n=e.getCenterInternal();if(n){const s=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:i!==void 0?i:250,easing:OR,center:e.getConstrainedCenter(s)})}}function F_(e,t,i,n){const s=e.getZoom();if(s===void 0)return;const a=e.getConstrainedZoom(s+t),r=e.getResolutionForZoom(a);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:r,anchor:i,duration:n!==void 0?n:250,easing:ll})}class H5 extends fh{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let i=!1;if(t.type==$t.DBLCLICK){const n=t.originalEvent,s=t.map,a=t.coordinate,r=n.shiftKey?-this.delta_:this.delta_,l=s.getView();F_(l,r,a,this.duration_),n.preventDefault(),i=!0}return!i}}function Y0(e){const t=arguments;return function(i){let n=!0;for(let s=0,a=t.length;s<a&&(n=n&&t[s](i),!!n);++s);return n}}const Z5=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},V5=function(e){const t=e.map.getTargetElement(),i=t.getRootNode(),n=e.map.getOwnerDocument().activeElement;return i instanceof ShadowRoot?i.host.contains(n):t.contains(n)},Px=function(e){const t=e.map.getTargetElement(),i=t.getRootNode();return(i instanceof ShadowRoot?i.host:t).hasAttribute("tabindex")?V5(e):!0},K5=Lo,zx=function(e){const t=e.originalEvent;return"pointerId"in t&&t.button==0&&!(dR&&ex&&t.ctrlKey)},jx=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},W5=function(e){const t=e.originalEvent;return ex?t.metaKey:t.ctrlKey},Q5=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Fx=function(e){const t=e.originalEvent,i=t.target.tagName;return i!=="INPUT"&&i!=="SELECT"&&i!=="TEXTAREA"&&!t.target.isContentEditable},ad=function(e){const t=e.originalEvent;return"pointerId"in t&&t.pointerType=="mouse"},J5=function(e){const t=e.originalEvent;return"pointerId"in t&&t.isPrimary&&t.button===0};class dh extends fh{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==$t.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==$t.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==$t.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,i=this.stopDown(n)}else t.type==$t.POINTERMOVE&&this.handleMoveEvent(t);return!i}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function U_(e){const t=e.length;let i=0,n=0;for(let s=0;s<t;s++)i+=e[s].clientX,n+=e[s].clientY;return{clientX:i/t,clientY:n/t}}class $5 extends dh{constructor(t){super({stopDown:jc}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const i=t.condition?t.condition:Y0(jx,J5);this.condition_=t.onFocusOnly?Y0(Px,i):i,this.noKinetic_=!1}handleDragEvent(t){const i=t.map;this.panning_||(this.panning_=!0,i.getView().beginInteraction());const n=this.targetPointers,s=i.getEventPixel(U_(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const a=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],l=t.map.getView();TR(a,l.getResolution()),m_(a,l.getRotation()),l.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const i=t.map,n=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),r=n.getCenterInternal(),l=i.getPixelFromCoordinateInternal(r),o=i.getCoordinateFromPixelInternal([l[0]-s*Math.cos(a),l[1]-s*Math.sin(a)]);n.animateInternal({center:n.getConstrainedCenter(o),duration:500,easing:ll})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class tA extends dh{constructor(t){t=t||{},super({stopDown:jc}),this.condition_=t.condition?t.condition:Z5,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!ad(t))return;const i=t.map,n=i.getView();if(n.getConstraints().rotation===I_)return;const s=i.getSize(),a=t.pixel,r=Math.atan2(s[1]/2-a[1],a[0]-s[0]/2);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;n.adjustRotationInternal(-l)}this.lastAngle_=r}handleUpEvent(t){return ad(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return ad(t)&&zx(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class eA extends zc{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,i=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(t[0],i[0])+n,s.top=Math.min(t[1],i[1])+n,s.width=Math.abs(i[0]-t[0])+n,s.height=Math.abs(i[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,i=this.endPixel_,s=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new ks([s])}getGeometry(){return this.geometry_}}const Ua={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Sl extends Zn{constructor(t,i,n){super(t),this.coordinate=i,this.mapBrowserEvent=n}}class iA extends dh{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new eA(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??zx,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,i,n){const s=n[0]-i[0],a=n[1]-i[1];return s*s+a*a>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Sl(Ua.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new Sl(i?Ua.BOXEND:Ua.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Sl(Ua.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Sl(Ua.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Sl(Ua.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class nA extends iA{constructor(t){t=t||{};const i=t.condition?t.condition:Q5;super({condition:i,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const a=n.rotatedExtentForGeometry(s),r=n.getResolutionForExtentInternal(a),l=n.getResolution()/r;s=s.clone(),s.scale(l*l)}n.fitInternal(s,{duration:this.duration_,easing:ll})}}const Ws={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class sA extends fh{constructor(t){super(),t=t||{},this.defaultCondition_=function(i){return jx(i)&&Fx(i)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let i=!1;if(t.type==st.KEYDOWN){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==Ws.DOWN||s==Ws.LEFT||s==Ws.RIGHT||s==Ws.UP)){const r=t.map.getView(),l=r.getResolution()*this.pixelDelta_;let o=0,h=0;s==Ws.DOWN?h=-l:s==Ws.LEFT?o=-l:s==Ws.RIGHT?o=l:h=l;const u=[o,h];m_(u,r.getRotation()),q5(r,u,this.duration_),n.preventDefault(),i=!0}}return!i}}class aA extends fh{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(i){return!W5(i)&&Fx(i)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let i=!1;if(t.type==st.KEYDOWN||t.type==st.KEYPRESS){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==="+"||s==="-")){const a=t.map,r=s==="+"?this.delta_:-this.delta_,l=a.getView();F_(l,r,void 0,this.duration_),n.preventDefault(),i=!0}}return!i}}const rA=40,lA=300;class oA extends fh{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const i=t.condition?t.condition:K5;this.condition_=t.onFocusOnly?Y0(Px,i):i,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==st.WHEEL)return!0;const n=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let a=s.deltaY;switch(s.deltaMode){case WheelEvent.DOM_DELTA_LINE:a*=rA;break;case WheelEvent.DOM_DELTA_PAGE:a*=lA;break}if(a===0)return!1;this.lastDelta_=a;const r=Date.now();this.startTime_===void 0&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?"trackpad":"wheel");const l=n.getView();if(this.mode_==="trackpad"&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=r,!1;this.totalDelta_+=a;const o=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),o),!1}handleWheelZoom_(t){const i=t.getView();i.getAnimating()&&i.cancelAnimations();let n=-Wt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),F_(i,n,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class hA extends dh{constructor(t){t=t||{};const i=t;i.stopDown||(i.stopDown=jc),super(i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let i=0;const n=this.targetPointers[0],s=this.targetPointers[1],a=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=o}this.lastAngle_=a;const r=t.map,l=r.getView();l.getConstraints().rotation!==I_&&(this.anchor_=r.getCoordinateFromPixelInternal(r.getEventPixel(U_(this.targetPointers))),this.rotating_&&(r.render(),l.adjustRotationInternal(i,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}class uA extends dh{constructor(t){t=t||{};const i=t;i.stopDown||(i.stopDown=jc),super(i),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let i=1;const n=this.targetPointers[0],s=this.targetPointers[1],a=n.clientX-s.clientX,r=n.clientY-s.clientY,l=Math.sqrt(a*a+r*r);this.lastDistance_!==void 0&&(i=this.lastDistance_/l),this.lastDistance_=l;const o=t.map,h=o.getView();i!=1&&(this.lastScaleDelta_=i),this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(U_(this.targetPointers))),o.render(),h.adjustResolutionInternal(i,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const n=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}}function cA(e){e=e||{};const t=new Gi,i=new Y5(-.005,.05,100);return(e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0)&&t.push(new tA),(e.doubleClickZoom!==void 0?e.doubleClickZoom:!0)&&t.push(new H5({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan!==void 0?e.dragPan:!0)&&t.push(new $5({onFocusOnly:e.onFocusOnly,kinetic:i})),(e.pinchRotate!==void 0?e.pinchRotate:!0)&&t.push(new hA),(e.pinchZoom!==void 0?e.pinchZoom:!0)&&t.push(new uA({duration:e.zoomDuration})),(e.keyboard!==void 0?e.keyboard:!0)&&(t.push(new sA),t.push(new aA({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0)&&t.push(new oA({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom!==void 0?e.shiftDragZoom:!0)&&t.push(new nA({duration:e.zoomDuration})),t}const At={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Ux extends dn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const i=Object.assign({},t);typeof t.properties=="object"&&(delete i.properties,Object.assign(i,t.properties)),i[At.OPACITY]=t.opacity!==void 0?t.opacity:1,Rt(typeof i[At.OPACITY]=="number","Layer opacity must be a number"),i[At.VISIBLE]=t.visible!==void 0?t.visible:!0,i[At.Z_INDEX]=t.zIndex,i[At.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,i[At.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,i[At.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,i[At.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,this.setProperties(i),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const i=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return i.opacity=Wt(Math.round(this.getOpacity()*100)/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=n===void 0&&!i.managed?1/0:n,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i}getLayersArray(t){return $()}getLayerStatesArray(t){return $()}getExtent(){return this.get(At.EXTENT)}getMaxResolution(){return this.get(At.MAX_RESOLUTION)}getMinResolution(){return this.get(At.MIN_RESOLUTION)}getMinZoom(){return this.get(At.MIN_ZOOM)}getMaxZoom(){return this.get(At.MAX_ZOOM)}getOpacity(){return this.get(At.OPACITY)}getSourceState(){return $()}getVisible(){return this.get(At.VISIBLE)}getZIndex(){return this.get(At.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(At.EXTENT,t)}setMaxResolution(t){this.set(At.MAX_RESOLUTION,t)}setMinResolution(t){this.set(At.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(At.MAX_ZOOM,t)}setMinZoom(t){this.set(At.MIN_ZOOM,t)}setOpacity(t){Rt(typeof t=="number","Layer opacity must be a number"),this.set(At.OPACITY,t)}setVisible(t){this.set(At.VISIBLE,t)}setZIndex(t){this.set(At.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Wn={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class rs extends Zn{constructor(t,i){super(t),this.layer=i}}const rd={LAYERS:"layers"};class ol extends Ux{constructor(t){t=t||{};const i=Object.assign({},t);delete i.layers;let n=t.layers;super(i),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(rd.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Gi(n.slice(),{unique:!0}):Rt(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Gi(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Bt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(vt(t,Ve.ADD,this.handleLayersAdd_,this),vt(t,Ve.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Bt);lh(this.listenerKeys_);const i=t.getArray();for(let n=0,s=i.length;n<s;n++){const a=i[n];this.registerLayerListeners_(a),this.dispatchEvent(new rs(Wn.ADDLAYER,a))}this.changed()}registerLayerListeners_(t){const i=[vt(t,Xr.PROPERTYCHANGE,this.handleLayerChange_,this),vt(t,st.CHANGE,this.handleLayerChange_,this)];t instanceof ol&&i.push(vt(t,Wn.ADDLAYER,this.handleLayerGroupAdd_,this),vt(t,Wn.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[xt(t)]=i}handleLayerGroupAdd_(t){this.dispatchEvent(new rs(Wn.ADDLAYER,t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new rs(Wn.REMOVELAYER,t.layer))}handleLayersAdd_(t){const i=t.element;this.registerLayerListeners_(i),this.dispatchEvent(new rs(Wn.ADDLAYER,i)),this.changed()}handleLayersRemove_(t){const i=t.element,n=xt(i);this.listenerKeys_[n].forEach(Bt),delete this.listenerKeys_[n],this.dispatchEvent(new rs(Wn.REMOVELAYER,i)),this.changed()}getLayers(){return this.get(rd.LAYERS)}setLayers(t){const i=this.getLayers();if(i){const n=i.getArray();for(let s=0,a=n.length;s<a;++s)this.dispatchEvent(new rs(Wn.REMOVELAYER,n[s]))}this.set(rd.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(i){i.getLayersArray(t)}),t}getLayerStatesArray(t){const i=t!==void 0?t:[],n=i.length;this.getLayers().forEach(function(r){r.getLayerStatesArray(i)});const s=this.getLayerState();let a=s.zIndex;!t&&s.zIndex===void 0&&(a=0);for(let r=n,l=i.length;r<l;r++){const o=i[r];o.opacity*=s.opacity,o.visible=o.visible&&s.visible,o.maxResolution=Math.min(o.maxResolution,s.maxResolution),o.minResolution=Math.max(o.minResolution,s.minResolution),o.minZoom=Math.max(o.minZoom,s.minZoom),o.maxZoom=Math.min(o.maxZoom,s.maxZoom),s.extent!==void 0&&(o.extent!==void 0?o.extent=_a(o.extent,s.extent):o.extent=s.extent),o.zIndex===void 0&&(o.zIndex=a)}return i}getSourceState(){return"ready"}}const Di={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class $c extends Ux{constructor(t){const i=Object.assign({},t);delete i.source,super(i),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(At.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(At.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Bt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=vt(t,st.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let i;const n=this.getMapInternal();!t&&n&&(t=n.getView()),t instanceof en?i={viewState:t.getState(),extent:t.calculateExtent()}:i=t,!i.layerStatesArray&&n&&(i.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let s;if(i.layerStatesArray){if(s=i.layerStatesArray.find(r=>r.layer===this),!s)return!1}else s=this.getLayerState();const a=this.getExtent();return k_(s,i.viewState)&&(!a||Je(a,i.extent))}getAttributions(t){var a;if(!this.isVisible(t))return[];const i=(a=this.getSource())==null?void 0:a.getAttributions();if(!i)return[];const n=t instanceof en?t.getViewStateAndExtent():t;let s=i(n);return Array.isArray(s)||(s=[s]),s}render(t,i){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,i)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,i){}renderDeferred(t){const i=this.getRenderer();i&&i.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(At.MAP,t)}getMapInternal(){return this.get(At.MAP)}setMap(t){this.mapPrecomposeKey_&&(Bt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Bt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=vt(t,Di.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=vt(this,st.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const i=t.frameState.layerStatesArray,n=this.getLayerState(!1);Rt(!i.some(s=>s.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(n)}setSource(t){this.set(At.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function k_(e,t){if(!e.visible)return!1;const i=t.resolution;if(i<e.minResolution||i>=e.maxResolution)return!1;const n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}function kx(e,t,i=0,n=e.length-1,s=fA){for(;n>i;){if(n-i>600){const o=n-i+1,h=t-i+1,u=Math.log(o),f=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*f*(o-f)/o)*(h-o/2<0?-1:1),d=Math.max(i,Math.floor(t-h*f/o+c)),g=Math.min(n,Math.floor(t+(o-h)*f/o+c));kx(e,t,d,g,s)}const a=e[t];let r=i,l=n;for(Ml(e,i,t),s(e[n],a)>0&&Ml(e,i,n);r<l;){for(Ml(e,r,l),r++,l--;s(e[r],a)<0;)r++;for(;s(e[l],a)>0;)l--}s(e[i],a)===0?Ml(e,i,l):(l++,Ml(e,l,n)),l<=t&&(i=l+1),t<=l&&(n=l-1)}}function Ml(e,t,i){const n=e[t];e[t]=e[i],e[i]=n}function fA(e,t){return e<t?-1:e>t?1:0}let Bx=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let i=this.data;const n=[];if(!Xh(t,i))return n;const s=this.toBBox,a=[];for(;i;){for(let r=0;r<i.children.length;r++){const l=i.children[r],o=i.leaf?s(l):l;Xh(t,o)&&(i.leaf?n.push(l):od(t,o)?this._all(l,n):a.push(l))}i=a.pop()}return n}collides(t){let i=this.data;if(!Xh(t,i))return!1;const n=[];for(;i;){for(let s=0;s<i.children.length;s++){const a=i.children[s],r=i.leaf?this.toBBox(a):a;if(Xh(t,r)){if(i.leaf||od(t,r))return!0;n.push(a)}}i=n.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let i=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Qa([]),this}remove(t,i){if(!t)return this;let n=this.data;const s=this.toBBox(t),a=[],r=[];let l,o,h;for(;n||a.length;){if(n||(n=a.pop(),o=a[a.length-1],l=r.pop(),h=!0),n.leaf){const u=dA(t,n.children,i);if(u!==-1)return n.children.splice(u,1),a.push(n),this._condense(a),this}!h&&!n.leaf&&od(n,s)?(a.push(n),r.push(l),l=0,o=n,n=n.children[0]):o?(l++,n=o.children[l],h=!1):n=null}return this}toBBox(t){return t}compareMinX(t,i){return t.minX-i.minX}compareMinY(t,i){return t.minY-i.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){const n=[];for(;t;)t.leaf?i.push(...t.children):n.push(...t.children),t=n.pop();return i}_build(t,i,n,s){const a=n-i+1;let r=this._maxEntries,l;if(a<=r)return l=Qa(t.slice(i,n+1)),ka(l,this.toBBox),l;s||(s=Math.ceil(Math.log(a)/Math.log(r)),r=Math.ceil(a/Math.pow(r,s-1))),l=Qa([]),l.leaf=!1,l.height=s;const o=Math.ceil(a/r),h=o*Math.ceil(Math.sqrt(r));Py(t,i,n,h,this.compareMinX);for(let u=i;u<=n;u+=h){const f=Math.min(u+h-1,n);Py(t,u,f,o,this.compareMinY);for(let c=u;c<=f;c+=o){const d=Math.min(c+o-1,f);l.children.push(this._build(t,c,d,s-1))}}return ka(l,this.toBBox),l}_chooseSubtree(t,i,n,s){for(;s.push(i),!(i.leaf||s.length-1===n);){let a=1/0,r=1/0,l;for(let o=0;o<i.children.length;o++){const h=i.children[o],u=ld(h),f=mA(t,h)-u;f<r?(r=f,a=u<a?u:a,l=h):f===r&&u<a&&(a=u,l=h)}i=l||i.children[0]}return i}_insert(t,i,n){const s=n?t:this.toBBox(t),a=[],r=this._chooseSubtree(s,this.data,i,a);for(r.children.push(t),jl(r,s);i>=0&&a[i].children.length>this._maxEntries;)this._split(a,i),i--;this._adjustParentBBoxes(s,a,i)}_split(t,i){const n=t[i],s=n.children.length,a=this._minEntries;this._chooseSplitAxis(n,a,s);const r=this._chooseSplitIndex(n,a,s),l=Qa(n.children.splice(r,n.children.length-r));l.height=n.height,l.leaf=n.leaf,ka(n,this.toBBox),ka(l,this.toBBox),i?t[i-1].children.push(l):this._splitRoot(n,l)}_splitRoot(t,i){this.data=Qa([t,i]),this.data.height=t.height+1,this.data.leaf=!1,ka(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let s,a=1/0,r=1/0;for(let l=i;l<=n-i;l++){const o=zl(t,0,l,this.toBBox),h=zl(t,l,n,this.toBBox),u=yA(o,h),f=ld(o)+ld(h);u<a?(a=u,s=l,r=f<r?f:r):u===a&&f<r&&(r=f,s=l)}return s||n-i}_chooseSplitAxis(t,i,n){const s=t.leaf?this.compareMinX:gA,a=t.leaf?this.compareMinY:_A,r=this._allDistMargin(t,i,n,s),l=this._allDistMargin(t,i,n,a);r<l&&t.children.sort(s)}_allDistMargin(t,i,n,s){t.children.sort(s);const a=this.toBBox,r=zl(t,0,i,a),l=zl(t,n-i,n,a);let o=Bh(r)+Bh(l);for(let h=i;h<n-i;h++){const u=t.children[h];jl(r,t.leaf?a(u):u),o+=Bh(r)}for(let h=n-i-1;h>=i;h--){const u=t.children[h];jl(l,t.leaf?a(u):u),o+=Bh(l)}return o}_adjustParentBBoxes(t,i,n){for(let s=n;s>=0;s--)jl(i[s],t)}_condense(t){for(let i=t.length-1,n;i>=0;i--)t[i].children.length===0?i>0?(n=t[i-1].children,n.splice(n.indexOf(t[i]),1)):this.clear():ka(t[i],this.toBBox)}};function dA(e,t,i){if(!i)return t.indexOf(e);for(let n=0;n<t.length;n++)if(i(e,t[n]))return n;return-1}function ka(e,t){zl(e,0,e.children.length,t,e)}function zl(e,t,i,n,s){s||(s=Qa(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let a=t;a<i;a++){const r=e.children[a];jl(s,e.leaf?n(r):r)}return s}function jl(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function gA(e,t){return e.minX-t.minX}function _A(e,t){return e.minY-t.minY}function ld(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Bh(e){return e.maxX-e.minX+(e.maxY-e.minY)}function mA(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function yA(e,t){const i=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,a-n)}function od(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Xh(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Qa(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Py(e,t,i,n,s){const a=[t,i];for(;a.length;){if(i=a.pop(),t=a.pop(),i-t<=n)continue;const r=t+Math.ceil((i-t)/n/2)*n;kx(e,r,t,i,s),a.push(t,r,r,i)}}const B_=[NaN,NaN,NaN,0];let hd;function pA(){return hd||(hd=me(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),hd}const vA=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,EA=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,xA=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,SA=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Yh(e,t){return e.endsWith("%")?Number(e.substring(0,e.length-1))/t:Number(e)}function uo(e){throw new Error('failed to parse "'+e+'" as color')}function Xx(e){if(e.toLowerCase().startsWith("rgb")){const a=e.match(EA)||e.match(vA)||e.match(xA);if(a){const r=a[4],l=100/255;return[Wt(Yh(a[1],l)+.5|0,0,255),Wt(Yh(a[2],l)+.5|0,0,255),Wt(Yh(a[3],l)+.5|0,0,255),r!==void 0?Wt(Yh(r,100),0,1):1]}uo(e)}if(e.startsWith("#")){if(SA.test(e)){const a=e.substring(1),r=a.length<=4?1:2,l=[0,0,0,255];for(let o=0,h=a.length;o<h;o+=r){let u=parseInt(a.substring(o,o+r),16);r===1&&(u+=u<<4),l[o/r]=u}return l[3]=l[3]/255,l}uo(e)}const t=pA();t.fillStyle="#abcdef";let i=t.fillStyle;t.fillStyle=e,t.fillStyle===i&&(t.fillStyle="#fedcba",i=t.fillStyle,t.fillStyle=e,t.fillStyle===i&&uo(e));const n=t.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return Xx(n);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const s=Array.from(t.getImageData(0,0,1,1).data);return s[3]=Uc(s[3]/255,3),s}function MA(e){return typeof e=="string"?e:Y_(e)}const bA=1024,bl={};let ud=0;function wA(e){if(e.length===4)return e;const t=e.slice();return t[3]=1,t}function cd(e){return e>.0031308?Math.pow(e,1/2.4)*269.025-14.025:e*3294.6}function fd(e){return e>.2068965?Math.pow(e,3):(e-4/29)*(108/841)}function dd(e){return e>10.314724?Math.pow((e+14.025)/269.025,2.4):e/3294.6}function gd(e){return e>.0088564?Math.pow(e,1/3):e/(108/841)+4/29}function zy(e){const t=dd(e[0]),i=dd(e[1]),n=dd(e[2]),s=gd(t*.222488403+i*.716873169+n*.06060791),a=500*(gd(t*.452247074+i*.399439023+n*.148375274)-s),r=200*(s-gd(t*.016863605+i*.117638439+n*.865350722)),l=Math.atan2(r,a)*(180/Math.PI);return[116*s-16,Math.sqrt(a*a+r*r),l<0?l+360:l,e[3]]}function CA(e){const t=(e[0]+16)/116,i=e[1],n=e[2]*Math.PI/180,s=fd(t),a=fd(t+i/500*Math.cos(n)),r=fd(t-i/200*Math.sin(n)),l=cd(a*3.021973625-s*1.617392459-r*.404875592),o=cd(a*-.943766287+s*1.916279586+r*.027607165),h=cd(a*.069407491-s*.22898585+r*1.159737864);return[Wt(l+.5|0,0,255),Wt(o+.5|0,0,255),Wt(h+.5|0,0,255),e[3]]}function X_(e){if(e==="none")return B_;if(bl.hasOwnProperty(e))return bl[e];if(ud>=bA){let i=0;for(const n in bl)i++&3||(delete bl[n],--ud)}const t=Xx(e);t.length!==4&&uo(e);for(const i of t)isNaN(i)&&uo(e);return bl[e]=t,++ud,t}function Zr(e){return Array.isArray(e)?e:X_(e)}function Y_(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let i=e[1];i!=(i|0)&&(i=i+.5|0);let n=e[2];n!=(n|0)&&(n=n+.5|0);const s=e[3]===void 0?1:Math.round(e[3]*1e3)/1e3;return"rgba("+t+","+i+","+n+","+s+")"}function jy(e){return e[0]>0&&e[1]>0}function TA(e,t,i){return i===void 0&&(i=[0,0]),i[0]=e[0]*t+.5|0,i[1]=e[1]*t+.5|0,i}function ei(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}let Ia=0;const ze=1<<Ia++,mt=1<<Ia++,Ke=1<<Ia++,Zi=1<<Ia++,wa=1<<Ia++,Fl=1<<Ia++,qh=Math.pow(2,Ia)-1,q_={[ze]:"boolean",[mt]:"number",[Ke]:"string",[Zi]:"color",[wa]:"number[]",[Fl]:"size"},RA=Object.keys(q_).map(Number).sort(In);function AA(e){return e in q_}function Ul(e){const t=[];for(const i of RA)kl(e,i)&&t.push(q_[i]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function kl(e,t){return(e&t)===t}function Qn(e,t){return e===t}class ge{constructor(t,i){if(!AA(t))throw new Error(`literal expressions must have a specific type, got ${Ul(t)}`);this.type=t,this.value=i}}class OA{constructor(t,i,...n){this.type=t,this.operator=i,this.args=n}}function Yx(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Oe(e,t,i){switch(typeof e){case"boolean":{if(Qn(t,Ke))return new ge(Ke,e?"true":"false");if(!kl(t,ze))throw new Error(`got a boolean, but expected ${Ul(t)}`);return new ge(ze,e)}case"number":{if(Qn(t,Fl))return new ge(Fl,ei(e));if(Qn(t,ze))return new ge(ze,!!e);if(Qn(t,Ke))return new ge(Ke,e.toString());if(!kl(t,mt))throw new Error(`got a number, but expected ${Ul(t)}`);return new ge(mt,e)}case"string":{if(Qn(t,Zi))return new ge(Zi,X_(e));if(Qn(t,ze))return new ge(ze,!!e);if(!kl(t,Ke))throw new Error(`got a string, but expected ${Ul(t)}`);return new ge(Ke,e)}}if(!Array.isArray(e))throw new Error("expression must be an array or a primitive value");if(e.length===0)throw new Error("empty expression");if(typeof e[0]=="string")return kA(e,t,i);for(const n of e)if(typeof n!="number")throw new Error("expected an array of numbers");if(Qn(t,Fl)){if(e.length!==2)throw new Error(`expected an array of two values for a size, got ${e.length}`);return new ge(Fl,e)}if(Qn(t,Zi)){if(e.length===3)return new ge(Zi,[...e,1]);if(e.length===4)return new ge(Zi,e);throw new Error(`expected an array of 3 or 4 values for a color, got ${e.length}`)}if(!kl(t,wa))throw new Error(`got an array of numbers, but expected ${Ul(t)}`);return new ge(wa,e)}const N={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},LA={[N.Get]:J(lt(1,1/0),Fy),[N.Var]:J(lt(1,1),NA),[N.Has]:J(lt(1,1/0),Fy),[N.Id]:J(GA,Ba),[N.Concat]:J(lt(2,1/0),St(Ke)),[N.GeometryType]:J(DA,Ba),[N.LineMetric]:J(Ba),[N.Resolution]:J(_d,Ba),[N.Zoom]:J(_d,Ba),[N.Time]:J(_d,Ba),[N.Any]:J(lt(2,1/0),St(ze)),[N.All]:J(lt(2,1/0),St(ze)),[N.Not]:J(lt(1,1),St(ze)),[N.Equal]:J(lt(2,2),St(qh)),[N.NotEqual]:J(lt(2,2),St(qh)),[N.GreaterThan]:J(lt(2,2),St(mt)),[N.GreaterThanOrEqualTo]:J(lt(2,2),St(mt)),[N.LessThan]:J(lt(2,2),St(mt)),[N.LessThanOrEqualTo]:J(lt(2,2),St(mt)),[N.Multiply]:J(lt(2,1/0),Uy),[N.Coalesce]:J(lt(2,1/0),Uy),[N.Divide]:J(lt(2,2),St(mt)),[N.Add]:J(lt(2,1/0),St(mt)),[N.Subtract]:J(lt(2,2),St(mt)),[N.Clamp]:J(lt(3,3),St(mt)),[N.Mod]:J(lt(2,2),St(mt)),[N.Pow]:J(lt(2,2),St(mt)),[N.Abs]:J(lt(1,1),St(mt)),[N.Floor]:J(lt(1,1),St(mt)),[N.Ceil]:J(lt(1,1),St(mt)),[N.Round]:J(lt(1,1),St(mt)),[N.Sin]:J(lt(1,1),St(mt)),[N.Cos]:J(lt(1,1),St(mt)),[N.Atan]:J(lt(1,2),St(mt)),[N.Sqrt]:J(lt(1,1),St(mt)),[N.Match]:J(lt(4,1/0),ky,PA),[N.Between]:J(lt(3,3),St(mt)),[N.Interpolate]:J(lt(6,1/0),ky,zA),[N.Case]:J(lt(3,1/0),IA,jA),[N.In]:J(lt(2,2),FA),[N.Number]:J(lt(1,1/0),St(qh)),[N.String]:J(lt(1,1/0),St(qh)),[N.Array]:J(lt(1,1/0),St(mt)),[N.Color]:J(lt(1,4),St(mt)),[N.Band]:J(lt(1,3),St(mt)),[N.Palette]:J(lt(2,2),UA),[N.ToString]:J(lt(1,1),St(ze|mt|Ke|Zi))};function Fy(e,t,i){const n=e.length-1,s=new Array(n);for(let a=0;a<n;++a){const r=e[a+1];switch(typeof r){case"number":{s[a]=new ge(mt,r);break}case"string":{s[a]=new ge(Ke,r);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${r}`)}a===0&&i.properties.add(String(r))}return s}function NA(e,t,i){const n=e[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return i.variables.add(n),[new ge(Ke,n)]}function GA(e,t,i){i.featureId=!0}function DA(e,t,i){i.geometryType=!0}function _d(e,t,i){i.mapState=!0}function Ba(e,t,i){const n=e[0];if(e.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function lt(e,t){return function(i,n,s){const a=i[0],r=i.length-1;if(e===t){if(r!==e){const l=e===1?"":"s";throw new Error(`expected ${e} argument${l} for ${a}, got ${r}`)}}else if(r<e||r>t){const l=t===1/0?`${e} or more`:`${e} to ${t}`;throw new Error(`expected ${l} arguments for ${a}, got ${r}`)}}}function Uy(e,t,i){const n=e.length-1,s=new Array(n);for(let a=0;a<n;++a){const r=Oe(e[a+1],t,i);s[a]=r}return s}function St(e){return function(t,i,n){const s=t.length-1,a=new Array(s);for(let r=0;r<s;++r){const l=Oe(t[r+1],e,n);a[r]=l}return a}}function IA(e,t,i){const n=e[0],s=e.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${s} instead`)}function ky(e,t,i){const n=e[0],s=e.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${s} instead`)}function PA(e,t,i){const n=e.length-1,s=Ke|mt|ze,a=Oe(e[1],s,i),r=Oe(e[e.length-1],t,i),l=new Array(n-2);for(let o=0;o<n-2;o+=2){try{const h=Oe(e[o+2],a.type,i);l[o]=h}catch(h){throw new Error(`failed to parse argument ${o+1} of match expression: ${h.message}`)}try{const h=Oe(e[o+3],r.type,i);l[o+1]=h}catch(h){throw new Error(`failed to parse argument ${o+2} of match expression: ${h.message}`)}}return[a,...l,r]}function zA(e,t,i){const n=e[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":const o=n[1];if(typeof o!="number"||o<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(o)} instead`);s=o;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const a=new ge(mt,s);let r;try{r=Oe(e[2],mt,i)}catch(o){throw new Error(`failed to parse argument 1 in interpolate expression: ${o.message}`)}const l=new Array(e.length-3);for(let o=0;o<l.length;o+=2){try{const h=Oe(e[o+3],mt,i);l[o]=h}catch(h){throw new Error(`failed to parse argument ${o+2} for interpolate expression: ${h.message}`)}try{const h=Oe(e[o+4],t,i);l[o+1]=h}catch(h){throw new Error(`failed to parse argument ${o+3} for interpolate expression: ${h.message}`)}}return[a,r,...l]}function jA(e,t,i){const n=Oe(e[e.length-1],t,i),s=new Array(e.length-1);for(let a=0;a<s.length-1;a+=2){try{const r=Oe(e[a+1],ze,i);s[a]=r}catch(r){throw new Error(`failed to parse argument ${a} of case expression: ${r.message}`)}try{const r=Oe(e[a+2],n.type,i);s[a+1]=r}catch(r){throw new Error(`failed to parse argument ${a+1} of case expression: ${r.message}`)}}return s[s.length-1]=n,s}function FA(e,t,i){let n=e[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],s=Ke}else s=mt;const a=new Array(n.length);for(let l=0;l<a.length;l++)try{const o=Oe(n[l],s,i);a[l]=o}catch(o){throw new Error(`failed to parse haystack item ${l} for "in" expression: ${o.message}`)}return[Oe(e[1],s,i),...a]}function UA(e,t,i){let n;try{n=Oe(e[1],mt,i)}catch(r){throw new Error(`failed to parse first argument in palette expression: ${r.message}`)}const s=e[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const a=new Array(s.length);for(let r=0;r<a.length;r++){let l;try{l=Oe(s[r],Zi,i)}catch(o){throw new Error(`failed to parse color at index ${r} in palette expression: ${o.message}`)}if(!(l instanceof ge))throw new Error(`the palette color at index ${r} must be a literal value`);a[r]=l}return[n,...a]}function J(...e){return function(t,i,n){const s=t[0];let a;for(let r=0;r<e.length;r++){const l=e[r](t,i,n);if(r==e.length-1){if(!l)throw new Error("expected last argument validator to return the parsed args");a=l}}return new OA(i,s,...a)}}function kA(e,t,i){const n=e[0],s=LA[n];if(!s)throw new Error(`unknown operator: ${n}`);return s(e,t,i)}function qx(e){if(!e)return"";const t=e.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return qx(e.getGeometries()[0]);default:return""}}function Hx(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Vn(e,t,i){const n=Oe(e,t,i);return Qi(n)}function Qi(e,t){if(e instanceof ge){if(e.type===Zi&&typeof e.value=="string"){const n=X_(e.value);return function(){return n}}return function(){return e.value}}const i=e.operator;switch(i){case N.Number:case N.String:case N.Coalesce:return BA(e);case N.Get:case N.Var:case N.Has:return XA(e);case N.Id:return n=>n.featureId;case N.GeometryType:return n=>n.geometryType;case N.Concat:{const n=e.args.map(s=>Qi(s));return s=>"".concat(...n.map(a=>a(s).toString()))}case N.Resolution:return n=>n.resolution;case N.Any:case N.All:case N.Between:case N.In:case N.Not:return qA(e);case N.Equal:case N.NotEqual:case N.LessThan:case N.LessThanOrEqualTo:case N.GreaterThan:case N.GreaterThanOrEqualTo:return YA(e);case N.Multiply:case N.Divide:case N.Add:case N.Subtract:case N.Clamp:case N.Mod:case N.Pow:case N.Abs:case N.Floor:case N.Ceil:case N.Round:case N.Sin:case N.Cos:case N.Atan:case N.Sqrt:return HA(e);case N.Case:return ZA(e);case N.Match:return VA(e);case N.Interpolate:return KA(e);case N.ToString:return WA(e);default:throw new Error(`Unsupported operator ${i}`)}}function BA(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let a=0;a<n;++a)s[a]=Qi(e.args[a]);switch(i){case N.Coalesce:return a=>{for(let r=0;r<n;++r){const l=s[r](a);if(typeof l<"u"&&l!==null)return l}throw new Error("Expected one of the values to be non-null")};case N.Number:case N.String:return a=>{for(let r=0;r<n;++r){const l=s[r](a);if(typeof l===i)return l}throw new Error(`Expected one of the values to be a ${i}`)};default:throw new Error(`Unsupported assertion operator ${i}`)}}function XA(e,t){const n=e.args[0].value;switch(e.operator){case N.Get:return s=>{const a=e.args;let r=s.properties[n];for(let l=1,o=a.length;l<o;++l){const u=a[l].value;r=r[u]}return r};case N.Var:return s=>s.variables[n];case N.Has:return s=>{const a=e.args;if(!(n in s.properties))return!1;let r=s.properties[n];for(let l=1,o=a.length;l<o;++l){const u=a[l].value;if(!r||!Object.hasOwn(r,u))return!1;r=r[u]}return!0};default:throw new Error(`Unsupported accessor operator ${e.operator}`)}}function YA(e,t){const i=e.operator,n=Qi(e.args[0]),s=Qi(e.args[1]);switch(i){case N.Equal:return a=>n(a)===s(a);case N.NotEqual:return a=>n(a)!==s(a);case N.LessThan:return a=>n(a)<s(a);case N.LessThanOrEqualTo:return a=>n(a)<=s(a);case N.GreaterThan:return a=>n(a)>s(a);case N.GreaterThanOrEqualTo:return a=>n(a)>=s(a);default:throw new Error(`Unsupported comparison operator ${i}`)}}function qA(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let a=0;a<n;++a)s[a]=Qi(e.args[a]);switch(i){case N.Any:return a=>{for(let r=0;r<n;++r)if(s[r](a))return!0;return!1};case N.All:return a=>{for(let r=0;r<n;++r)if(!s[r](a))return!1;return!0};case N.Between:return a=>{const r=s[0](a),l=s[1](a),o=s[2](a);return r>=l&&r<=o};case N.In:return a=>{const r=s[0](a);for(let l=1;l<n;++l)if(r===s[l](a))return!0;return!1};case N.Not:return a=>!s[0](a);default:throw new Error(`Unsupported logical operator ${i}`)}}function HA(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let a=0;a<n;++a)s[a]=Qi(e.args[a]);switch(i){case N.Multiply:return a=>{let r=1;for(let l=0;l<n;++l)r*=s[l](a);return r};case N.Divide:return a=>s[0](a)/s[1](a);case N.Add:return a=>{let r=0;for(let l=0;l<n;++l)r+=s[l](a);return r};case N.Subtract:return a=>s[0](a)-s[1](a);case N.Clamp:return a=>{const r=s[0](a),l=s[1](a);if(r<l)return l;const o=s[2](a);return r>o?o:r};case N.Mod:return a=>s[0](a)%s[1](a);case N.Pow:return a=>Math.pow(s[0](a),s[1](a));case N.Abs:return a=>Math.abs(s[0](a));case N.Floor:return a=>Math.floor(s[0](a));case N.Ceil:return a=>Math.ceil(s[0](a));case N.Round:return a=>Math.round(s[0](a));case N.Sin:return a=>Math.sin(s[0](a));case N.Cos:return a=>Math.cos(s[0](a));case N.Atan:return n===2?a=>Math.atan2(s[0](a),s[1](a)):a=>Math.atan(s[0](a));case N.Sqrt:return a=>Math.sqrt(s[0](a));default:throw new Error(`Unsupported numeric operator ${i}`)}}function ZA(e,t){const i=e.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Qi(e.args[s]);return s=>{for(let a=0;a<i-1;a+=2)if(n[a](s))return n[a+1](s);return n[i-1](s)}}function VA(e,t){const i=e.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Qi(e.args[s]);return s=>{const a=n[0](s);for(let r=1;r<i-1;r+=2)if(a===n[r](s))return n[r+1](s);return n[i-1](s)}}function KA(e,t){const i=e.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Qi(e.args[s]);return s=>{const a=n[0](s),r=n[1](s);let l,o;for(let h=2;h<i;h+=2){const u=n[h](s);let f=n[h+1](s);const c=Array.isArray(f);if(c&&(f=wA(f)),u>=r)return h===2?f:c?QA(a,r,l,o,u,f):Bl(a,r,l,o,u,f);l=u,o=f}return o}}function WA(e,t){const i=e.operator,n=e.args.length,s=new Array(n);for(let a=0;a<n;++a)s[a]=Qi(e.args[a]);switch(i){case N.ToString:return a=>{const r=s[0](a);return e.args[0].type===Zi?Y_(r):r.toString()};default:throw new Error(`Unsupported convert operator ${i}`)}}function Bl(e,t,i,n,s,a){const r=s-i;if(r===0)return n;const l=t-i,o=e===1?l/r:(Math.pow(e,l)-1)/(Math.pow(e,r)-1);return n+o*(a-n)}function QA(e,t,i,n,s,a){if(s-i===0)return n;const l=zy(n),o=zy(a);let h=o[2]-l[2];h>180?h-=360:h<-180&&(h+=360);const u=[Bl(e,t,i,l[0],s,o[0]),Bl(e,t,i,l[1],s,o[1]),l[2]+Bl(e,t,i,0,s,h),Bl(e,t,i,n[3],s,a[3])];return CA(u)}const ot={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function JA(e,t,i){const n=e;let s=!0,a=!1,r=!1;const l=[$u(n,st.LOAD,function(){r=!0,a||t()})];return n.src&&ix?(a=!0,n.decode().then(function(){s&&t()}).catch(function(o){s&&(r?t():i())})):l.push($u(n,st.ERROR,i)),function(){s=!1,l.forEach(Bt)}}function $A(e,t){return new Promise((i,n)=>{function s(){r(),i(e)}function a(){r(),n(new Error("Image load error"))}function r(){e.removeEventListener("load",s),e.removeEventListener("error",a)}e.addEventListener("load",s),e.addEventListener("error",a)})}function tO(e,t){return t&&(e.src=t),e.src&&ix?new Promise((i,n)=>e.decode().then(()=>i(e)).catch(s=>e.complete&&e.width?i(e):n(s))):$A(e)}class eO{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const i in this.cache_){const n=this.cache_[i];!(t++&3)&&!n.hasListener()&&(delete this.cache_[i],delete this.patternCache_[i],--this.cacheSize_)}}}get(t,i,n){const s=md(t,i,n);return s in this.cache_?this.cache_[s]:null}getPattern(t,i,n){const s=md(t,i,n);return s in this.patternCache_?this.patternCache_[s]:null}set(t,i,n,s,a){const r=md(t,i,n),l=r in this.cache_;this.cache_[r]=s,a&&(s.getImageState()===ot.IDLE&&s.load(),s.getImageState()===ot.LOADING?s.ready().then(()=>{this.patternCache_[r]=ac().createPattern(s.getImage(1),"repeat")}):this.patternCache_[r]=ac().createPattern(s.getImage(1),"repeat")),l||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function md(e,t,i){const n=i?Zr(i):"null";return t+":"+e+":"+n}const Ii=new eO;let wl=null;class Zx extends Fc{constructor(t,i,n,s,a){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=a,this.imageState_=s===void 0?ot.IDLE:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=i,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ot.LOADED){wl||(wl=me(1,1,void 0,{willReadFrequently:!0})),wl.drawImage(this.image_,0,0);try{wl.getImageData(0,0,1,1),this.tainted_=!1}catch{wl=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(st.CHANGE)}handleImageError_(){this.imageState_=ot.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ot.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],i=this.size_[1],n=me(t,i);n.fillRect(0,0,t,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ot.IDLE){this.image_||this.initializeImage_(),this.imageState_=ot.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&tO(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==ot.LOADED)return;const i=this.image_,n=me(Math.ceil(i.width*t),Math.ceil(i.height*t)),s=n.canvas;n.scale(t,t),n.drawImage(i,0,0),n.globalCompositeOperation="multiply",n.fillStyle=MA(this.color_),n.fillRect(0,0,s.width/t,s.height/t),n.globalCompositeOperation="destination-in",n.drawImage(i,0,0),this.canvas_[t]=s}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===ot.LOADED||this.imageState_===ot.ERROR)t();else{const i=()=>{(this.imageState_===ot.LOADED||this.imageState_===ot.ERROR)&&(this.removeEventListener(st.CHANGE,i),t())};this.addEventListener(st.CHANGE,i)}})),this.ready_}}function rc(e,t,i,n,s,a){let r=t===void 0?void 0:Ii.get(t,i,s);return r||(r=new Zx(e,e&&"src"in e?e.src||void 0:t,i,n,s),Ii.set(t,i,s,r,a)),a&&r&&!Ii.getPattern(t,i,s)&&Ii.set(t,i,s,r,a),r}function ln(e){return e?Array.isArray(e)?Y_(e):typeof e=="object"&&"src"in e?iO(e):e:null}function iO(e){if(!e.offset||!e.size)return Ii.getPattern(e.src,"anonymous",e.color);const t=e.src+":"+e.offset,i=Ii.getPattern(t,void 0,e.color);if(i)return i;const n=Ii.get(e.src,"anonymous",null);if(n.getImageState()!==ot.LOADED)return null;const s=me(e.size[0],e.size[1]);return s.drawImage(n.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),rc(s.canvas,t,void 0,ot.LOADED,e.color,!0),Ii.getPattern(t,void 0,e.color)}const Vx="10px sans-serif",We="#000",Vr="round",Pn=[],zn=0,Kr="round",jo=10,Fo="#000",Uo="center",lc="middle",ra=[0,0,0,0],ko=1,Ja=new dn;let Cl=null,By;const q0={},nO=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function sO(e,t,i){return`${e} ${t} 16px "${i}"`}const aO=function(){let t,i;async function n(a){await i.ready;const r=await i.load(a);if(r.length===0)return!1;const l=X0(a),o=l.families[0].toLowerCase(),h=l.weight;return r.some(u=>{const f=u.family.replace(/^['"]|['"]$/g,"").toLowerCase(),c=B0[u.weight]||u.weight;return f===o&&u.style===l.style&&c==h})}async function s(){await i.ready;let a=!0;const r=Ja.getProperties(),l=Object.keys(r).filter(o=>r[o]<100);for(let o=l.length-1;o>=0;--o){const h=l[o];let u=r[h];u<100&&(await n(h)?(lh(q0),Ja.set(h,100)):(u+=10,Ja.set(h,u,!0),u<100&&(a=!1)))}t=void 0,a||(t=setTimeout(s,100))}return async function(a){i||(i=di?self.fonts:document.fonts);const r=X0(a);if(!r)return;const l=r.families;let o=!1;for(const h of l){if(nO.has(h))continue;const u=sO(r.style,r.weight,h);Ja.get(u)===void 0&&(Ja.set(u,0,!0),o=!0)}o&&(clearTimeout(t),t=setTimeout(s,100))}}(),rO=function(){let e;return function(t){let i=q0[t];if(i==null){if(di){const n=X0(t),s=Kx(t,"g");i=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),i=e.offsetHeight,document.body.removeChild(e);q0[t]=i}return i}}();function Kx(e,t){return Cl||(Cl=me(1,1)),e!=By&&(Cl.font=e,By=Cl.font),Cl.measureText(t)}function Wx(e,t){return Kx(e,t).width}function Xy(e,t,i){if(t in i)return i[t];const n=t.split(`
`).reduce((s,a)=>Math.max(s,Wx(e,a)),0);return i[t]=n,n}function lO(e,t){const i=[],n=[],s=[];let a=0,r=0,l=0,o=0;for(let h=0,u=t.length;h<=u;h+=2){const f=t[h];if(f===`
`||h===u){a=Math.max(a,r),s.push(r),r=0,l+=o,o=0;continue}const c=t[h+1]||e.font,d=Wx(c,f);i.push(d),r+=d;const g=rO(c);n.push(g),o=Math.max(o,g)}return{width:a,height:l,widths:i,heights:n,lineWidths:s}}function oO(e,t,i,n,s,a,r,l,o,h,u){e.save(),i!==1&&(e.globalAlpha===void 0?e.globalAlpha=f=>f.globalAlpha*=i:e.globalAlpha*=i),t&&e.transform.apply(e,t),n.contextInstructions?(e.translate(o,h),e.scale(u[0],u[1]),hO(n,e)):u[0]<0||u[1]<0?(e.translate(o,h),e.scale(u[0],u[1]),e.drawImage(n,s,a,r,l,0,0,r,l)):e.drawImage(n,s,a,r,l,o,h,r*u[0],l*u[1]),e.restore()}function hO(e,t){const i=e.contextInstructions;for(let n=0,s=i.length;n<s;n+=2)Array.isArray(i[n+1])?t[i[n]].apply(t,i[n+1]):t[i[n]]=i[n+1]}class tf{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ei(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new tf({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return $()}getImage(t){return $()}getHitDetectionImage(){return $()}getPixelRatio(t){return 1}getImageState(){return $()}getImageSize(){return $()}getOrigin(){return $()}getSize(){return $()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ei(t)}listenImageChange(t){$()}load(){$()}unlistenImageChange(t){$()}ready(){return Promise.resolve()}}class ef extends tf{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ot.LOADING:ot.LOADED,this.imageState_===ot.LOADING&&this.ready().then(()=>this.imageState_=ot.LOADED),this.render()}clone(){const t=this.getScale(),i=new ef({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){const t=this.size_,i=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-i[0]/n[0],t[1]/2+i[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var a,r;const i=(a=this.fill_)==null?void 0:a.getKey(),n=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${i}`+Object.values(this.renderOptions_).join(",");let s=(r=Ii.get(n,null,null))==null?void 0:r.getImage(1);if(!s){const l=this.renderOptions_,o=Math.ceil(l.size*t),h=me(o,o);this.draw_(l,h,t),s=h.canvas,Ii.set(n,null,null,new Zx(s,void 0,null,ot.LOADED,null))}return s}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,i,n){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;let s=this.radius,a=this.radius2_===void 0?s:this.radius2_;if(s<a){const T=s;s=a,a=T}const r=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/r,o=a*Math.sin(l),h=Math.sqrt(a*a-o*o),u=s-h,f=Math.sqrt(o*o+u*u),c=f/o;if(t==="miter"&&c<=n)return c*i;const d=i/2/c,g=i/2*(u/f),v=Math.sqrt((s+d)*(s+d)+g*g)-s;if(this.radius2_===void 0||t==="bevel")return v*2;const _=s*Math.sin(l),m=Math.sqrt(s*s-_*_),p=a-m,M=Math.sqrt(_*_+p*p)/_;if(M<=n){const T=M*i/2-a-s;return 2*Math.max(v,T)}return v*2}createRenderOptions(){let t=Vr,i=Kr,n=0,s=null,a=0,r,l=0;this.stroke_&&(r=ln(this.stroke_.getColor()??Fo),l=this.stroke_.getWidth()??ko,s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset()??0,i=this.stroke_.getLineJoin()??Kr,t=this.stroke_.getLineCap()??Vr,n=this.stroke_.getMiterLimit()??jo);const o=this.calculateLineJoinSize_(i,l,n),h=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*h+o);return{strokeStyle:r,strokeWidth:l,size:u,lineCap:t,lineDash:s,lineDashOffset:a,lineJoin:i,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,i,n){if(i.scale(n,n),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){let s=this.fill_.getColor();s===null&&(s=We),i.fillStyle=ln(s),i.fill()}t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}createHitDetectionCanvas_(t){let i;if(this.fill_){let n=this.fill_.getColor(),s=0;typeof n=="string"&&(n=Zr(n)),n===null?s=1:Array.isArray(n)&&(s=n.length===4?n[3]:1),s===0&&(i=me(t.size,t.size),this.drawHitDetectionCanvas_(t,i))}return i?i.canvas:this.getImage(1)}createPath_(t){let i=this.points_;const n=this.radius;if(i===1/0)t.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(i*=2);const a=this.angle_-Math.PI/2,r=2*Math.PI/i;for(let l=0;l<i;l++){const o=a+l*r,h=l%2===0?n:s;t.lineTo(h*Math.cos(o),h*Math.sin(o))}t.closePath()}}drawHitDetectionCanvas_(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=We,i.fill(),t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Wr extends ef{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),i=new Wr({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}setRadius(t){this.radius=t,this.render()}}class Vi{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Vi({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const i=rc(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));i.ready().then(()=>{this.patternImage_=null}),i.getImageState()===ot.IDLE&&i.load(),i.getImageState()===ot.LOADING&&(this.patternImage_=i)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?xt(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:Zr(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Yy(e,t,i,n){return i!==void 0&&n!==void 0?[i/e,n/t]:i!==void 0?i/e:n!==void 0?n/t:1}class gh extends tf{constructor(t){t=t||{};const i=t.opacity!==void 0?t.opacity:1,n=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,a=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:i,rotation:n,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:a,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const r=t.img!==void 0?t.img:null;let l=t.src;Rt(!(l!==void 0&&r),"`image` and `src` cannot be provided at the same time"),(l===void 0||l.length===0)&&r&&(l=r.src||xt(r)),Rt(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),Rt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let o;if(t.src!==void 0?o=ot.IDLE:r!==void 0&&("complete"in r?r.complete?o=r.src?ot.LOADED:ot.IDLE:o=ot.LOADING:o=ot.LOADED),this.color_=t.color!==void 0?Zr(t.color):null,this.iconImage_=rc(r,l,this.crossOrigin_,o,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let h,u;if(t.size)[h,u]=t.size;else{const f=this.getImage(1);if(f.width&&f.height)h=f.width,u=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=t;const c=()=>{if(this.unlistenImageChange(c),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(Yy(d[0],d[1],t.width,t.height))};this.listenImageChange(c);return}}h!==void 0&&this.setScale(Yy(h,u,t.width,t.height))}}clone(){let t,i,n;return this.initialOptions_?(i=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new gh({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:i,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}const i=this.getDisplacement(),n=this.getScaleArray();return[t[0]-i[0]/n[0],t[1]+i[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=n[0]-i[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=n[1]-i[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(t){this.iconImage_=rc(null,t,this.crossOrigin_,ot.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==ot.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==ot.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(st.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(st.CHANGE,t)}ready(){return this.iconImage_.ready()}}class Rn{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Rn({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class jn{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=qy,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new jn({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(i){return i.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=qy,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function uO(e){let t;if(typeof e=="function")t=e;else{let i;Array.isArray(e)?i=e:(Rt(typeof e.getZIndex=="function","Expected an `Style` or an array of `Style`"),i=[e]),t=function(){return i}}return t}let yd=null;function Qx(e,t){if(!yd){const i=new Vi({color:"rgba(255,255,255,0.4)"}),n=new Rn({color:"#3399CC",width:1.25});yd=[new jn({image:new Wr({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return yd}function qy(e){return e.getGeometry()}const cO="#333";class nf{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=ei(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Vi({color:cO}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new nf({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Vi?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ei(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}function fO(e){return!0}function dO(e){const t=Yx(),i=gO(e,t),n=Hx();return function(s,a){if(n.properties=s.getPropertiesInternal(),n.resolution=a,t.featureId){const r=s.getId();r!==void 0?n.featureId=r:n.featureId=null}return t.geometryType&&(n.geometryType=qx(s.getGeometry())),i(n)}}function Hy(e){const t=Yx(),i=e.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=H0(e[r],t);const s=Hx(),a=new Array(i);return function(r,l){if(s.properties=r.getPropertiesInternal(),s.resolution=l,t.featureId){const h=r.getId();h!==void 0?s.featureId=h:s.featureId=null}let o=0;for(let h=0;h<i;++h){const u=n[h](s);u&&(a[o]=u,o+=1)}return a.length=o,a}}function gO(e,t){const i=e.length,n=new Array(i);for(let s=0;s<i;++s){const a=e[s],r="filter"in a?Vn(a.filter,ze,t):fO;let l;if(Array.isArray(a.style)){const o=a.style.length;l=new Array(o);for(let h=0;h<o;++h)l[h]=H0(a.style[h],t)}else l=[H0(a.style,t)];n[s]={filter:r,styles:l}}return function(s){const a=[];let r=!1;for(let l=0;l<i;++l){const o=n[l].filter;if(o(s)&&!(e[l].else&&r)){r=!0;for(const h of n[l].styles){const u=h(s);u&&a.push(u)}}}return a}}function H0(e,t){const i=Bo(e,"",t),n=Xo(e,"",t),s=_O(e,t),a=mO(e,t),r=$e(e,"z-index",t);if(!i&&!n&&!s&&!a&&!Ma(e))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(e));const l=new jn;return function(o){let h=!0;if(i){const u=i(o);u&&(h=!1),l.setFill(u)}if(n){const u=n(o);u&&(h=!1),l.setStroke(u)}if(s){const u=s(o);u&&(h=!1),l.setText(u)}if(a){const u=a(o);u&&(h=!1),l.setImage(u)}return r&&l.setZIndex(r(o)),h?null:l}}function Bo(e,t,i){let n;if(t+"fill-pattern-src"in e)n=EO(e,t+"fill-",i);else{if(e[t+"fill-color"]==="none")return a=>null;n=H_(e,t+"fill-color",i)}if(!n)return null;const s=new Vi;return function(a){const r=n(a);return r===B_?null:(s.setColor(r),s)}}function Xo(e,t,i){const n=$e(e,t+"stroke-width",i),s=H_(e,t+"stroke-color",i);if(!n&&!s)return null;const a=Cn(e,t+"stroke-line-cap",i),r=Cn(e,t+"stroke-line-join",i),l=Jx(e,t+"stroke-line-dash",i),o=$e(e,t+"stroke-line-dash-offset",i),h=$e(e,t+"stroke-miter-limit",i),u=new Rn;return function(f){if(s){const c=s(f);if(c===B_)return null;u.setColor(c)}if(n&&u.setWidth(n(f)),a){const c=a(f);if(c!=="butt"&&c!=="round"&&c!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(c)}if(r){const c=r(f);if(c!=="bevel"&&c!=="round"&&c!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(c)}return l&&u.setLineDash(l(f)),o&&u.setLineDashOffset(o(f)),h&&u.setMiterLimit(h(f)),u}}function _O(e,t){const i="text-",n=Cn(e,i+"value",t);if(!n)return null;const s=Bo(e,i,t),a=Bo(e,i+"background-",t),r=Xo(e,i,t),l=Xo(e,i+"background-",t),o=Cn(e,i+"font",t),h=$e(e,i+"max-angle",t),u=$e(e,i+"offset-x",t),f=$e(e,i+"offset-y",t),c=Rr(e,i+"overflow",t),d=Cn(e,i+"placement",t),g=$e(e,i+"repeat",t),y=sf(e,i+"scale",t),v=Rr(e,i+"rotate-with-view",t),_=$e(e,i+"rotation",t),m=Cn(e,i+"align",t),p=Cn(e,i+"justify",t),E=Cn(e,i+"baseline",t),M=Rr(e,i+"keep-upright",t),T=Jx(e,i+"padding",t),b=af(e,i+"declutter-mode"),x=new nf({declutterMode:b});return function(S){if(x.setText(n(S)),s&&x.setFill(s(S)),a&&x.setBackgroundFill(a(S)),r&&x.setStroke(r(S)),l&&x.setBackgroundStroke(l(S)),o&&x.setFont(o(S)),h&&x.setMaxAngle(h(S)),u&&x.setOffsetX(u(S)),f&&x.setOffsetY(f(S)),c&&x.setOverflow(c(S)),d){const w=d(S);if(w!=="point"&&w!=="line")throw new Error("Expected point or line for text-placement");x.setPlacement(w)}if(g&&x.setRepeat(g(S)),y&&x.setScale(y(S)),v&&x.setRotateWithView(v(S)),_&&x.setRotation(_(S)),m){const w=m(S);if(w!=="left"&&w!=="center"&&w!=="right"&&w!=="end"&&w!=="start")throw new Error("Expected left, right, center, start, or end for text-align");x.setTextAlign(w)}if(p){const w=p(S);if(w!=="left"&&w!=="right"&&w!=="center")throw new Error("Expected left, right, or center for text-justify");x.setJustify(w)}if(E){const w=E(S);if(w!=="bottom"&&w!=="top"&&w!=="middle"&&w!=="alphabetic"&&w!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");x.setTextBaseline(w)}return T&&x.setPadding(T(S)),M&&x.setKeepUpright(M(S)),x}}function mO(e,t){return"icon-src"in e?yO(e,t):"shape-points"in e?pO(e,t):"circle-radius"in e?vO(e,t):null}function yO(e,t){const i="icon-",n=i+"src",s=$x(e[n],n),a=oc(e,i+"anchor",t),r=sf(e,i+"scale",t),l=$e(e,i+"opacity",t),o=oc(e,i+"displacement",t),h=$e(e,i+"rotation",t),u=Rr(e,i+"rotate-with-view",t),f=Vy(e,i+"anchor-origin"),c=Ky(e,i+"anchor-x-units"),d=Ky(e,i+"anchor-y-units"),g=bO(e,i+"color"),y=SO(e,i+"cross-origin"),v=MO(e,i+"offset"),_=Vy(e,i+"offset-origin"),m=hc(e,i+"width"),p=hc(e,i+"height"),E=xO(e,i+"size"),M=af(e,i+"declutter-mode"),T=new gh({src:s,anchorOrigin:f,anchorXUnits:c,anchorYUnits:d,color:g,crossOrigin:y,offset:v,offsetOrigin:_,height:p,width:m,size:E,declutterMode:M});return function(b){return l&&T.setOpacity(l(b)),o&&T.setDisplacement(o(b)),h&&T.setRotation(h(b)),u&&T.setRotateWithView(u(b)),r&&T.setScale(r(b)),a&&T.setAnchor(a(b)),T}}function pO(e,t){const i="shape-",n=i+"points",s=i+"radius",a=Z0(e[n],n),r=Z0(e[s],s),l=Bo(e,i,t),o=Xo(e,i,t),h=sf(e,i+"scale",t),u=oc(e,i+"displacement",t),f=$e(e,i+"rotation",t),c=Rr(e,i+"rotate-with-view",t),d=hc(e,i+"radius2"),g=hc(e,i+"angle"),y=af(e,i+"declutter-mode"),v=new ef({points:a,radius:r,radius2:d,angle:g,declutterMode:y});return function(_){return l&&v.setFill(l(_)),o&&v.setStroke(o(_)),u&&v.setDisplacement(u(_)),f&&v.setRotation(f(_)),c&&v.setRotateWithView(c(_)),h&&v.setScale(h(_)),v}}function vO(e,t){const i="circle-",n=Bo(e,i,t),s=Xo(e,i,t),a=$e(e,i+"radius",t),r=sf(e,i+"scale",t),l=oc(e,i+"displacement",t),o=$e(e,i+"rotation",t),h=Rr(e,i+"rotate-with-view",t),u=af(e,i+"declutter-mode"),f=new Wr({radius:5,declutterMode:u});return function(c){return a&&f.setRadius(a(c)),n&&f.setFill(n(c)),s&&f.setStroke(s(c)),l&&f.setDisplacement(l(c)),o&&f.setRotation(o(c)),h&&f.setRotateWithView(h(c)),r&&f.setScale(r(c)),f}}function $e(e,t,i){if(!(t in e))return;const n=Vn(e[t],mt,i);return function(s){return Z0(n(s),t)}}function Cn(e,t,i){if(!(t in e))return null;const n=Vn(e[t],Ke,i);return function(s){return $x(n(s),t)}}function EO(e,t,i){const n=Cn(e,t+"pattern-src",i),s=Zy(e,t+"pattern-offset",i),a=Zy(e,t+"pattern-size",i),r=H_(e,t+"color",i);return function(l){return{src:n(l),offset:s&&s(l),size:a&&a(l),color:r&&r(l)}}}function Rr(e,t,i){if(!(t in e))return null;const n=Vn(e[t],ze,i);return function(s){const a=n(s);if(typeof a!="boolean")throw new Error(`Expected a boolean for ${t}`);return a}}function H_(e,t,i){if(!(t in e))return null;const n=Vn(e[t],Zi,i);return function(s){return tS(n(s),t)}}function Jx(e,t,i){if(!(t in e))return null;const n=Vn(e[t],wa,i);return function(s){return _h(n(s),t)}}function oc(e,t,i){if(!(t in e))return null;const n=Vn(e[t],wa,i);return function(s){const a=_h(n(s),t);if(a.length!==2)throw new Error(`Expected two numbers for ${t}`);return a}}function Zy(e,t,i){if(!(t in e))return null;const n=Vn(e[t],wa,i);return function(s){return eS(n(s),t)}}function sf(e,t,i){if(!(t in e))return null;const n=Vn(e[t],wa|mt,i);return function(s){return wO(n(s),t)}}function hc(e,t){const i=e[t];if(i!==void 0){if(typeof i!="number")throw new Error(`Expected a number for ${t}`);return i}}function xO(e,t){const i=e[t];if(i!==void 0){if(typeof i=="number")return ei(i);if(!Array.isArray(i))throw new Error(`Expected a number or size array for ${t}`);if(i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return i}}function SO(e,t){const i=e[t];if(i!==void 0){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);return i}}function Vy(e,t){const i=e[t];if(i!==void 0){if(i!=="bottom-left"&&i!=="bottom-right"&&i!=="top-left"&&i!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return i}}function Ky(e,t){const i=e[t];if(i!==void 0){if(i!=="pixels"&&i!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return i}}function MO(e,t){const i=e[t];if(i!==void 0)return _h(i,t)}function af(e,t){const i=e[t];if(i!==void 0){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);if(i!=="declutter"&&i!=="obstacle"&&i!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return i}}function bO(e,t){const i=e[t];if(i!==void 0)return tS(i,t)}function _h(e,t){if(!Array.isArray(e))throw new Error(`Expected an array for ${t}`);const i=e.length;for(let n=0;n<i;++n)if(typeof e[n]!="number")throw new Error(`Expected an array of numbers for ${t}`);return e}function $x(e,t){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}function Z0(e,t){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}function tS(e,t){if(typeof e=="string")return e;const i=_h(e,t),n=i.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return i}function eS(e,t){const i=_h(e,t);if(i.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return i}function wO(e,t){return typeof e=="number"?e:eS(e,t)}const Wy={RENDER_ORDER:"renderOrder"};class iS extends $c{constructor(t){t=t||{};const i=Object.assign({},t);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Wy.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,i){const n=this.getDeclutter();n in t.declutter||(t.declutter[n]=new Bx(9)),this.getRenderer().renderDeclutter(t,i)}setRenderOrder(t){this.set(Wy.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?Qx:t;const i=CO(t);this.styleFunction_=t===null?void 0:uO(i),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function CO(e){if(e===void 0)return Qx;if(!e)return null;if(typeof e=="function"||e instanceof jn)return e;if(!Array.isArray(e))return Hy([e]);if(e.length===0)return[];const t=e.length,i=e[0];if(i instanceof jn){const s=new Array(t);for(let a=0;a<t;++a){const r=e[a];if(!(r instanceof jn))throw new Error("Expected a list of style instances");s[a]=r}return s}if("style"in i){const s=new Array(t);for(let a=0;a<t;++a){const r=e[a];if(!("style"in r))throw new Error("Expected a list of rules with a style property");s[a]=r}return dO(s)}return Hy(e)}class nS extends Zn{constructor(t,i,n,s){super(t),this.inversePixelTransform=i,this.frameState=n,this.context=s}}class TO extends zc{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,i){$()}calculateMatrices2D(t){const i=t.viewState,n=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;Yn(n,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),Sx(s,n)}forEachFeatureAtCoordinate(t,i,n,s,a,r,l,o){let h;const u=i.viewState;function f(E,M,T,b){return a.call(r,M,E?T:null,b)}const c=u.projection,d=fx(t.slice(),c),g=[[0,0]];if(c.canWrapX()&&s){const E=c.getExtent(),M=Nt(E);g.push([-M,0],[M,0])}const y=i.layerStatesArray,v=y.length,_=[],m=[];for(let E=0;E<g.length;E++)for(let M=v-1;M>=0;--M){const T=y[M],b=T.layer;if(b.hasRenderer()&&k_(T,u)&&l.call(o,b)){const x=b.getRenderer(),S=b.getSource();if(x&&S){const w=S.getWrapX()?d:t,A=f.bind(null,T.managed);m[0]=w[0]+g[E][0],m[1]=w[1]+g[E][1],h=x.forEachFeatureAtCoordinate(m,i,n,A,_)}if(h)return h}}if(_.length===0)return;const p=1/_.length;return _.forEach((E,M)=>E.distanceSq+=M*p),_.sort((E,M)=>E.distanceSq-M.distanceSq),_.some(E=>h=E.callback(E.feature,E.layer,E.geometry)),h}hasFeatureAtCoordinate(t,i,n,s,a,r){return this.forEachFeatureAtCoordinate(t,i,n,s,Lo,this,a,r)!==void 0}getMap(){return this.map_}renderFrame(t){$()}scheduleExpireIconCache(t){Ii.canExpireCache()&&t.postRenderFunctions.push(RO)}}function RO(e,t){Ii.expire()}class AO extends TO{constructor(t){super(t),this.fontChangeListenerKey_=vt(Ja,Xr.PROPERTYCHANGE,t.redrawText,t),this.element_=di?Dx():document.createElement("div");const i=this.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",this.element_.className=Qc+" ol-layers";const n=t.getViewport();n&&n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,i){const n=this.getMap();if(n.hasListener(t)){const s=new nS(t,void 0,i);n.dispatchEvent(s)}}disposeInternal(){Bt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Di.PRECOMPOSE,t);const i=t.layerStatesArray.sort((h,u)=>h.zIndex-u.zIndex);i.some(h=>h.layer instanceof iS&&h.layer.getDeclutter())&&(t.declutter={});const s=t.viewState;this.children_.length=0;const a=[];let r=null;for(let h=0,u=i.length;h<u;++h){const f=i[h];t.layerIndex=h;const c=f.layer,d=c.getSourceState();if(!k_(f,s)||d!="ready"&&d!="undefined"){c.unrender();continue}const g=c.render(t,r);g&&(g!==r&&(this.children_.push(g),r=g),a.push(f))}this.declutter(t,a),U5(this.element_,this.children_);const o=this.getMap().getTargetElement();if(vs(o)){const h=o.getContext("2d");for(const u of this.children_){const f=u.firstElementChild||u,c=u.style.backgroundColor;if(c&&(!vs(f)||f.width>0)&&(h.fillStyle=c,h.fillRect(0,0,o.width,o.height)),vs(f)&&f.width>0){const d=u.style.opacity||f.style.opacity;h.globalAlpha=d===""?1:Number(d);const g=f.style.transform;if(g)h.setTransform(...F0(g));else{const y=parseFloat(f.style.width)/f.width,v=parseFloat(f.style.height)/f.height;h.setTransform(y,0,0,v,0,0)}h.drawImage(f,0,0)}}h.globalAlpha=1,h.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(Di.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,i){if(t.declutter){for(let n=i.length-1;n>=0;--n){const s=i[n],a=s.layer;a.getDeclutter()&&a.renderDeclutter(t,s)}i.forEach(n=>n.layer.renderDeferred(t))}}}function sS(e){if(e instanceof $c){e.setMapInternal(null);return}e instanceof ol&&e.getLayers().forEach(sS)}function aS(e,t){if(e instanceof $c){e.setMapInternal(t);return}if(e instanceof ol){const i=e.getLayers().getArray();for(let n=0,s=i.length;n<s;++n)aS(i[n],t)}}let OO=class extends dn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const i=LO(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:gR,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Wi(),this.pixelToCoordinateTransform_=Wi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,di||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=i.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,di||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=i.controls||(di?new Gi:Ix()),this.interactions=i.interactions||(di?new Gi:cA({onFocusOnly:!0})),this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new yR(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ne.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ne.VIEW,this.handleViewChanged_),this.addChangeListener(Ne.SIZE,this.handleSizeChanged_),this.addChangeListener(Ne.TARGET,this.handleTargetChanged_),this.setProperties(i.values);const n=this;t.view&&!(t.view instanceof en)&&t.view.then(function(s){n.setView(new en(s))}),this.controls.addEventListener(Ve.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(Ve.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(Ve.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(Ve.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(Ve.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(Ve.REMOVE,s=>{const a=s.element.getId();a!==void 0&&delete this.overlayIdIndex_[a.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){aS(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const i=t.getId();i!==void 0&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)}disposeInternal(){var t;this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),(t=this.resizeObserver_)==null||t.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,i,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const a=n.hitTolerance!==void 0?n.hitTolerance:0,r=n.layerFilter!==void 0?n.layerFilter:Lo,l=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,a,l,i,null,r,null)}getFeaturesAtPixel(t,i){const n=[];return this.forEachFeatureAtPixel(t,function(s){n.push(s)},i),n}getAllLayers(){const t=[];function i(n){n.forEach(function(s){s instanceof ol?i(s.getLayers()):t.push(s)})}return i(this.getLayers()),t}hasFeatureAtPixel(t,i){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const s=i.layerFilter!==void 0?i.layerFilter:Lo,a=i.hitTolerance!==void 0?i.hitTolerance:0,r=i.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,a,r,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),a=n.width/s[0],r=n.height/s[1],l="changedTouches"in t?t.changedTouches[0]:t;return[(l.clientX-n.left)/a,(l.clientY-n.top)/r]}getTarget(){return this.get(Ne.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return j0(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const i=this.frameState_;return i?Ee(i.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const i=this.overlayIdIndex_[t.toString()];return i!==void 0?i:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ne.LAYERGROUP)}setLayers(t){const i=this.getLayerGroup();if(t instanceof Gi){i.setLayers(t);return}const n=i.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let i=0,n=t.length;i<n;++i){const s=t[i];if(!s.visible)continue;const a=s.layer.getRenderer();if(a&&!a.ready)return!0;const r=s.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const i=bn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)}getPixelFromCoordinateInternal(t){const i=this.frameState_;return i?Ee(i.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ne.SIZE)}getView(){return this.get(Ne.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,i,n,s){return pR(this.frameState_,t,i,n,s)}handleBrowserEvent(t,i){i=i||t.type;const n=new is(i,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const i=t.originalEvent,n=i.type;if(n===O0.POINTERDOWN||n===st.WHEEL||n===st.KEYDOWN){const s=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():s,r=i.target,l=a instanceof ShadowRoot?a.host===r?a.host.ownerDocument:a:a===s?s.documentElement:a;if(this.overlayContainerStopEvent_.contains(r)||!l.contains(r))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let a=s.length-1;a>=0;a--){const r=s[a];if(r.getMap()!==this||!r.getActive()||!this.getTargetElement())continue;if(!r.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){let s=this.maxTilesLoading_,a=s;if(t){const r=t.viewHints;if(r[De.ANIMATING]||r[De.INTERACTING]){const l=Date.now()-t.time>8;s=l?0:8,a=l?0:2}}i.getTilesLoading()<s&&(i.reprioritize(),i.loadMoreTiles(s,a))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(Di.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Di.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Wa(ns.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Wa(ns.LOADSTART,this,t))));const n=this.postRenderFunctions_;if(t)for(let s=0,a=n.length;s<a;++s)n[s](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){var n,s;if(this.mapBrowserEventHandler_){for(let a=0,r=this.targetChangeHandlerKeys_.length;a<r;++a)Bt(this.targetChangeHandlerKeys_[a]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(st.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(st.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!vs(this.targetElement_)){(n=this.resizeObserver_)==null||n.unobserve(this.targetElement_);const a=this.targetElement_.getRootNode();a instanceof ShadowRoot&&this.resizeObserver_.unobserve(a.host),this.setSize(void 0)}const t=this.getTarget(),i=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=i,!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(vs(i)||i.appendChild(this.viewport_),this.renderer_||(this.renderer_=new AO(this)),!vs(i)){this.mapBrowserEventHandler_=new _R(this,this.moveTolerance_);for(const r in $t)this.mapBrowserEventHandler_.addEventListener($t[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(st.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(st.WHEEL,this.boundHandleBrowserEvent_,nx?{passive:!1}:!1);let a;if(this.keyboardEventTarget_)a=this.keyboardEventTarget_;else{const r=i.getRootNode();a=r instanceof ShadowRoot?r.host:i}if(this.targetChangeHandlerKeys_=[vt(a,st.KEYDOWN,this.handleBrowserEvent,this),vt(a,st.KEYPRESS,this.handleBrowserEvent,this)],i instanceof HTMLElement){const r=i.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),(s=this.resizeObserver_)==null||s.observe(i)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Bt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Bt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=vt(t,Xr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=vt(t,st.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Bt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new rs("addlayer",t)),this.layerGroupPropertyListenerKeys_=[vt(t,Xr.PROPERTYCHANGE,this.render,this),vt(t,st.CHANGE,this.render,this),vt(t,"addlayer",this.handleLayerAdd_,this),vt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const t=this.frameState_.layerStatesArray;for(let i=0,n=t.length;i<n;++i){const s=t[i].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){sS(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const i=this.getSize(),n=this.getView(),s=this.frameState_;let a=null;if(i!==void 0&&jy(i)&&n&&n.isDef()){const r=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=n.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:D0(l.center,l.resolution,l.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:l,viewHints:r,wantedTiles:{},mapId:xt(this),renderTargets:{}},l.nextCenter&&l.nextResolution){const o=isNaN(l.nextRotation)?l.rotation:l.nextRotation;a.nextExtent=D0(l.nextCenter,l.nextResolution,o,i)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s&&(!this.previousExtent_||!Yc(this.previousExtent_)&&!Go(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Wa(ns.MOVESTART,this,s)),this.previousExtent_=hh(this.previousExtent_)),this.previousExtent_&&!a.viewHints[De.ANIMATING]&&!a.viewHints[De.INTERACTING]&&!Go(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Wa(ns.MOVEEND,this,a)),sx(a.extent,this.previousExtent_))),this.dispatchEvent(new Wa(ns.POSTRENDER,this,a)),this.renderComplete_=(this.hasListener(ns.LOADSTART)||this.hasListener(ns.LOADEND)||this.hasListener(Di.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const i=this.getLayerGroup();i&&this.handleLayerRemove_(new rs("removelayer",i)),this.set(Ne.LAYERGROUP,t)}setSize(t){this.set(Ne.SIZE,t)}setTarget(t){this.set(Ne.TARGET,t)}setView(t){if(!t||t instanceof en){this.set(Ne.VIEW,t);return}this.set(Ne.VIEW,new en);const i=this;t.then(function(n){i.setView(new en(n))})}updateSize(){const t=this.getTargetElement();let i;if(t){let s,a;if(vs(t))s=t.width,a=t.height;else{const r=getComputedStyle(t);s=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),a=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth)}!isNaN(s)&&!isNaN(a)&&(i=[Math.max(0,s),Math.max(0,a)],!jy(i)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&gx("No map visible because the map container's width or height are 0."))}const n=this.getSize();i&&(!n||!qs(i,n))&&(this.setSize(i),this.updateViewportSize_(i))}updateViewportSize_(t){const i=this.getView();i&&i.setViewportSize(t)}};function LO(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const i={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new ol({layers:e.layers});i[Ne.LAYERGROUP]=n,i[Ne.TARGET]=e.target,i[Ne.VIEW]=e.view instanceof en?e.view:new en;let s;e.controls!==void 0&&(Array.isArray(e.controls)?s=new Gi(e.controls.slice()):(Rt(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=e.controls));let a;e.interactions!==void 0&&(Array.isArray(e.interactions)?a=new Gi(e.interactions.slice()):(Rt(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),a=e.interactions));let r;return e.overlays!==void 0?Array.isArray(e.overlays)?r=new Gi(e.overlays.slice()):(Rt(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),r=e.overlays):r=new Gi,{controls:s,interactions:a,keyboardEventTarget:t,overlays:r,values:i}}class Z_ extends Fc{constructor(t,i,n){super(),n=n||{},this.tileCoord=t,this.state=i,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(st.CHANGE)}release(){this.setState(V.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==V.EMPTY){if(this.state!==V.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){$()}getAlpha(t,i){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=i,this.transitionStarts_[t]=n;else if(n===-1)return 1;const s=i-n+1e3/60;return s>=this.transition_?1:dx(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function V0(e){return e instanceof Image||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageBitmap?e:null}const NO=new Error("disposed"),GO=[256,256];class Qy extends Z_{constructor(t){const i=V.IDLE;super(t.tileCoord,i,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=V0(this.data_);return t?[t.width,t.height]:GO}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==V.IDLE&&this.state!==V.ERROR)return;this.state=V.LOADING,this.changed();const t=this;this.loader_().then(function(i){t.data_=i,t.state=V.LOADED,t.changed()}).catch(function(i){t.error_=i,t.state=V.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(NO),this.controller_=null),super.disposeInternal()}}class rS extends Z_{constructor(t,i,n,s,a,r){super(t,i,r),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_,di?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,s!==null&&(this.image_.crossOrigin=s)),this.unlisten_=null,this.tileLoadFunction_=a}getImage(){return this.image_}setImage(t){this.image_=t,this.state=V.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=V.ERROR,this.unlistenImage_(),this.image_=DO(),this.changed()}handleImageLoad_(){if(di)this.state=V.LOADED;else{const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=V.LOADED:this.state=V.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==V.ERROR&&(this.state=V.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==V.IDLE&&(this.state=V.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=JA(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function DO(){const e=me(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}class V_{constructor(t,i,n,s){this.minX=t,this.maxX=i,this.minY=n,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Xa(e,t,i,n,s){return s!==void 0?(s.minX=e,s.maxX=t,s.minY=i,s.maxY=n,s):new V_(e,t,i,n)}let pd;const Ar=[];function Jy(e,t,i,n,s){e.beginPath(),e.moveTo(0,0),e.lineTo(t,i),e.lineTo(n,s),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(i,s)),e.restore()}function vd(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function IO(){if(pd===void 0){const e=me(6,6,Ar);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Jy(e,4,5,4,0),Jy(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;pd=vd(t,0)||vd(t,4)||vd(t,8),Jc(e),Ar.push(e.canvas)}return pd}function $y(e,t,i,n){const s=Zc(i,t,e);let a=by(t,n,i);const r=t.getMetersPerUnit();r!==void 0&&(a*=r);const l=e.getMetersPerUnit();l!==void 0&&(a/=l);const o=e.getExtent();if(!o||Yr(o,s)){const h=by(e,a,s)/a;isFinite(h)&&h>0&&(a/=h)}return a}function PO(e,t,i,n){const s=Us(i);let a=$y(e,t,s,n);return(!isFinite(a)||a<=0)&&ox(i,function(r){return a=$y(e,t,r,n),isFinite(a)&&a>0}),a}function zO(e,t,i,n,s,a,r,l,o,h,u,f,c,d){const g=me(Math.round(i*e),Math.round(i*t),Ar);if(f||(g.imageSmoothingEnabled=!1),o.length===0)return g.canvas;g.scale(i,i);function y(M){return Math.round(M*i)/i}g.globalCompositeOperation="lighter";const v=ki();o.forEach(function(M,T,b){rx(v,M.extent)});let _;const m=i/n,p=(f?1:1+Math.pow(2,-24))/m;_=me(Math.round(Nt(v)*m),Math.round(Ue(v)*m),Ar),f||(_.imageSmoothingEnabled=!1),o.forEach(function(M,T,b){if(M.image.width>0&&M.image.height>0){if(M.clipExtent){_.save();const O=(M.clipExtent[0]-v[0])*m,P=-(M.clipExtent[3]-v[3])*m,U=Nt(M.clipExtent)*m,Z=Ue(M.clipExtent)*m;_.rect(f?O:Math.round(O),f?P:Math.round(P),f?U:Math.round(O+U)-Math.round(O),f?Z:Math.round(P+Z)-Math.round(P)),_.clip()}const x=(M.extent[0]-v[0])*m,S=-(M.extent[3]-v[3])*m,w=Nt(M.extent)*m,A=Ue(M.extent)*m;_.drawImage(M.image,h,h,M.image.width-2*h,M.image.height-2*h,f?x:Math.round(x),f?S:Math.round(S),f?w:Math.round(x+w)-Math.round(x),f?A:Math.round(S+A)-Math.round(S)),M.clipExtent&&_.restore()}});const E=Na(r);return l.getTriangles().forEach(function(M,T,b){const x=M.source,S=M.target;let w=x[0][0],A=x[0][1],O=x[1][0],P=x[1][1],U=x[2][0],Z=x[2][1];const L=y((S[0][0]-E[0])/a),G=y(-(S[0][1]-E[1])/a),D=y((S[1][0]-E[0])/a),z=y(-(S[1][1]-E[1])/a),Y=y((S[2][0]-E[0])/a),B=y(-(S[2][1]-E[1])/a),R=w,F=A;w=0,A=0,O-=R,P-=F,U-=R,Z-=F;const q=[[O,P,0,0,D-L],[U,Z,0,0,Y-L],[0,0,O,P,z-G],[0,0,U,Z,B-G]],H=ER(q);if(!H)return;if(g.save(),g.beginPath(),IO()||!f){g.moveTo(D,z);const pt=4,tt=L-D,et=G-z;for(let ft=0;ft<pt;ft++)g.lineTo(D+y((ft+1)*tt/pt),z+y(ft*et/(pt-1))),ft!=pt-1&&g.lineTo(D+y((ft+1)*tt/pt),z+y((ft+1)*et/(pt-1)));g.lineTo(Y,B)}else g.moveTo(D,z),g.lineTo(L,G),g.lineTo(Y,B);g.clip(),g.transform(H[0],H[2],H[1],H[3],L,G),g.translate(v[0]-R,v[3]-F);let _t;if(_)_t=_.canvas,g.scale(p,-p);else{const pt=o[0],tt=pt.extent;_t=pt.image,g.scale(Nt(tt)/_t.width,-Ue(tt)/_t.height)}g.drawImage(_t,0,0),g.restore()}),_&&(Jc(_),Ar.push(_.canvas)),u&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,l.getTriangles().forEach(function(M,T,b){const x=M.target,S=(x[0][0]-E[0])/a,w=-(x[0][1]-E[1])/a,A=(x[1][0]-E[0])/a,O=-(x[1][1]-E[1])/a,P=(x[2][0]-E[0])/a,U=-(x[2][1]-E[1])/a;g.beginPath(),g.moveTo(A,O),g.lineTo(S,w),g.lineTo(P,U),g.closePath(),g.stroke()}),g.restore()),g.canvas}const jO=10,tp=.25;class FO{constructor(t,i,n,s,a,r,l){this.sourceProj_=t,this.targetProj_=i;let o={};const h=l?s5(p=>Ee(l,Zc(p,this.targetProj_,this.sourceProj_))):Io(this.targetProj_,this.sourceProj_);this.transformInv_=function(p){const E=p[0]+"/"+p[1];return o[E]||(o[E]=h(p)),o[E]},this.maxSourceExtent_=s,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Nt(s)>=Nt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Nt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Nt(this.targetProj_.getExtent()):null;const u=Na(n),f=Xc(n),c=Bc(n),d=kc(n),g=this.transformInv_(u),y=this.transformInv_(f),v=this.transformInv_(c),_=this.transformInv_(d),m=jO+(r?Math.max(0,Math.ceil(Math.log2(G0(n)/(r*r*256*256)))):0);if(this.addQuad_(u,f,c,d,g,y,v,_,m),this.wrapsXInSource_){let p=1/0;this.triangles_.forEach(function(E,M,T){p=Math.min(p,E.source[0][0],E.source[1][0],E.source[2][0])}),this.triangles_.forEach(E=>{if(Math.max(E.source[0][0],E.source[1][0],E.source[2][0])-p>this.sourceWorldWidth_/2){const M=[[E.source[0][0],E.source[0][1]],[E.source[1][0],E.source[1][1]],[E.source[2][0],E.source[2][1]]];M[0][0]-p>this.sourceWorldWidth_/2&&(M[0][0]-=this.sourceWorldWidth_),M[1][0]-p>this.sourceWorldWidth_/2&&(M[1][0]-=this.sourceWorldWidth_),M[2][0]-p>this.sourceWorldWidth_/2&&(M[2][0]-=this.sourceWorldWidth_);const T=Math.min(M[0][0],M[1][0],M[2][0]);Math.max(M[0][0],M[1][0],M[2][0])-T<this.sourceWorldWidth_/2&&(E.source=M)}})}o={}}addTriangle_(t,i,n,s,a,r){this.triangles_.push({source:[s,a,r],target:[t,i,n]})}addQuad_(t,i,n,s,a,r,l,o,h){const u=_y([a,r,l,o]),f=this.sourceWorldWidth_?Nt(u)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&f>.5&&f<1;let g=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const v=_y([t,i,n,s]);g=Nt(v)/this.targetWorldWidth_>tp||g}!d&&this.sourceProj_.isGlobal()&&f&&(g=f>tp||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!Je(u,this.maxSourceExtent_))return;let y=0;if(!g&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(r[0])||!isFinite(r[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(o[0])||!isFinite(o[1]))){if(h>0)g=!0;else if(y=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(r[0])||!isFinite(r[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(o[0])||!isFinite(o[1])?1:0),y!=1&&y!=2&&y!=4&&y!=8)return}if(h>0){if(!g){const v=[(t[0]+n[0])/2,(t[1]+n[1])/2],_=this.transformInv_(v);let m;d?m=(ga(a[0],c)+ga(l[0],c))/2-ga(_[0],c):m=(a[0]+l[0])/2-_[0];const p=(a[1]+l[1])/2-_[1];g=m*m+p*p>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const v=[(i[0]+n[0])/2,(i[1]+n[1])/2],_=this.transformInv_(v),m=[(s[0]+t[0])/2,(s[1]+t[1])/2],p=this.transformInv_(m);this.addQuad_(t,i,v,m,a,r,_,p,h-1),this.addQuad_(m,v,n,s,p,_,l,o,h-1)}else{const v=[(t[0]+i[0])/2,(t[1]+i[1])/2],_=this.transformInv_(v),m=[(n[0]+s[0])/2,(n[1]+s[1])/2],p=this.transformInv_(m);this.addQuad_(t,v,m,s,a,_,p,o,h-1),this.addQuad_(v,i,n,m,_,r,l,p,h-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}y&11||this.addTriangle_(t,n,s,a,l,o),y&14||this.addTriangle_(t,n,i,a,l,r),y&&(y&13||this.addTriangle_(i,s,t,r,o,a),y&7||this.addTriangle_(i,s,n,r,o,l))}calculateSourceExtent(){const t=ki();return this.triangles_.forEach(function(i,n,s){const a=i.source;oo(t,a[0]),oo(t,a[1]),oo(t,a[2])}),t}getTriangles(){return this.triangles_}}const UO=.5;class lS extends Z_{constructor(t,i,n,s,a,r,l,o,h,u,f,c){super(a,V.IDLE,c),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=l,this.gutter_=o,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=s,this.wrappedTileCoord_=r||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const d=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let y=this.sourceTileGrid_.getExtent();const v=g?_a(d,g):d;if(G0(v)===0){this.state=V.EMPTY;return}const _=t.getExtent();_&&(y?y=_a(y,_):y=_);const m=s.getResolution(this.wrappedTileCoord_[0]),p=PO(t,n,v,m);if(!isFinite(p)||p<=0){this.state=V.EMPTY;return}const E=u!==void 0?u:UO;if(this.triangulation_=new FO(t,n,v,y,p*E,m),this.triangulation_.getTriangles().length===0){this.state=V.EMPTY;return}this.sourceZ_=i.getZForResolution(p);let M=this.triangulation_.calculateSourceExtent();if(y&&(t.canWrapX()?(M[1]=Wt(M[1],y[1],y[3]),M[3]=Wt(M[3],y[1],y[3])):M=_a(M,y)),!G0(M))this.state=V.EMPTY;else{let T=0,b=0;t.canWrapX()&&(T=Nt(_),b=Math.floor((M[0]-_[0])/T)),cx(M.slice(),t,!0).forEach(S=>{const w=i.getTileRangeForExtentAndZ(S,this.sourceZ_);for(let A=w.minX;A<=w.maxX;A++)for(let O=w.minY;O<=w.maxY;O++){const P=h(this.sourceZ_,A,O,l);if(P){const U=b*T;this.sourceTiles_.push({tile:P,offset:U})}}++b}),this.sourceTiles_.length===0&&(this.state=V.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(i=>{var s;const n=i.tile;if(n&&n.getState()==V.LOADED){const a=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);a[0]+=i.offset,a[2]+=i.offset;const r=(s=this.clipExtent_)==null?void 0:s.slice();r&&(r[0]+=i.offset,r[2]+=i.offset),t.push({extent:a,clipExtent:r,image:n.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=V.ERROR;else{const i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),s=typeof n=="number"?n:n[0],a=typeof n=="number"?n:n[1],r=this.targetTileGrid_.getResolution(i),l=this.sourceTileGrid_.getResolution(this.sourceZ_),o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=zO(s,a,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),r,o,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=V.LOADED}this.changed()}load(){if(this.state==V.IDLE){this.state=V.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{const n=i.getState();if(n==V.IDLE||n==V.LOADING){t++;const s=vt(i,st.CHANGE,a=>{const r=i.getState();(r==V.LOADED||r==V.ERROR||r==V.EMPTY)&&(Bt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:i},n,s){i.getState()==V.IDLE&&i.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Bt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Jc(this.canvas_.getContext("2d")),Ar.push(this.canvas_),this.canvas_=null),super.release()}}class ep{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof zc&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let i=this.oldest_;for(;i;)t(i.value_,i.key_,this),i=i.newer}get(t,i){const n=this.entries_[t];return Rt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const i=this.entries_[t];return Rt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_?(this.newest_=i.older,this.newest_&&(this.newest_.newer=null)):i===this.oldest_?(this.oldest_=i.newer,this.oldest_&&(this.oldest_.older=null)):(i.newer.older=i.older,i.older.newer=i.newer),delete this.entries_[t],--this.count_,i.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let i=0,n;for(n=this.newest_;n;n=n.older)t[i++]=n.key_;return t}getValues(){const t=new Array(this.count_);let i=0,n;for(n=this.newest_;n;n=n.older)t[i++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){var i;return(i=this.entries_[t])==null?void 0:i.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,i){this.get(t),this.entries_[t].value_=i}set(t,i){Rt(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:i};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}function uc(e,t,i,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=i,n):[e,t,i]}function kO(e,t,i){return e+"/"+t+"/"+i}function gu(e,t,i,n,s){return`${xt(e)},${t},${kO(i,n,s)}`}function BO(e){return XO(e[0],e[1],e[2])}function XO(e,t,i){return(t<<e)+i}function YO(e,t){const i=e[0],n=e[1],s=e[2];if(t.getMinZoom()>i||i>t.getMaxZoom())return!1;const a=t.getFullTileRange(i);return a?a.containsXY(n,s):!0}class oS{constructor(){uf(this,"pushMethodArgs_",(...t)=>(this.push_(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(ac(),{get:(t,i)=>{if(typeof ac()[i]=="function")return this.push_(i),this.pushMethodArgs_},set:(t,i,n)=>(this.push_(i,n),!0)})}push_(...t){const i=this.instructions_,n=this.zIndex+this.offset_;i[n]||(i[n]=[]),i[n].push(...t)}pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(i=>{for(let n=0,s=i.length;n<s;++n){const a=i[n];if(typeof a=="function"){a(t);continue}const r=i[++n];if(typeof t[a]=="function")t[a](...r);else{if(typeof r=="function"){t[a]=r(t);continue}t[a]=r}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const qO=5;class HO extends oh{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=qO}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return $()}getData(t){return null}prepareFrame(t){return $()}renderFrame(t,i){return $()}forEachFeatureAtCoordinate(t,i,n,s,a){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const i=t.target;(i.getState()===ot.LOADED||i.getState()===ot.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let i=t.getState();return i!=ot.LOADED&&i!=ot.ERROR&&t.addEventListener(st.CHANGE,this.boundHandleImageChange_),i==ot.IDLE&&(t.load(),i=t.getState()),i==ot.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const ip=[];let $a=null;function ZO(){$a=me(1,1,void 0,{willReadFrequently:!0})}class hS extends HO{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Wi(),this.pixelTransform=Wi(),this.inversePixelTransform=Wi(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,i,n){$a||ZO(),$a.clearRect(0,0,1,1);let s;try{$a.drawImage(t,i,n,1,1,0,0,1,1),s=$a.getImageData(0,0,1,1).data}catch{return $a=null,null}return s}getBackground(t){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,i,n){const s=this.getLayer().getClassName();let a,r;if(t&&t.className===s&&(!n||t&&t.style.backgroundColor&&qs(Zr(t.style.backgroundColor),Zr(n)))){const l=t.firstElementChild;vs(l)&&(r=l.getContext("2d"))}if(r&&f5(r.canvas.style.transform,i)?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){a=di?Dx():document.createElement("div"),a.className=s;let l=a.style;l.position="absolute",l.width="100%",l.height="100%",r=me();const o=r.canvas;a.appendChild(o),l=o.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=a,this.context=r}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,i,n){const s=Na(n),a=Xc(n),r=Bc(n),l=kc(n);Ee(i.coordinateToPixelTransform,s),Ee(i.coordinateToPixelTransform,a),Ee(i.coordinateToPixelTransform,r),Ee(i.coordinateToPixelTransform,l);const o=this.inversePixelTransform;Ee(o,s),Ee(o,a),Ee(o,r),Ee(o,l),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()}prepareContainer(t,i){const n=t.extent,s=t.viewState.resolution,a=t.viewState.rotation,r=t.pixelRatio,l=Math.round(Nt(n)/s*r),o=Math.round(Ue(n)/s*r);Yn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/r,1/r,a,-l/2,-o/2),Sx(this.inversePixelTransform,this.pixelTransform);const h=c5(this.pixelTransform);if(this.useContainer(i,h,this.getBackground(t)),!this.containerReused){const u=this.context.canvas;u.width!=l||u.height!=o?(u.width=l,u.height=o):this.context.clearRect(0,0,l,o),h!==u.style.transform&&(u.style.transform=h)}}dispatchRenderEvent_(t,i,n){const s=this.getLayer();if(s.hasListener(t)){const a=new nS(t,this.inversePixelTransform,n,i);s.dispatchEvent(a)}}preRender(t,i){this.frameState=i,!i.declutter&&this.dispatchRenderEvent_(Di.PRERENDER,t,i)}postRender(t,i){i.declutter||this.dispatchRenderEvent_(Di.POSTRENDER,t,i)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new oS),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(Di.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Di.POSTRENDER,this.context,t))}getRenderTransform(t,i,n,s,a,r,l){const o=a/2,h=r/2,u=s/i,f=-u,c=-t[0]+l,d=-t[1];return Yn(this.tempTransform,o,h,u,f,-n,c,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function Ed(e,t,i){if(!(i in e))return e[i]=new Set([t]),!0;const n=e[i],s=n.has(t);return s||n.add(t),!s}function VO(e,t,i){const n=e[i];return n?n.delete(t):!1}function np(e,t){const i=e.layerStatesArray[e.layerIndex];i.extent&&(t=_a(t,ys(i.extent,e.viewState.projection)));const n=i.layer.getRenderSource();if(!n.getWrapX()){const s=n.getTileGridForProjection(e.viewState.projection).getExtent();s&&(t=_a(t,s))}return t}class KO extends hS{constructor(t,i){super(t),i=i||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=ki(),this.tempTileRange_=new V_(0,0,0,0),this.tempTileCoord_=uc(0,0,0);const n=i.cacheSize!==void 0?i.cacheSize:512;this.tileCache_=new ep(n),this.sourceTileCache_=null,this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new ep(512)),this.sourceTileCache_}getOrCreateTile(t,i,n,s){const a=this.tileCache_,l=this.getLayer().getSource(),o=gu(l,l.getKey(),t,i,n);let h;if(a.containsKey(o))h=a.get(o);else{const u=s.viewState.projection,f=l.getProjection();if(h=l.getTile(t,i,n,s.pixelRatio,u,!f||ho(f,u)?void 0:this.getSourceTileCache()),!h)return null;a.set(o,h)}return h}getTile(t,i,n,s){const a=this.getOrCreateTile(t,i,n,s);return a||null}getData(t){const i=this.frameState;if(!i)return null;const n=this.getLayer(),s=Ee(i.pixelToCoordinateTransform,t.slice()),a=n.getExtent();if(a&&!Yr(a,s))return null;const r=i.viewState,l=n.getRenderSource(),o=l.getTileGridForProjection(r.projection),h=l.getTilePixelRatio(i.pixelRatio);for(let u=o.getZForResolution(r.resolution);u>=o.getMinZoom();--u){const f=o.getTileCoordForCoordAndZ(s,u),c=this.getTile(u,f[1],f[2],i);if(!c||c.getState()!==V.LOADED)continue;const d=o.getOrigin(u),g=ei(o.getTileSize(u)),y=o.getResolution(u);let v;if(c instanceof rS||c instanceof lS)v=c.getImage();else if(c instanceof Qy){if(v=V0(c.getData()),!v)continue}else continue;const _=Math.floor(h*((s[0]-d[0])/y-f[1]*g[0])),m=Math.floor(h*((d[1]-s[1])/y-f[2]*g[1])),p=Math.round(h*l.getGutterForProjection(r.projection));return this.getImageData(v,_+p,m+p)}return null}prepareFrame(t){var s;this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const i=this.getLayer().getSource();if(!i)return!1;const n=i.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==n&&(this.renderedSourceRevision_=n,this.renderedSourceKey_===i.getKey()&&(this.tileCache_.clear(),(s=this.sourceTileCache_)==null||s.clear())):this.renderedSourceRevision_=n,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(t,i,n,s,a){const r=t.viewState,l=this.getLayer(),o=l.getRenderSource(),h=o.getTileGridForProjection(r.projection),u=xt(o);u in t.wantedTiles||(t.wantedTiles[u]={});const f=t.wantedTiles[u],c=l.getMapInternal(),d=Math.max(n-a,h.getMinZoom(),h.getZForResolution(Math.min(l.getMaxResolution(),c?c.getView().getResolutionForZoom(Math.max(l.getMinZoom(),0)):h.getResolution(0)),o.zDirection)),g=r.rotation,y=g?hx(r.center,r.resolution,g,t.size):void 0;for(let v=n;v>=d;--v){const _=h.getTileRangeForExtentAndZ(i,v,this.tempTileRange_),m=h.getResolution(v);for(let p=_.minX;p<=_.maxX;++p)for(let E=_.minY;E<=_.maxY;++E){if(g&&!h.tileCoordIntersectsViewport([v,p,E],y))continue;const M=this.getTile(v,p,E,t);if(!M||!Ed(s,M,v))continue;const b=M.getKey();if(f[b]=!0,M.getState()===V.IDLE&&!t.tileQueue.isKeyQueued(b)){const x=uc(v,p,E,this.tempTileCoord_);t.tileQueue.enqueue([M,u,h.getTileCoordCenter(x),m])}}}}findStaleTile_(t,i){const n=this.tileCache_,s=t[0],a=t[1],r=t[2],l=this.getStaleKeys();for(let o=0;o<l.length;++o){const h=gu(this.getLayer().getSource(),l[o],s,a,r);if(n.containsKey(h)){const u=n.peek(h);if(u.getState()===V.LOADED)return u.endTransition(xt(this)),Ed(i,u,s),!0}}return!1}findAltTiles_(t,i,n,s){const a=t.getTileRangeForTileCoordAndZ(i,n,this.tempTileRange_);if(!a)return!1;let r=!0;const l=this.tileCache_,o=this.getLayer().getRenderSource(),h=o.getKey();for(let u=a.minX;u<=a.maxX;++u)for(let f=a.minY;f<=a.maxY;++f){const c=gu(o,h,n,u,f);let d=!1;if(l.containsKey(c)){const g=l.peek(c);g.getState()===V.LOADED&&(Ed(s,g,n),d=!0)}d||(r=!1)}return r}renderFrame(t,i){this.renderComplete=!0;const n=t.layerStatesArray[t.layerIndex],s=t.viewState,a=s.projection,r=s.resolution,l=s.center,o=t.pixelRatio,h=this.getLayer(),u=h.getSource(),f=u.getTileGridForProjection(a),c=f.getZForResolution(r,u.zDirection),d=f.getResolution(c),g=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==g&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=g):this.renderedSourceKey_=g;let y=t.extent;const v=u.getTilePixelRatio(o);this.prepareContainer(t,i);const _=this.context.canvas.width,m=this.context.canvas.height,p=n.extent&&ys(n.extent);p&&(y=_a(y,ys(n.extent)));const E=d*_/2/v,M=d*m/2/v,T=[l[0]-E,l[1]-M,l[0]+E,l[1]+M],b={};this.renderedTiles.length=0;const x=h.getPreload();if(t.nextExtent&&this.enqueueTilesForNextExtent()){const D=f.getZForResolution(s.nextResolution,u.zDirection),z=np(t,t.nextExtent);this.enqueueTiles(t,z,D,b,x)}const S=np(t,y);if(this.enqueueTiles(t,S,c,b,0),x>0&&setTimeout(()=>{this.enqueueTiles(t,S,c-1,b,x-1)},0),!(c in b))return this.container;const w=xt(this),A=t.time;for(const D of b[c]){const z=D.getState();if(z===V.EMPTY)continue;const Y=D.tileCoord;if(z===V.LOADED&&D.getAlpha(w,A)===1){D.endTransition(w);continue}if(z!==V.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Y,b)){VO(b,D,c),t.animate=!0;continue}if(this.findAltTiles_(f,Y,c+1,b))continue;const F=f.getMinZoom();for(let q=c-1;q>=F&&!this.findAltTiles_(f,Y,q,b);--q);}const O=d/r*o/v,P=this.getRenderContext(t);Yn(this.tempTransform,_/2,m/2,O,O,0,-_/2,-m/2),n.extent&&this.clipUnrotated(P,t,p),u.getInterpolate()||(P.imageSmoothingEnabled=!1),this.preRender(P,t);const U=Object.keys(b).map(Number);U.sort(In);let Z;const L=[],G=[];for(let D=U.length-1;D>=0;--D){const z=U[D],Y=u.getTilePixelSize(z,o,a),R=f.getResolution(z)/d,F=Y[0]*R*O,q=Y[1]*R*O,H=f.getTileCoordForCoordAndZ(Na(T),z),_t=f.getTileCoordExtent(H),pt=Ee(this.tempTransform,[v*(_t[0]-T[0])/d,v*(T[3]-_t[3])/d]),tt=v*u.getGutterForProjection(a);for(const et of b[z]){if(et.getState()!==V.LOADED)continue;const ft=et.tileCoord,nt=H[1]-ft[1],Gt=Math.round(pt[0]-(nt-1)*F),Yt=H[2]-ft[2],Et=Math.round(pt[1]-(Yt-1)*q),rt=Math.round(pt[0]-nt*F),W=Math.round(pt[1]-Yt*q),Zt=Gt-rt,ht=Et-W,wt=U.length===1;let Pt=!1;Z=[rt,W,rt+Zt,W,rt+Zt,W+ht,rt,W+ht];for(let ri=0,Me=L.length;ri<Me;++ri)if(!wt&&z<G[ri]){const qt=L[ri];Je([rt,W,rt+Zt,W+ht],[qt[0],qt[3],qt[4],qt[7]])&&(Pt||(P.save(),Pt=!0),P.beginPath(),P.moveTo(Z[0],Z[1]),P.lineTo(Z[2],Z[3]),P.lineTo(Z[4],Z[5]),P.lineTo(Z[6],Z[7]),P.moveTo(qt[6],qt[7]),P.lineTo(qt[4],qt[5]),P.lineTo(qt[2],qt[3]),P.lineTo(qt[0],qt[1]),P.clip())}L.push(Z),G.push(z),this.drawTile(et,t,rt,W,Zt,ht,tt,wt),Pt&&P.restore(),this.renderedTiles.unshift(et),this.updateUsedTiles(t.usedTiles,u,et)}}if(this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!Go(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=o,this.postRender(this.context,t),n.extent&&P.restore(),P.imageSmoothingEnabled=!0,this.renderComplete){const D=(z,Y)=>{var q;const B=xt(u),R=Y.wantedTiles[B],F=R?Object.keys(R).length:0;this.updateCacheSize(F),this.tileCache_.expireCache(),(q=this.sourceTileCache_)==null||q.expireCache()};t.postRenderFunctions.push(D)}return this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,i,n,s,a,r,l,o){let h;if(t instanceof Qy){if(h=V0(t.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(t);if(!h)return;const u=this.getRenderContext(i),f=xt(this),c=i.layerStatesArray[i.layerIndex],d=c.opacity*(o?t.getAlpha(f,i.time):1),g=d!==u.globalAlpha;g&&(u.save(),u.globalAlpha=d),u.drawImage(h,l,l,h.width-2*l,h.height-2*l,n,s,a,r),g&&u.restore(),d!==c.opacity?i.animate=!0:o&&t.endTransition(f)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,i,n){const s=xt(i);s in t||(t[s]={}),t[s][n.getKey()]=!0}}const Hh={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class WO extends $c{constructor(t){t=t||{};const i=Object.assign({},t),n=t.cacheSize;delete t.cacheSize,delete i.preload,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Hh.PRELOAD)}setPreload(t){this.set(Hh.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Hh.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Hh.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}class QO extends WO{constructor(t){super(t)}createRenderer(){return new KO(this,{cacheSize:this.getCacheSize()})}}class uS{drawCustom(t,i,n,s,a){}drawGeometry(t){}setStyle(t){}drawCircle(t,i,n){}drawFeature(t,i,n){}drawGeometryCollection(t,i,n){}drawLineString(t,i,n){}drawMultiLineString(t,i,n){}drawMultiPoint(t,i,n){}drawMultiPolygon(t,i,n){}drawPoint(t,i,n){}drawPolygon(t,i,n){}drawText(t,i,n){}setFillStrokeStyle(t,i){}setImageStyle(t,i){}setTextStyle(t,i){}}const K={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Zh=[K.FILL],Es=[K.STROKE],la=[K.BEGIN_PATH],sp=[K.CLOSE_PATH];class mh extends uS{constructor(t,i,n,s){super(),this.tolerance=t,this.maxExtent=i,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const i=this.pixelRatio;return i==1?t:t.map(function(n){return n*i})}appendFlatPointCoordinates(t,i){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,a=this.coordinates;let r=a.length;for(let l=0,o=t.length;l<o;l+=i)s[0]=t[l],s[1]=t[l+1],Yr(n,s)&&(a[r++]=s[0],a[r++]=s[1]);return r}appendFlatLineCoordinates(t,i,n,s,a,r){const l=this.coordinates;let o=l.length;const h=this.getBufferedMaxExtent();r&&(i+=s);let u=t[i],f=t[i+1];const c=this.tmpCoordinate_;let d=!0,g,y,v;for(g=i+s;g<n;g+=s)c[0]=t[g],c[1]=t[g+1],v=N0(h,c),v!==y?(d&&(l[o++]=u,l[o++]=f,d=!1),l[o++]=c[0],l[o++]=c[1]):v===pe.INTERSECTING?(l[o++]=c[0],l[o++]=c[1],d=!1):d=!0,u=c[0],f=c[1],y=v;return(a&&d||g===i+s)&&(l[o++]=u,l[o++]=f),o}drawCustomCoordinates_(t,i,n,s,a){for(let r=0,l=n.length;r<l;++r){const o=n[r],h=this.appendFlatLineCoordinates(t,i,o,s,!1,!1);a.push(h),i=o}return i}drawCustom(t,i,n,s,a){this.beginGeometry(t,i,a);const r=t.getType(),l=t.getStride(),o=this.coordinates.length;let h,u,f,c,d;switch(r){case"MultiPolygon":h=t.getOrientedFlatCoordinates(),c=[];const g=t.getEndss();d=0;for(let y=0,v=g.length;y<v;++y){const _=[];d=this.drawCustomCoordinates_(h,d,g[y],l,_),c.push(_)}this.instructions.push([K.CUSTOM,o,c,t,n,U0,a]),this.hitDetectionInstructions.push([K.CUSTOM,o,c,t,s||n,U0,a]);break;case"Polygon":case"MultiLineString":f=[],h=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(h,0,t.getEnds(),l,f),this.instructions.push([K.CUSTOM,o,f,t,n,Po,a]),this.hitDetectionInstructions.push([K.CUSTOM,o,f,t,s||n,Po,a]);break;case"LineString":case"Circle":h=t.getFlatCoordinates(),u=this.appendFlatLineCoordinates(h,0,h.length,l,!1,!1),this.instructions.push([K.CUSTOM,o,u,t,n,ps,a]),this.hitDetectionInstructions.push([K.CUSTOM,o,u,t,s||n,ps,a]);break;case"MultiPoint":h=t.getFlatCoordinates(),u=this.appendFlatPointCoordinates(h,l),u>o&&(this.instructions.push([K.CUSTOM,o,u,t,n,ps,a]),this.hitDetectionInstructions.push([K.CUSTOM,o,u,t,s||n,ps,a]));break;case"Point":h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),u=this.coordinates.length,this.instructions.push([K.CUSTOM,o,u,t,n,void 0,a]),this.hitDetectionInstructions.push([K.CUSTOM,o,u,t,s||n,void 0,a]);break}this.endGeometry(i)}beginGeometry(t,i,n){this.beginGeometryInstruction1_=[K.BEGIN_GEOMETRY,i,0,t,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[K.BEGIN_GEOMETRY,i,0,t,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let i;const n=t.length;let s,a,r=-1;for(i=0;i<n;++i)s=t[i],a=s[0],a==K.END_GEOMETRY?r=i:a==K.BEGIN_GEOMETRY&&(s[2]=i,lR(this.hitDetectionInstructions,r,i),r=-1)}fillStyleToState(t,i={}){if(t){const n=t.getColor();i.fillPatternScale=n&&typeof n=="object"&&"src"in n?this.pixelRatio:1,i.fillStyle=ln(n||We)}else i.fillStyle=void 0;return i}strokeStyleToState(t,i={}){if(t){const n=t.getColor();i.strokeStyle=ln(n||Fo);const s=t.getLineCap();i.lineCap=s!==void 0?s:Vr;const a=t.getLineDash();i.lineDash=a?a.slice():Pn;const r=t.getLineDashOffset();i.lineDashOffset=r||zn;const l=t.getLineJoin();i.lineJoin=l!==void 0?l:Kr;const o=t.getWidth();i.lineWidth=o!==void 0?o:ko;const h=t.getMiterLimit();i.miterLimit=h!==void 0?h:jo,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0;return i}setFillStrokeStyle(t,i){const n=this.state;this.fillStyleToState(t,n),this.strokeStyleToState(i,n)}createFill(t){const i=t.fillStyle,n=[K.SET_FILL_STYLE,i];return typeof i!="string"&&n.push(t.fillPatternScale),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[K.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,i){const n=t.fillStyle;(typeof n!="string"||t.currentFillStyle!=n)&&(this.instructions.push(i.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,i){const n=t.strokeStyle,s=t.lineCap,a=t.lineDash,r=t.lineDashOffset,l=t.lineJoin,o=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=s||a!=t.currentLineDash&&!qs(t.currentLineDash,a)||t.currentLineDashOffset!=r||t.currentLineJoin!=l||t.currentLineWidth!=o||t.currentMiterLimit!=h)&&(i.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=s,t.currentLineDash=a,t.currentLineDashOffset=r,t.currentLineJoin=l,t.currentLineWidth=o,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const i=[K.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=sx(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;d_(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class JO extends mh{constructor(t,i,n,s){super(t,i,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,i,n){if(!this.image_||this.maxExtent&&!Yr(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,i,n);const s=t.getFlatCoordinates(),a=t.getStride(),r=this.coordinates.length,l=this.appendFlatPointCoordinates(s,a);this.instructions.push([K.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([K.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}drawMultiPoint(t,i,n){if(!this.image_)return;this.beginGeometry(t,i,n);const s=t.getFlatCoordinates(),a=[];for(let o=0,h=s.length;o<h;o+=t.getStride())(!this.maxExtent||Yr(this.maxExtent,s.slice(o,o+2)))&&a.push(s[o],s[o+1]);const r=this.coordinates.length,l=this.appendFlatPointCoordinates(a,2);this.instructions.push([K.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([K.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,i){const n=t.getAnchor(),s=t.getSize(),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}}class $O extends mh{constructor(t,i,n,s){super(t,i,n,s)}drawFlatCoordinates_(t,i,n,s){const a=this.coordinates.length,r=this.appendFlatLineCoordinates(t,i,n,s,!1,!1),l=[K.MOVE_TO_LINE_TO,a,r];return this.instructions.push(l),this.hitDetectionInstructions.push(l),n}drawLineString(t,i,n){const s=this.state,a=s.strokeStyle,r=s.lineWidth;if(a===void 0||r===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,i,n),this.hitDetectionInstructions.push([K.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Pn,zn],la);const l=t.getFlatCoordinates(),o=t.getStride();this.drawFlatCoordinates_(l,0,l.length,o),this.hitDetectionInstructions.push(Es),this.endGeometry(i)}drawMultiLineString(t,i,n){const s=this.state,a=s.strokeStyle,r=s.lineWidth;if(a===void 0||r===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,i,n),this.hitDetectionInstructions.push([K.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Pn,zn],la);const l=t.getEnds(),o=t.getFlatCoordinates(),h=t.getStride();let u=0;for(let f=0,c=l.length;f<c;++f)u=this.drawFlatCoordinates_(o,u,l[f],h);this.hitDetectionInstructions.push(Es),this.endGeometry(i)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Es),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Es),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(la)}}class ap extends mh{constructor(t,i,n,s){super(t,i,n,s)}drawFlatCoordinatess_(t,i,n,s){const a=this.state,r=a.fillStyle!==void 0,l=a.strokeStyle!==void 0,o=n.length;this.instructions.push(la),this.hitDetectionInstructions.push(la);for(let h=0;h<o;++h){const u=n[h],f=this.coordinates.length,c=this.appendFlatLineCoordinates(t,i,u,s,!0,!l),d=[K.MOVE_TO_LINE_TO,f,c];this.instructions.push(d),this.hitDetectionInstructions.push(d),l&&(this.instructions.push(sp),this.hitDetectionInstructions.push(sp)),i=u}return r&&(this.instructions.push(Zh),this.hitDetectionInstructions.push(Zh)),l&&(this.instructions.push(Es),this.hitDetectionInstructions.push(Es)),i}drawCircle(t,i,n){const s=this.state,a=s.fillStyle,r=s.strokeStyle;if(a===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([K.SET_FILL_STYLE,We]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([K.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Pn,zn]);const l=t.getFlatCoordinates(),o=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1);const u=[K.CIRCLE,h];this.instructions.push(la,u),this.hitDetectionInstructions.push(la,u),s.fillStyle!==void 0&&(this.instructions.push(Zh),this.hitDetectionInstructions.push(Zh)),s.strokeStyle!==void 0&&(this.instructions.push(Es),this.hitDetectionInstructions.push(Es)),this.endGeometry(i)}drawPolygon(t,i,n){const s=this.state,a=s.fillStyle,r=s.strokeStyle;if(a===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([K.SET_FILL_STYLE,We]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([K.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Pn,zn]);const l=t.getEnds(),o=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(o,0,l,h),this.endGeometry(i)}drawMultiPolygon(t,i,n){const s=this.state,a=s.fillStyle,r=s.strokeStyle;if(a===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([K.SET_FILL_STYLE,We]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([K.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Pn,zn]);const l=t.getEndss(),o=t.getOrientedFlatCoordinates(),h=t.getStride();let u=0;for(let f=0,c=l.length;f<c;++f)u=this.drawFlatCoordinatess_(o,u,l[f],h);this.endGeometry(i)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const i=this.coordinates;for(let n=0,s=i.length;n<s;++n)i[n]=ia(i[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;this.updateFillStyle(t,this.createFill),this.updateStrokeStyle(t,this.applyStroke)}}function t7(e,t,i,n,s){const a=[];let r=i,l=0,o=t.slice(i,2);for(;l<e&&r+s<n;){const[h,u]=o.slice(-2),f=t[r+s],c=t[r+s+1],d=Math.sqrt((f-h)*(f-h)+(c-u)*(c-u));if(l+=d,l>=e){const g=(e-l+d)/d,y=hi(h,f,g),v=hi(u,c,g);o.push(y,v),a.push(o),o=[y,v],l==e&&(r+=s),l=0}else if(l<e)o.push(t[r+s],t[r+s+1]),r+=s;else{const g=d-l,y=hi(h,f,g/d),v=hi(u,c,g/d);o.push(y,v),a.push(o),o=[y,v],l=0,r+=s}}return l>0&&a.push(o),a}function e7(e,t,i,n,s){let a=i,r=i,l=0,o=0,h=i,u,f,c,d,g,y,v,_,m,p;for(f=i;f<n;f+=s){const E=t[f],M=t[f+1];g!==void 0&&(m=E-g,p=M-y,d=Math.sqrt(m*m+p*p),v!==void 0&&(o+=c,u=Math.acos((v*m+_*p)/(c*d)),u>e&&(o>l&&(l=o,a=h,r=f),o=0,h=f-s)),c=d,v=m,_=p),g=E,y=M}return o+=d,o>l?[h,f]:[a,r]}const cc={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class i7 extends mh{constructor(t,i,n,s){super(t,i,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[We]={fillStyle:We},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,i,n){const s=this.textFillState_,a=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!s&&!a)return;const l=this.coordinates;let o=l.length;const h=t.getType();let u=null,f=t.getStride();if(r.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!Je(this.maxExtent,t.getExtent()))return;let c;if(u=t.getFlatCoordinates(),h=="LineString")c=[u.length];else if(h=="MultiLineString")c=t.getEnds();else if(h=="Polygon")c=t.getEnds().slice(0,1);else if(h=="MultiPolygon"){const v=t.getEndss();c=[];for(let _=0,m=v.length;_<m;++_)c.push(v[_][0])}this.beginGeometry(t,i,n);const d=r.repeat,g=d?void 0:r.textAlign;let y=0;for(let v=0,_=c.length;v<_;++v){let m;d?m=t7(d*this.resolution,u,y,c[v],f):m=[u.slice(y,c[v])];for(let p=0,E=m.length;p<E;++p){const M=m[p];let T=0,b=M.length;if(g==null){const S=e7(r.maxAngle,M,0,M.length,2);T=S[0],b=S[1]}for(let S=T;S<b;S+=f)l.push(M[S],M[S+1]);const x=l.length;y=c[v],this.drawChars_(o,x),o=x}}this.endGeometry(i)}else{let c=r.overflow?null:[];switch(h){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),f=2;break;case"Polygon":u=t.getFlatInteriorPoint(),r.overflow||c.push(u[2]/this.resolution),f=3;break;case"MultiPolygon":const E=t.getFlatInteriorPoints();u=[];for(let M=0,T=E.length;M<T;M+=3)r.overflow||c.push(E[M+2]/this.resolution),u.push(E[M],E[M+1]);if(u.length===0)return;f=2;break}const d=this.appendFlatPointCoordinates(u,f);if(d===o)return;if(c&&(d-o)/2!==u.length/f){let E=o/2;c=c.filter((M,T)=>{const b=l[(E+T)*2]===u[T*f]&&l[(E+T)*2+1]===u[T*f+1];return b||--E,b})}this.saveTextStates_();const g=r.backgroundFill?this.createFill(this.fillStyleToState(r.backgroundFill)):null,y=r.backgroundStroke?this.createStroke(this.strokeStyleToState(r.backgroundStroke)):null;this.beginGeometry(t,i,n);let v=r.padding;if(v!=ra&&(r.scale[0]<0||r.scale[1]<0)){let E=r.padding[0],M=r.padding[1],T=r.padding[2],b=r.padding[3];r.scale[0]<0&&(M=-M,b=-b),r.scale[1]<0&&(E=-E,T=-T),v=[E,M,T,b]}const _=this.pixelRatio;this.instructions.push([K.DRAW_IMAGE,o,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,v==ra?ra:v.map(function(E){return E*_}),g,y,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);const m=1/_,p=g?g.slice(0):null;p&&(p[1]=We),this.hitDetectionInstructions.push([K.DRAW_IMAGE,o,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,this.declutterMode_,this.declutterImageWithText_,v,p,y,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?We:this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),this.endGeometry(i)}}saveTextStates_(){const t=this.textStrokeState_,i=this.textState_,n=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const a=this.textKey_;a in this.textStates||(this.textStates[a]={font:i.font,textAlign:i.textAlign||Uo,justify:i.justify,textBaseline:i.textBaseline||lc,scale:i.scale});const r=this.fillKey_;n&&(r in this.fillStates||(this.fillStates[r]={fillStyle:n.fillStyle}))}drawChars_(t,i){const n=this.textStrokeState_,s=this.textState_,a=this.strokeKey_,r=this.textKey_,l=this.fillKey_;this.saveTextStates_();const o=this.pixelRatio,h=cc[s.textBaseline],u=this.textOffsetY_*o,f=this.text_,c=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([K.DRAW_CHARS,t,i,h,s.overflow,l,s.maxAngle,o,u,a,c*o,f,r,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([K.DRAW_CHARS,t,i,h,s.overflow,l&&We,s.maxAngle,o,u,a,c*o,f,r,1/o,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,i){let n,s,a;if(!t)this.text_="";else{const r=t.getFill();r?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=ln(r.getColor()||We)):(s=null,this.textFillState_=s);const l=t.getStroke();if(!l)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);const y=l.getLineDash(),v=l.getLineDashOffset(),_=l.getWidth(),m=l.getMiterLimit();a.lineCap=l.getLineCap()||Vr,a.lineDash=y?y.slice():Pn,a.lineDashOffset=v===void 0?zn:v,a.lineJoin=l.getLineJoin()||Kr,a.lineWidth=_===void 0?ko:_,a.miterLimit=m===void 0?jo:m,a.strokeStyle=ln(l.getColor()||Fo)}n=this.textState_;const o=t.getFont()||Vx;aO(o);const h=t.getScaleArray();n.overflow=t.getOverflow(),n.font=o,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||lc,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||ra,n.scale=h===void 0?[1,1]:h;const u=t.getOffsetX(),f=t.getOffsetY(),c=t.getRotateWithView(),d=t.getKeepUpright(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=c===void 0?!1:c,this.textKeepUpright_=d===void 0?!0:d,this.textRotation_=g===void 0?0:g,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:xt(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?typeof s.fillStyle=="string"?s.fillStyle:"|"+xt(s.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}}const n7={Circle:ap,Default:mh,Image:JO,LineString:$O,Polygon:ap,Text:i7};class s7{constructor(t,i,n,s){this.tolerance_=t,this.maxExtent_=i,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const i in this.buildersByZIndex_){t[i]=t[i]||{};const n=this.buildersByZIndex_[i];for(const s in n){const a=n[s].finish();t[i][s]=a}}return t}getBuilder(t,i){const n=t!==void 0?t.toString():"0";let s=this.buildersByZIndex_[n];s===void 0&&(s={},this.buildersByZIndex_[n]=s);let a=s[i];if(a===void 0){const r=n7[i];a=new r(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[i]=a}return a}}function K_(e,t,i,n){let s=e[t],a=e[t+1],r=0;for(let l=t+n;l<i;l+=n){const o=e[l],h=e[l+1];r+=Math.sqrt((o-s)*(o-s)+(h-a)*(h-a)),s=o,a=h}return r}function a7(e,t,i,n,s,a,r,l,o,h,u,f,c=!0){let d=e[t],g=e[t+1],y=0,v=0,_=0,m=0;function p(){y=d,v=g,t+=n,d=e[t],g=e[t+1],m+=_,_=Math.sqrt((d-y)*(d-y)+(g-v)*(g-v))}do p();while(t<i-n&&m+_<a);let E=_===0?0:(a-m)/_;const M=hi(y,d,E),T=hi(v,g,E),b=t-n,x=m,S=a+l*o(h,s,u);for(;t<i-n&&m+_<S;)p();E=_===0?0:(S-m)/_;const w=hi(y,d,E),A=hi(v,g,E);let O=!1;if(c)if(f){const G=[M,T,w,A];Mx(G,0,4,2,f,G,G),O=G[0]>G[2]}else O=M>w;const P=Math.PI,U=[],Z=b+n===t;t=b,_=0,m=x,d=e[t],g=e[t+1];let L;if(Z){p(),L=Math.atan2(g-v,d-y),O&&(L+=L>0?-P:P);const G=(w+M)/2,D=(A+T)/2;return U[0]=[G,D,(S-a)/2,L,s],U}s=s.replace(/\n/g," ");for(let G=0,D=s.length;G<D;){p();let z=Math.atan2(g-v,d-y);if(O&&(z+=z>0?-P:P),L!==void 0){let H=z-L;if(H+=H>P?-2*P:H<-P?2*P:0,Math.abs(H)>r)return null}L=z;const Y=G;let B=0;for(;G<D;++G){const H=O?D-G-1:G,_t=l*o(h,s[H],u);if(t+n<i&&m+_<a+B+_t/2)break;B+=_t}if(G===Y)continue;const R=O?s.substring(D-Y,D-G):s.substring(Y,G);E=_===0?0:(a+B/2-m)/_;const F=hi(y,d,E),q=hi(v,g,E);U.push([F,q,B/2,z,R]),a+=B}return U}const Ya=ki(),Jn=[],xn=[],Sn=[],$n=[];function rp(e){return e[3].declutterBox}const lp=new RegExp("[-----]");function xd(e,t){return t==="start"?t=lp.test(e)?"right":"left":t==="end"&&(t=lp.test(e)?"left":"right"),cc[t]}function r7(e,t,i){return i>0&&e.push(`
`,""),e.push(t,""),e}function l7(e,t,i){return i%2===0&&(e+=t),e}class o7{constructor(t,i,n,s,a){this.overlaps=n,this.pixelRatio=i,this.resolution=t,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=Wi(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=a?new oS:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,i,n,s){const a=t+i+n+s;if(this.labels_[a])return this.labels_[a];const r=s?this.strokeStates[s]:null,l=n?this.fillStates[n]:null,o=this.textStates[i],h=this.pixelRatio,u=[o.scale[0]*h,o.scale[1]*h],f=o.justify?cc[o.justify]:xd(Array.isArray(t)?t[0]:t,o.textAlign||Uo),c=s&&r.lineWidth?r.lineWidth:0,d=Array.isArray(t)?t:String(t).split(`
`).reduce(r7,[]),{width:g,height:y,widths:v,heights:_,lineWidths:m}=lO(o,d),p=g+c,E=[],M=(p+2)*u[0],T=(y+c)*u[1],b={width:M<0?Math.floor(M):Math.ceil(M),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:E};(u[0]!=1||u[1]!=1)&&E.push("scale",u),s&&(E.push("strokeStyle",r.strokeStyle),E.push("lineWidth",c),E.push("lineCap",r.lineCap),E.push("lineJoin",r.lineJoin),E.push("miterLimit",r.miterLimit),E.push("setLineDash",[r.lineDash]),E.push("lineDashOffset",r.lineDashOffset)),n&&E.push("fillStyle",l.fillStyle),E.push("textBaseline","middle"),E.push("textAlign","center");const x=.5-f;let S=f*p+x*c;const w=[],A=[];let O=0,P=0,U=0,Z=0,L;for(let G=0,D=d.length;G<D;G+=2){const z=d[G];if(z===`
`){P+=O,O=0,S=f*p+x*c,++Z;continue}const Y=d[G+1]||o.font;Y!==L&&(s&&w.push("font",Y),n&&A.push("font",Y),L=Y),O=Math.max(O,_[U]);const B=[z,S+x*v[U]+f*(v[U]-m[Z]),.5*(c+O)+P];S+=v[U],s&&w.push("strokeText",B),n&&A.push("fillText",B),++U}return Array.prototype.push.apply(E,w),Array.prototype.push.apply(E,A),this.labels_[a]=b,b}replayTextBackground_(t,i,n,s,a,r,l){t.beginPath(),t.moveTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,s),t.lineTo.apply(t,a),t.lineTo.apply(t,i),r&&(this.alignAndScaleFill_=r[2],t.fillStyle=r[1],this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())}calculateImageOrLabelDimensions_(t,i,n,s,a,r,l,o,h,u,f,c,d,g,y,v){l*=c[0],o*=c[1];let _=n-l,m=s-o;const p=a+h>t?t-h:a,E=r+u>i?i-u:r,M=g[3]+p*c[0]+g[1],T=g[0]+E*c[1]+g[2],b=_-g[3],x=m-g[0];(y||f!==0)&&(Jn[0]=b,$n[0]=b,Jn[1]=x,xn[1]=x,xn[0]=b+M,Sn[0]=xn[0],Sn[1]=x+T,$n[1]=Sn[1]);let S;return f!==0?(S=Yn(Wi(),n,s,1,1,f,-n,-s),Ee(S,Jn),Ee(S,xn),Ee(S,Sn),Ee(S,$n),Fs(Math.min(Jn[0],xn[0],Sn[0],$n[0]),Math.min(Jn[1],xn[1],Sn[1],$n[1]),Math.max(Jn[0],xn[0],Sn[0],$n[0]),Math.max(Jn[1],xn[1],Sn[1],$n[1]),Ya)):Fs(Math.min(b,b+M),Math.min(x,x+T),Math.max(b,b+M),Math.max(x,x+T),Ya),d&&(_=Math.round(_),m=Math.round(m)),{drawImageX:_,drawImageY:m,drawImageW:p,drawImageH:E,originX:h,originY:u,declutterBox:{minX:Ya[0],minY:Ya[1],maxX:Ya[2],maxY:Ya[3],value:v},canvasTransform:S,scale:c}}replayImageOrLabel_(t,i,n,s,a,r,l){const o=!!(r||l),h=s.declutterBox,u=l?l[2]*s.scale[0]/2:0;return h.minX-u<=i[0]&&h.maxX+u>=0&&h.minY-u<=i[1]&&h.maxY+u>=0&&(o&&this.replayTextBackground_(t,Jn,xn,Sn,$n,r,l),oO(t,s.canvasTransform,a,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){const i=this.alignAndScaleFill_;if(i){const n=Ee(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;t.save(),t.translate(n[0]%s,n[1]%s),i!==1&&t.scale(i,i),t.rotate(this.viewRotation_)}t.fill(),i&&t.restore()}setStrokeStyle_(t,i){t.strokeStyle=i[1],i[1]&&(t.lineWidth=i[2],t.lineCap=i[3],t.lineJoin=i[4],t.miterLimit=i[5],t.lineDashOffset=i[7],t.setLineDash(i[6]))}drawLabelWithPointPlacement_(t,i,n,s){const a=this.textStates[i],r=this.createLabel(t,i,s,n),l=this.strokeStates[n],o=this.pixelRatio,h=xd(Array.isArray(t)?t[0]:t,a.textAlign||Uo),u=cc[a.textBaseline||lc],f=l&&l.lineWidth?l.lineWidth:0,c=r.width/o-2*a.scale[0],d=h*c+2*(.5-h)*f,g=u*r.height/o+2*(.5-u)*f;return{label:r,anchorX:d,anchorY:g}}execute_(t,i,n,s,a,r,l,o){const h=this.zIndexContext_;let u;this.pixelCoordinates_&&qs(n,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=Ns(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),o5(this.renderedTransform_,n));let f=0;const c=s.length;let d=0,g,y,v,_,m,p,E,M,T,b,x,S,w,A=0,O=0;const P=this.coordinateCache_,U=this.viewRotation_,Z=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,L={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:U},G=this.instructions!=s||this.overlaps?0:200;let D,z,Y,B;for(;f<c;){const R=s[f];switch(R[0]){case K.BEGIN_GEOMETRY:D=R[1],B=R[3],D.getGeometry()?l!==void 0&&!Je(l,B.getExtent())?f=R[2]+1:++f:f=R[2],h&&(h.zIndex=R[4]);break;case K.BEGIN_PATH:A>G&&(this.fill_(t),A=0),O>G&&(t.stroke(),O=0),!A&&!O&&(t.beginPath(),m=NaN,p=NaN),++f;break;case K.CIRCLE:d=R[1];const q=u[d],H=u[d+1],_t=u[d+2],pt=u[d+3],tt=_t-q,et=pt-H,ft=Math.sqrt(tt*tt+et*et);t.moveTo(q+ft,H),t.arc(q,H,ft,0,2*Math.PI,!0),++f;break;case K.CLOSE_PATH:t.closePath(),++f;break;case K.CUSTOM:d=R[1],g=R[2];const nt=R[3],Gt=R[4],Yt=R[5];L.geometry=nt,L.feature=D,f in P||(P[f]=[]);const Et=P[f];Yt?Yt(u,d,g,2,Et):(Et[0]=u[d],Et[1]=u[d+1],Et.length=2),h&&(h.zIndex=R[6]),Gt(Et,L),++f;break;case K.DRAW_IMAGE:d=R[1],g=R[2],T=R[3],y=R[4],v=R[5];let rt=R[6];const W=R[7],Zt=R[8],ht=R[9],wt=R[10];let Pt=R[11];const ri=R[12];let Me=R[13];_=R[14]||"declutter";const qt=R[15];if(!T&&R.length>=20){b=R[19],x=R[20],S=R[21],w=R[22];const xi=this.drawLabelWithPointPlacement_(b,x,S,w);T=xi.label,R[3]=T;const Zs=R[23];y=(xi.anchorX-Zs)*this.pixelRatio,R[4]=y;const Si=R[24];v=(xi.anchorY-Si)*this.pixelRatio,R[5]=v,rt=T.height,R[6]=rt,Me=T.width,R[13]=Me}let le;R.length>25&&(le=R[25]);let Be,Vt,de;R.length>17?(Be=R[16],Vt=R[17],de=R[18]):(Be=ra,Vt=null,de=null),wt&&Z?Pt+=U:!wt&&!Z&&(Pt-=U);let Bi=0;for(;d<g;d+=2){if(le&&le[Bi++]<Me/this.pixelRatio)continue;const xi=this.calculateImageOrLabelDimensions_(T.width,T.height,u[d],u[d+1],Me,rt,y,v,Zt,ht,Pt,ri,a,Be,!!Vt||!!de,D),Zs=[t,i,T,xi,W,Vt,de];if(o){let Si,tn,Mi;if(qt){const Qt=g-d;if(!qt[Qt]){qt[Qt]={args:Zs,declutterMode:_};continue}const Ie=qt[Qt];Si=Ie.args,tn=Ie.declutterMode,delete qt[Qt],Mi=rp(Si)}let gn,_n;if(Si&&(tn!=="declutter"||!o.collides(Mi))&&(gn=!0),(_!=="declutter"||!o.collides(xi.declutterBox))&&(_n=!0),tn==="declutter"&&_==="declutter"){const Qt=gn&&_n;gn=Qt,_n=Qt}gn&&(tn!=="none"&&o.insert(Mi),this.replayImageOrLabel_.apply(this,Si)),_n&&(_!=="none"&&o.insert(xi.declutterBox),this.replayImageOrLabel_.apply(this,Zs))}else this.replayImageOrLabel_.apply(this,Zs)}++f;break;case K.DRAW_CHARS:const Pa=R[1],hl=R[2],$i=R[3],Ei=R[4];w=R[5];const Hs=R[6],ul=R[7],em=R[8];S=R[9];const of=R[10];b=R[11],Array.isArray(b)&&(b=b.reduce(l7,"")),x=R[12];const im=[R[13],R[13]];_=R[14]||"declutter";const SS=R[15],hf=this.textStates[x],cl=hf.font,fl=[hf.scale[0]*ul,hf.scale[1]*ul];let dl;cl in this.widths_?dl=this.widths_[cl]:(dl={},this.widths_[cl]=dl);const nm=K_(u,Pa,hl,2),sm=Math.abs(fl[0])*Xy(cl,b,dl);if(Ei||sm<=nm){const xi=this.textStates[x].textAlign,Zs=(nm-sm)*xd(b,xi),Si=a7(u,Pa,hl,2,b,Zs,Hs,Math.abs(fl[0]),Xy,cl,dl,Z?0:this.viewRotation_,SS);t:if(Si){const tn=[];let Mi,gn,_n,Qt,Ie;if(S)for(Mi=0,gn=Si.length;Mi<gn;++Mi){Ie=Si[Mi],_n=Ie[4],Qt=this.createLabel(_n,x,"",S),y=Ie[2]+(fl[0]<0?-of:of),v=$i*Qt.height+(.5-$i)*2*of*fl[1]/fl[0]-em;const mn=this.calculateImageOrLabelDimensions_(Qt.width,Qt.height,Ie[0],Ie[1],Qt.width,Qt.height,y,v,0,0,Ie[3],im,!1,ra,!1,D);if(o&&_==="declutter"&&o.collides(mn.declutterBox))break t;tn.push([t,i,Qt,mn,1,null,null])}if(w)for(Mi=0,gn=Si.length;Mi<gn;++Mi){Ie=Si[Mi],_n=Ie[4],Qt=this.createLabel(_n,x,w,""),y=Ie[2],v=$i*Qt.height-em;const mn=this.calculateImageOrLabelDimensions_(Qt.width,Qt.height,Ie[0],Ie[1],Qt.width,Qt.height,y,v,0,0,Ie[3],im,!1,ra,!1,D);if(o&&_==="declutter"&&o.collides(mn.declutterBox))break t;tn.push([t,i,Qt,mn,1,null,null])}o&&_!=="none"&&o.load(tn.map(rp));for(let mn=0,MS=tn.length;mn<MS;++mn)this.replayImageOrLabel_.apply(this,tn[mn])}}++f;break;case K.END_GEOMETRY:if(r!==void 0){D=R[1];const xi=r(D,B,_);if(xi)return xi}++f;break;case K.FILL:G?A++:this.fill_(t),++f;break;case K.MOVE_TO_LINE_TO:for(d=R[1],g=R[2],z=u[d],Y=u[d+1],t.moveTo(z,Y),m=z+.5|0,p=Y+.5|0,d+=2;d<g;d+=2)z=u[d],Y=u[d+1],E=z+.5|0,M=Y+.5|0,(d==g-2||E!==m||M!==p)&&(t.lineTo(z,Y),m=E,p=M);++f;break;case K.SET_FILL_STYLE:this.alignAndScaleFill_=R[2],A&&(this.fill_(t),A=0,O&&(t.stroke(),O=0)),t.fillStyle=R[1],++f;break;case K.SET_STROKE_STYLE:O&&(t.stroke(),O=0),this.setStrokeStyle_(t,R),++f;break;case K.STROKE:G?O++:t.stroke(),++f;break;default:++f;break}}A&&this.fill_(t),O&&t.stroke()}execute(t,i,n,s,a,r){this.viewRotation_=s,this.execute_(t,i,n,this.instructions,a,void 0,void 0,r)}executeHitDetection(t,i,n,s,a){return this.viewRotation_=n,this.execute_(t,[t.canvas.width,t.canvas.height],i,this.hitDetectionInstructions,!0,s,a)}}const na=["Polygon","Circle","LineString","Image","Text","Default"],cS=["Image","Text"],h7=na.filter(e=>!cS.includes(e));class u7{constructor(t,i,n,s,a,r,l){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=i,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Wi(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(a,l)}clip(t,i){const n=this.getClipCoords(i);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t,i){for(const n in t){let s=this.executorsByZIndex_[n];s===void 0&&(s={},this.executorsByZIndex_[n]=s);const a=t[n];for(const r in a){const l=a[r];s[r]=new o7(this.resolution_,this.pixelRatio_,this.overlaps_,l,i)}}}hasExecutors(t){for(const i in this.executorsByZIndex_){const n=this.executorsByZIndex_[i];for(let s=0,a=t.length;s<a;++s)if(t[s]in n)return!0}return!1}forEachFeatureAtCoordinate(t,i,n,s,a,r){s=Math.round(s);const l=s*2+1,o=Yn(this.hitDetectionTransform_,s+.5,s+.5,1/i,-1/i,-n,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=me(l,l));const u=this.hitDetectionContext_;u.canvas.width!==l||u.canvas.height!==l?(u.canvas.width=l,u.canvas.height=l):h||u.clearRect(0,0,l,l);let f;this.renderBuffer_!==void 0&&(f=ki(),oo(f,t),d_(f,i*(this.renderBuffer_+s),f));const c=c7(s);let d;function g(M,T,b){const x=u.getImageData(0,0,l,l).data;for(let S=0,w=c.length;S<w;S++)if(x[c[S]]>0){if(!r||b==="none"||d!=="Image"&&d!=="Text"||r.includes(M)){const A=(c[S]-3)/4,O=s-A%l,P=s-(A/l|0),U=a(M,T,O*O+P*P);if(U)return U}u.clearRect(0,0,l,l);break}}const y=Object.keys(this.executorsByZIndex_).map(Number);y.sort(In);let v,_,m,p,E;for(v=y.length-1;v>=0;--v){const M=y[v].toString();for(m=this.executorsByZIndex_[M],_=na.length-1;_>=0;--_)if(d=na[_],p=m[d],p!==void 0&&(E=p.executeHitDetection(u,o,n,g,f),E))return E}}getClipCoords(t){const i=this.maxExtent_;if(!i)return null;const n=i[0],s=i[1],a=i[2],r=i[3],l=[n,s,n,r,a,r,a,s];return Ns(l,0,8,2,t,l),l}isEmpty(){return Ma(this.executorsByZIndex_)}execute(t,i,n,s,a,r,l){const o=Object.keys(this.executorsByZIndex_).map(Number);o.sort(l?rR:In),r=r||na;const h=na.length;for(let u=0,f=o.length;u<f;++u){const c=o[u].toString(),d=this.executorsByZIndex_[c];for(let g=0,y=r.length;g<y;++g){const v=r[g],_=d[v];if(_!==void 0){const m=l===null?void 0:_.getZIndexContext(),p=m?m.getContext():t,E=this.maxExtent_&&v!=="Image"&&v!=="Text";if(E&&(p.save(),this.clip(p,n)),!m||v==="Text"||v==="Image"?_.execute(p,i,n,s,a,l):m.pushFunction(M=>_.execute(M,i,n,s,a,l)),E&&p.restore(),m){m.offset();const M=o[u]*h+na.indexOf(v);this.deferredZIndexContexts_[M]||(this.deferredZIndexContexts_[M]=[]),this.deferredZIndexContexts_[M].push(m)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,i=Object.keys(t).map(Number).sort(In);for(let n=0,s=i.length;n<s;++n)t[i[n]].forEach(a=>{a.draw(this.renderedContext_),a.clear()}),t[i[n]].length=0}}const Sd={};function c7(e){if(Sd[e]!==void 0)return Sd[e];const t=e*2+1,i=e*e,n=new Array(i+1);for(let a=0;a<=e;++a)for(let r=0;r<=e;++r){const l=a*a+r*r;if(l>i)break;let o=n[l];o||(o=[],n[l]=o),o.push(((e+a)*t+(e+r))*4+3),a>0&&o.push(((e-a)*t+(e+r))*4+3),r>0&&(o.push(((e+a)*t+(e-r))*4+3),a>0&&o.push(((e-a)*t+(e-r))*4+3))}const s=[];for(let a=0,r=n.length;a<r;++a)n[a]&&s.push(...n[a]);return Sd[e]=s,s}class f7 extends uS{constructor(t,i,n,s,a,r,l){super(),this.context_=t,this.pixelRatio_=i,this.extent_=n,this.transform_=s,this.transformRotation_=s?Uc(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=a,this.squaredTolerance_=r,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Wi()}drawImages_(t,i,n,s){if(!this.image_)return;const a=Ns(t,i,n,s,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.tmpLocalTransform_,o=r.globalAlpha;this.imageOpacity_!=1&&(r.globalAlpha=o*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let u=0,f=a.length;u<f;u+=2){const c=a[u]-this.imageAnchorX_,d=a[u+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=c+this.imageAnchorX_,y=d+this.imageAnchorY_;Yn(l,g,y,1,1,h,-g,-y),r.save(),r.transform.apply(r,l),r.translate(g,y),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(r.globalAlpha=o)}drawText_(t,i,n,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const a=Ns(t,i,n,s,this.transform_,this.pixelCoordinates_),r=this.context_;let l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);i<n;i+=s){const o=a[i]+this.textOffsetX_,h=a[i+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(r.save(),r.translate(o-this.textOffsetX_,h-this.textOffsetY_),r.rotate(l),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,o,h),this.textFillState_&&r.fillText(this.text_,o,h))}}moveToLineTo_(t,i,n,s,a){const r=this.context_,l=Ns(t,i,n,s,this.transform_,this.pixelCoordinates_);r.moveTo(l[0],l[1]);let o=l.length;a&&(o-=2);for(let h=2;h<o;h+=2)r.lineTo(l[h],l[h+1]);return a&&r.closePath(),n}drawRings_(t,i,n,s){for(let a=0,r=n.length;a<r;++a)i=this.moveToLineTo_(t,i,n[a],s,!0);return i}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Je(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=m5(t,this.transform_,this.pixelCoordinates_),n=i[2]-i[0],s=i[3]-i[1],a=Math.sqrt(n*n+s*s),r=this.context_;r.beginPath(),r.arc(i[0],i[1],a,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,i){const n=i.getGeometryFunction()(t);n&&(this.setStyle(i),this.drawGeometry(n))}drawGeometryCollection(t){const i=t.getGeometriesArray();for(let n=0,s=i.length;n<s;++n)this.drawGeometry(i[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Je(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const i=t.getExtent();if(Je(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=t.getFlatCoordinates();let a=0;const r=t.getEnds(),l=t.getStride();n.beginPath();for(let o=0,h=r.length;o<h;++o)a=this.moveToLineTo_(s,a,r[o],l,!1);n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Je(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Je(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=t.getOrientedFlatCoordinates();let s=0;const a=t.getEndss(),r=t.getStride();i.beginPath();for(let l=0,o=a.length;l<o;++l){const h=a[l];s=this.drawRings_(n,s,h,r)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){const i=t.getFlatInteriorPoints();this.drawText_(i,0,i.length,2)}}}setContextFillState_(t){const i=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const i=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,i.lineCap=t.lineCap),qs(n.lineDash,t.lineDash)||i.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset,i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const i=this.context_,n=this.contextTextState_,s=t.textAlign?t.textAlign:Uo;n?(n.font!=t.font&&(n.font=t.font,i.font=t.font),n.textAlign!=s&&(n.textAlign=s,i.textAlign=s),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=s,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,i){if(!t)this.fillState_=null;else{const n=t.getColor();this.fillState_={fillStyle:ln(n||We)}}if(!i)this.strokeState_=null;else{const n=i.getColor(),s=i.getLineCap(),a=i.getLineDash(),r=i.getLineDashOffset(),l=i.getLineJoin(),o=i.getWidth(),h=i.getMiterLimit(),u=a||Pn;this.strokeState_={lineCap:s!==void 0?s:Vr,lineDash:this.pixelRatio_===1?u:u.map(f=>f*this.pixelRatio_),lineDashOffset:(r||zn)*this.pixelRatio_,lineJoin:l!==void 0?l:Kr,lineWidth:(o!==void 0?o:ko)*this.pixelRatio_,miterLimit:h!==void 0?h:jo,strokeStyle:ln(n||Fo)}}}setImageStyle(t){let i;if(!t||!(i=t.getSize())){this.image_=null;return}const n=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),a=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=i[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const r=t.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/n,r[1]*this.pixelRatio_/n],this.imageWidth_=i[0]*n}setTextStyle(t){if(!t)this.text_="";else{const i=t.getFill();if(!i)this.textFillState_=null;else{const d=i.getColor();this.textFillState_={fillStyle:ln(d||We)}}const n=t.getStroke();if(!n)this.textStrokeState_=null;else{const d=n.getColor(),g=n.getLineCap(),y=n.getLineDash(),v=n.getLineDashOffset(),_=n.getLineJoin(),m=n.getWidth(),p=n.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:Vr,lineDash:y||Pn,lineDashOffset:v||zn,lineJoin:_!==void 0?_:Kr,lineWidth:m!==void 0?m:ko,miterLimit:p!==void 0?p:jo,strokeStyle:ln(d||Fo)}}const s=t.getFont(),a=t.getOffsetX(),r=t.getOffsetY(),l=t.getRotateWithView(),o=t.getRotation(),h=t.getScaleArray(),u=t.getText(),f=t.getTextAlign(),c=t.getTextBaseline();this.textState_={font:s!==void 0?s:Vx,textAlign:f!==void 0?f:Uo,textBaseline:c!==void 0?c:lc},this.text_=u!==void 0?Array.isArray(u)?u.reduce((d,g,y)=>d+=y%2?" ":g,""):u:"",this.textOffsetX_=a!==void 0?this.pixelRatio_*a:0,this.textOffsetY_=r!==void 0?this.pixelRatio_*r:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=o!==void 0?o:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const nn=.5;function d7(e,t,i,n,s,a,r,l,o){const h=s,u=e[0]*nn,f=e[1]*nn,c=me(u,f);c.imageSmoothingEnabled=!1;const d=c.canvas,g=new f7(c,nn,s,null,r,l,null),y=i.length,v=Math.floor((256*256*256-1)/y),_={};for(let p=1;p<=y;++p){const E=i[p-1],M=E.getStyleFunction()||n;if(!M)continue;let T=M(E,a);if(!T)continue;Array.isArray(T)||(T=[T]);const x=(p*v).toString(16).padStart(7,"#00000");for(let S=0,w=T.length;S<w;++S){const A=T[S],O=A.getGeometryFunction()(E);if(!O||!Je(h,O.getExtent()))continue;const P=A.clone(),U=P.getFill();U&&U.setColor(x);const Z=P.getStroke();Z&&(Z.setColor(x),Z.setLineDash(null)),P.setText(void 0);const L=A.getImage();if(L){const Y=L.getImageSize();if(!Y)continue;const B=me(Y[0],Y[1],void 0,{alpha:!1}),R=B.canvas;B.fillStyle=x,B.fillRect(0,0,R.width,R.height),P.setImage(new gh({img:R,anchor:L.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:L.getOrigin(),opacity:1,size:L.getSize(),scale:L.getScale(),rotation:L.getRotation(),rotateWithView:L.getRotateWithView()}))}const G=P.getZIndex()||0;let D=_[G];D||(D={},_[G]=D,D.Polygon=[],D.Circle=[],D.LineString=[],D.Point=[]);const z=O.getType();if(z==="GeometryCollection"){const Y=O.getGeometriesArrayRecursive();for(let B=0,R=Y.length;B<R;++B){const F=Y[B];D[F.getType().replace("Multi","")].push(F,P)}}else D[z.replace("Multi","")].push(O,P)}}const m=Object.keys(_).map(Number).sort(In);for(let p=0,E=m.length;p<E;++p){const M=_[m[p]];for(const T in M){const b=M[T];for(let x=0,S=b.length;x<S;x+=2){g.setStyle(b[x+1]);for(let w=0,A=t.length;w<A;++w)g.setTransform(t[w]),g.drawGeometry(b[x])}}}return c.getImageData(0,0,d.width,d.height)}function g7(e,t,i){const n=[];if(i){const s=Math.floor(Math.round(e[0])*nn),a=Math.floor(Math.round(e[1])*nn),r=(Wt(s,0,i.width-1)+Wt(a,0,i.height-1)*i.width)*4,l=i.data[r],o=i.data[r+1],u=i.data[r+2]+256*(o+256*l),f=Math.floor((256*256*256-1)/t.length);u&&u%f===0&&n.push(t[u/f-1])}return n}const _7=.5,fS={Point:M7,LineString:E7,Polygon:w7,MultiPoint:b7,MultiLineString:x7,MultiPolygon:S7,GeometryCollection:v7,Circle:y7};function m7(e,t){return parseInt(xt(e),10)-parseInt(xt(t),10)}function op(e,t){const i=dS(e,t);return i*i}function dS(e,t){return _7*e/t}function y7(e,t,i,n,s){const a=i.getFill(),r=i.getStroke();if(a||r){const o=e.getBuilder(i.getZIndex(),"Circle");o.setFillStrokeStyle(a,r),o.drawCircle(t,n,s)}const l=i.getText();if(l&&l.getText()){const o=e.getBuilder(i.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,n)}}function hp(e,t,i,n,s,a,r,l){const o=[],h=i.getImage();if(h){let c=!0;const d=h.getImageState();d==ot.LOADED||d==ot.ERROR?c=!1:d==ot.IDLE&&h.load(),c&&o.push(h.ready())}const u=i.getFill();u&&u.loading()&&o.push(u.ready());const f=o.length>0;return f&&Promise.all(o).then(()=>s(null)),p7(e,t,i,n,a,r,l),f}function p7(e,t,i,n,s,a,r){const l=i.getGeometryFunction()(t);if(!l)return;const o=l.simplifyTransformed(n,s);if(i.getRenderer())gS(e,o,i,t,r);else{const u=fS[o.getType()];u(e,o,i,t,r,a)}}function gS(e,t,i,n,s){if(t.getType()=="GeometryCollection"){const r=t.getGeometries();for(let l=0,o=r.length;l<o;++l)gS(e,r[l],i,n,s);return}e.getBuilder(i.getZIndex(),"Default").drawCustom(t,n,i.getRenderer(),i.getHitDetectionRenderer(),s)}function v7(e,t,i,n,s,a){const r=t.getGeometriesArray();let l,o;for(l=0,o=r.length;l<o;++l){const h=fS[r[l].getType()];h(e,r[l],i,n,s,a)}}function E7(e,t,i,n,s){const a=i.getStroke();if(a){const l=e.getBuilder(i.getZIndex(),"LineString");l.setFillStrokeStyle(null,a),l.drawLineString(t,n,s)}const r=i.getText();if(r&&r.getText()){const l=e.getBuilder(i.getZIndex(),"Text");l.setTextStyle(r),l.drawText(t,n,s)}}function x7(e,t,i,n,s){const a=i.getStroke();if(a){const l=e.getBuilder(i.getZIndex(),"LineString");l.setFillStrokeStyle(null,a),l.drawMultiLineString(t,n,s)}const r=i.getText();if(r&&r.getText()){const l=e.getBuilder(i.getZIndex(),"Text");l.setTextStyle(r),l.drawText(t,n,s)}}function S7(e,t,i,n,s){const a=i.getFill(),r=i.getStroke();if(r||a){const o=e.getBuilder(i.getZIndex(),"Polygon");o.setFillStrokeStyle(a,r),o.drawMultiPolygon(t,n,s)}const l=i.getText();if(l&&l.getText()){const o=e.getBuilder(i.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,n,s)}}function M7(e,t,i,n,s,a){const r=i.getImage(),l=i.getText(),o=l&&l.getText(),h=a&&r&&o?{}:void 0;if(r){if(r.getImageState()!=ot.LOADED)return;const u=e.getBuilder(i.getZIndex(),"Image");u.setImageStyle(r,h),u.drawPoint(t,n,s)}if(o){const u=e.getBuilder(i.getZIndex(),"Text");u.setTextStyle(l,h),u.drawText(t,n,s)}}function b7(e,t,i,n,s,a){const r=i.getImage(),l=r&&r.getOpacity()!==0,o=i.getText(),h=o&&o.getText(),u=a&&l&&h?{}:void 0;if(l){if(r.getImageState()!=ot.LOADED)return;const f=e.getBuilder(i.getZIndex(),"Image");f.setImageStyle(r,u),f.drawMultiPoint(t,n,s)}if(h){const f=e.getBuilder(i.getZIndex(),"Text");f.setTextStyle(o,u),f.drawText(t,n,s)}}function w7(e,t,i,n,s){const a=i.getFill(),r=i.getStroke();if(a||r){const o=e.getBuilder(i.getZIndex(),"Polygon");o.setFillStrokeStyle(a,r),o.drawPolygon(t,n,s)}const l=i.getText();if(l&&l.getText()){const o=e.getBuilder(i.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,n,s)}}class C7 extends hS{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ki(),this.wrappedRenderedExtent_=ki(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,i,n){const s=i.extent,a=i.viewState,r=a.center,l=a.resolution,o=a.projection,h=a.rotation,u=o.getExtent(),f=this.getLayer().getSource(),c=this.getLayer().getDeclutter(),d=i.pixelRatio,g=i.viewHints,y=!(g[De.ANIMATING]||g[De.INTERACTING]),v=this.context,_=Math.round(Nt(s)/l*d),m=Math.round(Ue(s)/l*d),p=f.getWrapX()&&o.canWrapX(),E=p?Nt(u):null,M=p?Math.ceil((s[2]-u[2])/E)+1:1;let T=p?Math.floor((s[0]-u[0])/E):0;do{let b=this.getRenderTransform(r,l,0,d,_,m,T*E);i.declutter&&(b=b.slice(0)),t.execute(v,[v.canvas.width,v.canvas.height],b,h,y,n===void 0?na:n?cS:h7,n?c&&i.declutter[c]:void 0)}while(++T<M)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=me(this.context.canvas.width,this.context.canvas.height,ip))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,Jc(this.context),ip.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,i){const n=t.layerStatesArray[t.layerIndex];this.opacity_=n.opacity;const s=t.viewState;this.prepareContainer(t,i);const a=this.context,r=this.replayGroup_;let l=r&&!r.isEmpty();if(!l&&!(this.getLayer().hasListener(Di.PRERENDER)||this.getLayer().hasListener(Di.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(a,t),s.projection,this.clipped_=!1,l&&n.extent&&this.clipping){const o=ys(n.extent);l=Je(o,t.extent),this.clipped_=l&&!Pl(o,t.extent),this.clipped_&&this.clipUnrotated(a,t,o)}return l&&this.renderWorlds(r,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&a.restore(),this.postRender(a,t),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(i=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),s=this.renderedCenter_,a=this.renderedResolution_,r=this.renderedRotation_,l=this.renderedProjection_,o=this.wrappedRenderedExtent_,h=this.getLayer(),u=[],f=n[0]*nn,c=n[1]*nn;u.push(this.getRenderTransform(s,a,r,nn,f,c,0).slice());const d=h.getSource(),g=l.getExtent();if(d.getWrapX()&&l.canWrapX()&&!Pl(g,o)){let y=o[0];const v=Nt(g);let _=0,m;for(;y<g[0];)--_,m=v*_,u.push(this.getRenderTransform(s,a,r,nn,f,c,m).slice()),y+=v;for(_=0,y=o[2];y>g[2];)++_,m=v*_,u.push(this.getRenderTransform(s,a,r,nn,f,c,m).slice()),y-=v}this.hitDetectionImageData_=d7(n,u,this.renderedFeatures_,h.getStyleFunction(),o,a,r,op(a,this.renderedPixelRatio_))}i(g7(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,i,n,s,a){var c,d;if(!this.replayGroup_)return;const r=i.viewState.resolution,l=i.viewState.rotation,o=this.getLayer(),h={},u=function(g,y,v){const _=xt(g),m=h[_];if(m){if(m!==!0&&v<m.distanceSq){if(v===0)return h[_]=!0,a.splice(a.lastIndexOf(m),1),s(g,o,y);m.geometry=y,m.distanceSq=v}}else{if(v===0)return h[_]=!0,s(g,o,y);a.push(h[_]={feature:g,layer:o,geometry:y,distanceSq:v,callback:s})}},f=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,r,l,n,u,f?(d=(c=i.declutter)==null?void 0:c[f])==null?void 0:d.all().map(g=>g.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const i=this.getLayer(),n=i.getSource();if(!n)return!1;const s=t.viewHints[De.ANIMATING],a=t.viewHints[De.INTERACTING],r=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(this.ready&&!r&&s||!l&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const o=t.extent,h=t.viewState,u=h.projection,f=h.resolution,c=t.pixelRatio,d=i.getRevision(),g=i.getRenderBuffer();let y=i.getRenderOrder();y===void 0&&(y=m7);const v=h.center.slice(),_=d_(o,g*f),m=_.slice(),p=[_.slice()],E=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!Pl(E,t.extent)){const U=Nt(E),Z=Math.max(Nt(_)/2,U);_[0]=E[0]-Z,_[2]=E[2]+Z,fx(v,u);const L=ux(p[0],u);L[0]<E[0]&&L[2]<E[2]?p.push([L[0]+U,L[1],L[2]+U,L[3]]):L[0]>E[0]&&L[2]>E[2]&&p.push([L[0]-U,L[1],L[2]-U,L[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==d&&this.renderedRenderOrder_==y&&this.renderedFrameDeclutter_===!!t.declutter&&Pl(this.wrappedRenderedExtent_,_))return qs(this.renderedExtent_,m)||(this.hitDetectionImageData_=null,this.renderedExtent_=m),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const M=new s7(dS(f,c),_,f,c);let T;for(let U=0,Z=p.length;U<Z;++U)n.loadFeatures(p[U],f,u);const b=op(f,c);let x=!0;const S=(U,Z)=>{let L;const G=U.getStyleFunction()||i.getStyleFunction();if(G&&(L=G(U,f)),L){const D=this.renderFeature(U,b,L,M,T,this.getLayer().getDeclutter(),Z);x=x&&!D}},w=xx(_),A=n.getFeaturesInExtent(w);y&&A.sort(y);for(let U=0,Z=A.length;U<Z;++U)S(A[U],U);this.renderedFeatures_=A,this.ready=x;const O=M.finish(),P=new u7(_,f,c,n.getOverlaps(),O,i.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=f,this.renderedRevision_=d,this.renderedRenderOrder_=y,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=m,this.wrappedRenderedExtent_=_,this.renderedCenter_=v,this.renderedProjection_=u,this.renderedPixelRatio_=c,this.replayGroup_=P,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,i,n,s,a,r,l){if(!n)return!1;let o=!1;if(Array.isArray(n))for(let h=0,u=n.length;h<u;++h)o=hp(s,t,n[h],i,this.boundHandleStyleImageChange_,a,r,l)||o;else o=hp(s,t,n,i,this.boundHandleStyleImageChange_,a,r,l);return o}}class T7 extends iS{constructor(t){super(t)}createRenderer(){return new C7(this)}}let R7=!1;function A7(e,t,i,n,s,a,r){const l=new XMLHttpRequest;l.open("GET",typeof e=="function"?e(i,n,s):e,!0),t.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=R7,l.onload=function(o){if(!l.status||l.status>=200&&l.status<300){const h=t.getType();try{let u;h=="text"||h=="json"?u=l.responseText:h=="xml"?u=l.responseXML||l.responseText:h=="arraybuffer"&&(u=l.response),u?a(t.readFeatures(u,{extent:i,featureProjection:s}),t.readProjection(u)):r()}catch{r()}}else r()},l.onerror=r,l.send()}function up(e,t){return function(i,n,s,a,r){A7(e,t,i,n,s,(l,o)=>{this.addFeatures(l),a!==void 0&&a(l)},()=>{this.changed(),r!==void 0&&r()})}}function O7(e,t){return[[-1/0,-1/0,1/0,1/0]]}class rf extends dn{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const i=t;this.setGeometry(i)}else{const i=t;this.setProperties(i)}}clone(){const t=new rf(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const i=this.getGeometry();i&&t.setGeometry(i.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Bt(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=vt(t,st.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?L7(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function L7(e){if(typeof e=="function")return e;let t;return Array.isArray(e)?t=e:(Rt(typeof e.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[e]),function(){return t}}function _S(e,t,i,n){const s=[];let a=ki();for(let r=0,l=i.length;r<l;++r){const o=i[r];a=__(e,t,o[0],n),s.push((a[0]+a[2])/2,(a[1]+a[3])/2),t=o[o.length-1]}return s}function fc(e,t,i,n,s,a,r){let l,o;const h=(i-t)/n;if(h===1)l=t;else if(h===2)l=t,o=s;else if(h!==0){let u=e[t],f=e[t+1],c=0;const d=[0];for(let v=t+n;v<i;v+=n){const _=e[v],m=e[v+1];c+=Math.sqrt((_-u)*(_-u)+(m-f)*(m-f)),d.push(c),u=_,f=m}const g=s*c,y=aR(d,g);y<0?(o=(g-d[-y-2])/(d[-y-1]-d[-y-2]),l=t+(-y-2)*n):l=t+y*n}r=r>1?r:2,a=a||new Array(r);for(let u=0;u<r;++u)a[u]=l===void 0?NaN:o===void 0?e[l+u]:hi(e[l+u],e[l+n+u],o);return a}function K0(e,t,i,n,s,a){if(i==t)return null;let r;if(s<e[t+n-1])return a?(r=e.slice(t,t+n),r[n-1]=s,r):null;if(e[i-1]<s)return a?(r=e.slice(i-n,i),r[n-1]=s,r):null;if(s==e[t+n-1])return e.slice(t,t+n);let l=t/n,o=i/n;for(;l<o;){const c=l+o>>1;s<e[(c+1)*n-1]?o=c:l=c+1}const h=e[l*n-1];if(s==h)return e.slice((l-1)*n,(l-1)*n+n);const u=e[(l+1)*n-1],f=(s-h)/(u-h);r=[];for(let c=0;c<n-1;++c)r.push(hi(e[(l-1)*n+c],e[l*n+c],f));return r.push(s),r}function N7(e,t,i,n,s,a,r){if(r)return K0(e,t,i[i.length-1],n,s,a);let l;if(s<e[n-1])return a?(l=e.slice(0,n),l[n-1]=s,l):null;if(e[e.length-1]<s)return a?(l=e.slice(e.length-n),l[n-1]=s,l):null;for(let o=0,h=i.length;o<h;++o){const u=i[o];if(t!=u){if(s<e[t+n-1])return null;if(s<=e[u-1])return K0(e,t,u,n,s,!1);t=u}}return null}class dc extends bx{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Bt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)this.changeEventsKeys_.push(vt(t[i],st.CHANGE,this.changed,this))}clone(){const t=new dc(Md(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,i,n,s){if(s<La(this.getExtent(),t,i))return s;const a=this.geometries_;for(let r=0,l=a.length;r<l;++r)s=a[r].closestPointXY(t,i,n,s);return s}containsXY(t,i){const n=this.geometries_;for(let s=0,a=n.length;s<a;++s)if(n[s].containsXY(t,i))return!0;return!1}computeExtent(t){hh(t);const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)rx(t,i[n].getExtent());return t}getGeometries(){return Md(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].getType()===this.getType()?t=t.concat(i[n].getGeometriesArrayRecursive()):t.push(i[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=[],n=this.geometries_;let s=!1;for(let a=0,r=n.length;a<r;++a){const l=n[a],o=l.getSimplifiedGeometry(t);i.push(o),o!==l&&(s=!0)}return s?new dc(i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)if(i[n].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,i){const n=this.geometries_;for(let s=0,a=n.length;s<a;++s)n[s].rotate(t,i);this.changed()}scale(t,i,n){n||(n=Us(this.getExtent()));const s=this.geometries_;for(let a=0,r=s.length;a<r;++a)s[a].scale(t,i,n);this.changed()}setGeometries(t){this.setGeometriesArray(Md(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].applyTransform(t);this.changed()}translate(t,i){const n=this.geometries_;for(let s=0,a=n.length;s<a;++s)n[s].translate(t,i);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Md(e){return e.map(t=>t.clone())}class Qr extends Ga{constructor(t,i){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}appendCoordinate(t){hn(this.flatCoordinates,t),this.changed()}clone(){const t=new Qr(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,s){return s<La(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(b_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),C_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,n,s))}forEachSegment(t){return Ox(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,i){return this.layout!="XYM"&&this.layout!="XYZM"?null:(i=i!==void 0?i:!1,K0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i))}getCoordinates(){return ps(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,i){return fc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,this.stride)}getLength(){return K_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const i=[];return i.length=Kc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new Qr(i,"XY")}getType(){return"LineString"}intersectsExtent(t){return Wc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vc(this.flatCoordinates,0,t,this.stride),this.changed()}}class gc extends Ga{constructor(t,i,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,i);else if(i!==void 0&&n)this.setFlatCoordinates(i,t),this.ends_=n;else{const s=t,a=[],r=[];for(let o=0,h=s.length;o<h;++o){const u=s[o];hn(a,u.getFlatCoordinates()),r.push(a.length)}const l=s.length===0?this.getLayout():s[0].getLayout();this.setFlatCoordinates(l,a),this.ends_=r}}appendLineString(t){hn(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new gc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,n,s){return s<La(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(w_(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),T_(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,i,n,s))}getCoordinateAtM(t,i,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(i=i!==void 0?i:!1,n=n!==void 0?n:!1,N7(this.flatCoordinates,0,this.ends_,this.stride,t,i,n))}getCoordinates(){return Po(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Qr(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,i=this.ends_,n=this.layout,s=[];let a=0;for(let r=0,l=i.length;r<l;++r){const o=i[r],h=new Qr(t.slice(a,o),n);s.push(h),a=o}return s}getLength(){const t=this.ends_;let i=0,n=0;for(let s=0,a=t.length;s<a;++s)n+=K_(this.flatCoordinates,i,t[s],this.stride),i=t[s];return n}getFlatMidpoints(){const t=[],i=this.flatCoordinates;let n=0;const s=this.ends_,a=this.stride;for(let r=0,l=s.length;r<l;++r){const o=s[r],h=fc(i,n,o,a,.5);hn(t,h),n=o}return t}getSimplifiedGeometryInternal(t){const i=[],n=[];return i.length=Rx(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new gc(i,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return w5(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=ch(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class lf extends Ga{constructor(t,i){super(),i&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}appendPoint(t){hn(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new lf(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,s){if(s<La(this.getExtent(),t,i))return s;const a=this.flatCoordinates,r=this.stride;for(let l=0,o=a.length;l<o;l+=r){const h=da(t,i,a[l],a[l+1]);if(h<s){s=h;for(let u=0;u<r;++u)n[u]=a[l+u];n.length=r}}return s}getCoordinates(){return ps(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const i=this.flatCoordinates.length/this.stride;return t<0||i<=t?null:new Hr(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,i=this.layout,n=this.stride,s=[];for(let a=0,r=t.length;a<r;a+=n){const l=new Hr(t.slice(a,a+n),i);s.push(l)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const i=this.flatCoordinates,n=this.stride;for(let s=0,a=i.length;s<a;s+=n){const r=i[s],l=i[s+1];if(g_(t,r,l))return!0}return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Vc(this.flatCoordinates,0,t,this.stride),this.changed()}}class _c extends Ga{constructor(t,i,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const s=t,a=[],r=[];for(let l=0,o=s.length;l<o;++l){const h=s[l],u=a.length,f=h.getEnds();for(let c=0,d=f.length;c<d;++c)f[c]+=u;hn(a,h.getFlatCoordinates()),r.push(f)}i=s.length===0?this.getLayout():s[0].getLayout(),t=a,n=r}i!==void 0&&n?(this.setFlatCoordinates(i,t),this.endss_=n):this.setCoordinates(t,i)}appendPolygon(t){let i;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),i=t.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;hn(this.flatCoordinates,t.getFlatCoordinates()),i=t.getEnds().slice();for(let s=0,a=i.length;s<a;++s)i[s]+=n}this.endss_.push(i),this.changed()}clone(){const t=this.endss_.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=this.endss_[s].slice();const n=new _c(this.flatCoordinates.slice(),this.layout,i);return n.applyProperties(this),n}closestPointXY(t,i,n,s){return s<La(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(p5(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),v5(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,n,s))}containsXY(t,i){return b5(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,i)}getArea(){return y5(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),k0(i,0,this.endss_,this.stride,t)):i=this.flatCoordinates,U0(i,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=_S(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Ax(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new lf(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Gx(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=k0(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const i=[],n=[];return i.length=S5(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new _c(i,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let i;if(t===0)i=0;else{const a=this.endss_[t-1];i=a[a.length-1]}const n=this.endss_[t].slice(),s=n[n.length-1];if(i!==0)for(let a=0,r=n.length;a<r;++a)n[a]-=i;return new ks(this.flatCoordinates.slice(i,s),this.layout,n)}getPolygons(){const t=this.layout,i=this.flatCoordinates,n=this.endss_,s=[];let a=0;for(let r=0,l=n.length;r<l;++r){const o=n[r].slice(),h=o[o.length-1];if(a!==0)for(let f=0,c=o.length;f<c;++f)o[f]-=a;const u=new ks(i.slice(a,h),t,o);s.push(u),a=h}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return C5(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=Tx(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const s=n[n.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const cp=Wi();class ui{constructor(t,i,n,s,a,r){this.styleFunction,this.extent_,this.id_=r,this.type_=t,this.flatCoordinates_=i,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=a,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?ax(this.flatCoordinates_):__(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Us(this.getExtent());this.flatInteriorPoints_=O_(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=R5(this.flatCoordinates_,this.ends_),i=_S(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=Ax(this.flatCoordinates_,0,t,2,i)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=fc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let i=0;const n=this.ends_;for(let s=0,a=n.length;s<a;++s){const r=n[s],l=fc(t,i,r,2,.5);hn(this.flatMidpoints_,l),i=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,i){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=ie(t);const i=t.getExtent(),n=t.getWorldExtent();if(i&&n){const s=Ue(n)/Ue(i);Yn(cp,n[0],n[3],s,-s,0,0,0),Ns(this.flatCoordinates_,0,this.flatCoordinates_.length,2,cp,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new ui(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=tx((t,i)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),i&&this.simplifiedGeometry_.applyTransform(i);const n=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":n.length=Kc(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),s=[n.length];break;case"MultiLineString":s=[],n.length=Rx(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,s);break;case"Polygon":s=[],n.length=R_(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,s);break}return s&&(this.simplifiedGeometry_=new ui(this.type_,n,s,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}ui.prototype.getFlatCoordinates=ui.prototype.getOrientedFlatCoordinates;class fp{constructor(t){this.rbush_=new Bx(t),this.items_={}}insert(t,i){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};this.rbush_.insert(n),this.items_[xt(i)]=n}load(t,i){const n=new Array(i.length);for(let s=0,a=i.length;s<a;s++){const r=t[s],l=i[s],o={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:l};n[s]=o,this.items_[xt(l)]=o}this.rbush_.load(n)}remove(t){const i=xt(t),n=this.items_[i];return delete this.items_[i],this.rbush_.remove(n)!==null}update(t,i){const n=this.items_[xt(i)],s=[n.minX,n.minY,n.maxX,n.maxY];Go(s,t)||(this.remove(i),this.insert(t,i))}getAll(){return this.rbush_.all().map(function(i){return i.value})}getInExtent(t){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(i).map(function(s){return s.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,i){return this.forEach_(this.getInExtent(t),i)}forEach_(t,i){let n;for(let s=0,a=t.length;s<a;s++)if(n=i(t[s]),n)return n;return n}isEmpty(){return Ma(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const i=this.rbush_.toJSON();return Fs(i.minX,i.minY,i.maxX,i.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const i in t.items_)this.items_[i]=t.items_[i]}}class mS extends dn{constructor(t){super(),this.projection=ie(t.projection),this.attributions_=dp(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const i=this;this.viewPromise_=new Promise(function(n,s){i.viewResolver=n,i.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=dp(t),this.changed()}setState(t){this.state_=t,this.changed()}}function dp(e){return e?typeof e=="function"?e:(Array.isArray(e)||(e=[e]),t=>e):null}const bi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class ts extends Zn{constructor(t,i,n){super(t),this.feature=i,this.features=n}}class G7 extends mS{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=No,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Rt(this.format_,"`format` must be set when `url` is set"),this.loader_=up(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:O7;const i=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=i?new fp:null,this.loadedExtentsRtree_=new fp,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,s;Array.isArray(t.features)?s=t.features:t.features&&(n=t.features,s=n.getArray()),!i&&n===void 0&&(n=new Gi(s)),s!==void 0&&this.addFeaturesInternal(s),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const i=xt(t);if(!this.addToIndex_(i,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(i,t);const n=t.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new ts(bi.ADDFEATURE,t))}setupChangeEvents_(t,i){i instanceof ui||(this.featureChangeKeys_[t]=[vt(i,st.CHANGE,this.handleFeatureChange_,this),vt(i,Xr.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,i){let n=!0;if(i.getId()!==void 0){const s=String(i.getId());if(!(s in this.idIndex_))this.idIndex_[s]=i;else if(i instanceof ui){const a=this.idIndex_[s];a instanceof ui?Array.isArray(a)?a.push(i):this.idIndex_[s]=[a,i]:n=!1}else n=!1}return n&&(Rt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=i),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const i=[],n=[],s=[];for(let a=0,r=t.length;a<r;a++){const l=t[a],o=xt(l);this.addToIndex_(o,l)&&n.push(l)}for(let a=0,r=n.length;a<r;a++){const l=n[a],o=xt(l);this.setupChangeEvents_(o,l);const h=l.getGeometry();if(h){const u=h.getExtent();i.push(u),s.push(l)}else this.nullGeometryFeatures_[o]=l}if(this.featuresRtree_&&this.featuresRtree_.load(i,s),this.hasListener(bi.ADDFEATURE))for(let a=0,r=n.length;a<r;a++)this.dispatchEvent(new ts(bi.ADDFEATURE,n[a]))}bindFeaturesCollection_(t){let i=!1;this.addEventListener(bi.ADDFEATURE,function(n){i||(i=!0,t.push(n.feature),i=!1)}),this.addEventListener(bi.REMOVEFEATURE,function(n){i||(i=!0,t.remove(n.feature),i=!1)}),t.addEventListener(Ve.ADD,n=>{i||(i=!0,this.addFeature(n.element),i=!1)}),t.addEventListener(Ve.REMOVE,n=>{i||(i=!0,this.removeFeature(n.element),i=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Bt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const i=new ts(bi.CLEAR);this.dispatchEvent(i),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,i){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(s){const a=s.getGeometry();if(a instanceof ui||a.intersectsCoordinate(t))return i(s)})}forEachFeatureInExtent(t,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)}forEachFeatureIntersectingExtent(t,i){return this.forEachFeatureInExtent(t,function(n){const s=n.getGeometry();if(s instanceof ui||s.intersectsExtent(t)){const a=i(n);if(a)return a}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Ma(this.nullGeometryFeatures_)||hn(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const i=[];return this.forEachFeatureAtCoordinateDirect(t,function(n){i.push(n)}),i}getFeaturesInExtent(t,i){if(this.featuresRtree_){if(!(i&&i.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const s=cx(t,i);return[].concat(...s.map(a=>this.featuresRtree_.getInExtent(a)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,i){const n=t[0],s=t[1];let a=null;const r=[NaN,NaN];let l=1/0;const o=[-1/0,-1/0,1/0,1/0];return i=i||Lo,this.featuresRtree_.forEachInExtent(o,function(h){if(i(h)){const u=h.getGeometry(),f=l;if(l=u instanceof ui?0:u.closestPointXY(n,s,r,l),l<f){a=h;const c=Math.sqrt(l);o[0]=n-c,o[1]=s-c,o[2]=n+c,o[3]=s+c}}}),a}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const i=this.idIndex_[t.toString()];return i!==void 0?i:null}getFeatureByUid(t){const i=this.uidIndex_[t];return i!==void 0?i:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const i=t.target,n=xt(i),s=i.getGeometry();if(!s)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[n]=i);else{const r=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(r,i)):this.featuresRtree_&&this.featuresRtree_.update(r,i)}const a=i.getId();if(a!==void 0){const r=a.toString();this.idIndex_[r]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[r]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[n]=i;this.changed(),this.dispatchEvent(new ts(bi.CHANGEFEATURE,i))}hasFeature(t){const i=t.getId();return i!==void 0?i in this.idIndex_:xt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ma(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,i,n){const s=this.loadedExtentsRtree_,a=this.strategy_(t,i,n);for(let r=0,l=a.length;r<l;++r){const o=a[r];s.forEachInExtent(o,function(u){return Pl(u.extent,o)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ts(bi.FEATURESLOADSTART)),this.loader_.call(this,o,i,n,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new ts(bi.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ts(bi.FEATURESLOADERROR))}),s.insert(o,{extent:o.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const i=this.loadedExtentsRtree_,n=i.forEachInExtent(t,function(s){if(Go(s.extent,t))return s});n&&i.remove(n)}removeFeatures(t){let i=!1;for(let n=0,s=t.length;n<s;++n)i=this.removeFeatureInternal(t[n])||i;i&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const i=xt(t);if(!(i in this.uidIndex_))return!1;i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t);const n=this.featureChangeKeys_[i];n==null||n.forEach(Bt),delete this.featureChangeKeys_[i];const s=t.getId();if(s!==void 0){const a=s.toString(),r=this.idIndex_[a];r===t?delete this.idIndex_[a]:Array.isArray(r)&&(r.splice(r.indexOf(t),1),r.length===1&&(this.idIndex_[a]=r[0]))}return delete this.uidIndex_[i],this.hasListener(bi.REMOVEFEATURE)&&this.dispatchEvent(new ts(bi.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i];break}}setLoader(t){this.loader_=t}setUrl(t){Rt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(up(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}const qa=[0,0,0],es=5;class yS{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Rt(oR(this.resolutions_,(s,a)=>a-s),"`resolutions` must be sorted in descending order");let i;if(!t.origins){for(let s=0,a=this.resolutions_.length-1;s<a;++s)if(!i)i=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==i){i=void 0;break}}this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Rt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Na(n)),Rt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Rt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:P_,Rt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((s,a)=>{const r=new V_(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const l=this.getTileRangeForExtentAndZ(n,a);r.minX=Math.max(l.minX,r.minX),r.maxX=Math.min(l.maxX,r.maxX),r.minY=Math.max(l.minY,r.minY),r.maxY=Math.min(l.maxY,r.maxY)}return r}):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,i,n){const s=this.getTileRangeForExtentAndZ(t,i);for(let a=s.minX,r=s.maxX;a<=r;++a)for(let l=s.minY,o=s.maxY;l<=o;++l)n([i,a,l])}forEachTileCoordParentTileRange(t,i,n,s){let a,r,l,o=null,h=t[0]-1;for(this.zoomFactor_===2?(r=t[1],l=t[2]):o=this.getTileCoordExtent(t,s);h>=this.minZoom;){if(r!==void 0&&l!==void 0?(r=Math.floor(r/2),l=Math.floor(l/2),a=Xa(r,r,l,l,n)):a=this.getTileRangeForExtentAndZ(o,h,n),i(h,a))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,i,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const a=t[1]*2,r=t[2]*2;return Xa(a,a+1,r,r+1,i)}const s=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,i)}return null}getTileRangeForTileCoordAndZ(t,i,n){if(i>this.maxZoom||i<this.minZoom)return null;const s=t[0],a=t[1],r=t[2];if(i===s)return Xa(a,r,a,r,n);if(this.zoomFactor_){const o=Math.pow(this.zoomFactor_,i-s),h=Math.floor(a*o),u=Math.floor(r*o);if(i<s)return Xa(h,h,u,u,n);const f=Math.floor(o*(a+1))-1,c=Math.floor(o*(r+1))-1;return Xa(h,f,u,c,n)}const l=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,i,n)}getTileRangeForExtentAndZ(t,i,n){this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,qa);const s=qa[1],a=qa[2];this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,qa);const r=qa[1],l=qa[2];return Xa(s,r,a,l,n)}getTileCoordCenter(t){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=ei(this.getTileSize(t[0]),this.tmpSize_);return[i[0]+(t[1]+.5)*s[0]*n,i[1]-(t[2]+.5)*s[1]*n]}getTileCoordExtent(t,i){const n=this.getOrigin(t[0]),s=this.getResolution(t[0]),a=ei(this.getTileSize(t[0]),this.tmpSize_),r=n[0]+t[1]*a[0]*s,l=n[1]-(t[2]+1)*a[1]*s,o=r+a[0]*s,h=l+a[1]*s;return Fs(r,l,o,h,i)}getTileCoordForCoordAndResolution(t,i,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],i,!1,n)}getTileCoordForXYAndResolution_(t,i,n,s,a){const r=this.getZForResolution(n),l=n/this.getResolution(r),o=this.getOrigin(r),h=ei(this.getTileSize(r),this.tmpSize_);let u=l*(t-o[0])/n/h[0],f=l*(o[1]-i)/n/h[1];return s?(u=jh(u,es)-1,f=jh(f,es)-1):(u=zh(u,es),f=zh(f,es)),uc(r,u,f,a)}getTileCoordForXYAndZ_(t,i,n,s,a){const r=this.getOrigin(n),l=this.getResolution(n),o=ei(this.getTileSize(n),this.tmpSize_);let h=(t-r[0])/l/o[0],u=(r[1]-i)/l/o[1];return s?(h=jh(h,es)-1,u=jh(u,es)-1):(h=zh(h,es),u=zh(u,es)),uc(n,h,u,a)}getTileCoordForCoordAndZ(t,i,n){return this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,i){const n=f_(this.resolutions_,t,i||0);return Wt(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,i){return Lx(i,0,i.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const i=this.resolutions_.length,n=new Array(i);for(let s=this.minZoom;s<i;++s)n[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=n}}function pS(e){let t=e.getDefaultTileGrid();return t||(t=z7(e),e.setDefaultTileGrid(t)),t}function D7(e,t,i){const n=t[0],s=e.getTileCoordCenter(t),a=W_(i);if(!Yr(a,s)){const r=Nt(a),l=Math.ceil((a[0]-s[0])/r);return s[0]+=r*l,e.getTileCoordForCoordAndZ(s,n)}return t}function I7(e,t,i,n){n=n!==void 0?n:"top-left";const s=vS(e,t,i);return new yS({extent:e,origin:MR(e,n),resolutions:s,tileSize:i})}function P7(e){const t=e||{},i=t.extent||ie("EPSG:3857").getExtent(),n={extent:i,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:vS(i,t.maxZoom,t.tileSize,t.maxResolution)};return new yS(n)}function vS(e,t,i,n){t=t!==void 0?t:G5,i=ei(i!==void 0?i:P_);const s=Ue(e),a=Nt(e);n=n>0?n:Math.max(a/i[0],s/i[1]);const r=t+1,l=new Array(r);for(let o=0;o<r;++o)l[o]=n/Math.pow(2,o);return l}function z7(e,t,i,n){const s=W_(e);return I7(s,t,i,n)}function W_(e){e=ie(e);let t=e.getExtent();if(!t){const i=180*y_.degrees/e.getMetersPerUnit();t=Fs(-i,-i,i,i)}return t}const j7=/\{z\}/g,F7=/\{x\}/g,U7=/\{y\}/g,k7=/\{-y\}/g;function B7(e,t,i,n,s){return e.replace(j7,t.toString()).replace(F7,i.toString()).replace(U7,n.toString()).replace(k7,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-n).toString()})}function X7(e){const t=[];let i=/\{([a-z])-([a-z])\}/.exec(e);if(i){const n=i[1].charCodeAt(0),s=i[2].charCodeAt(0);let a;for(a=n;a<=s;++a)t.push(e.replace(i[0],String.fromCharCode(a)));return t}if(i=/\{(\d+)-(\d+)\}/.exec(e),i){const n=parseInt(i[2],10);for(let s=parseInt(i[1],10);s<=n;s++)t.push(e.replace(i[0],s.toString()));return t}return t.push(e),t}function Y7(e,t){return function(i,n,s){if(!i)return;let a;const r=i[0];if(t){const l=t.getFullTileRange(r);l&&(a=l.getHeight()-1)}return B7(e,r,i[1],i[2],a)}}function q7(e,t){const i=e.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Y7(e[s],t);return H7(n)}function H7(e){return e.length===1?e[0]:function(t,i,n){if(!t)return;const s=BO(t),a=ga(s,e.length);return e[a](t,i,n)}}class Z7 extends mS{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const i=[256,256];this.tileGrid&&ei(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),i),this.tmpSize=[0,0],this.key_=t.key||xt(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const i=t?this.getTileGridForProjection(t):this.tileGrid;return i?i.getResolutions():null}getTile(t,i,n,s,a,r){return $()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:pS(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,i,n){const s=this.getTileGridForProjection(n),a=this.getTilePixelRatio(i),r=ei(s.getTileSize(t),this.tmpSize);return a==1?r:TA(r,a,this.tmpSize)}getTileCoordForTileUrlFunction(t,i){const n=i!==void 0?i:this.getProjection(),s=i!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=D7(s,t,n)),YO(t,s)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class V7 extends Zn{constructor(t,i){super(t),this.tile=i}}const bd={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Q_ extends Z7{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Q_.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const i=t.target,n=xt(i),s=i.getState();let a;s==V.LOADING?(this.tileLoadingKeys_[n]=!0,a=bd.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],a=s==V.ERROR?bd.TILELOADERROR:s==V.LOADED?bd.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new V7(a,i))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,i){this.tileUrlFunction=t,typeof i<"u"?this.setKey(i):this.changed()}setUrl(t){const i=X7(t);this.urls=i,this.setUrls(i)}setUrls(t){this.urls=t;const i=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(q7(t,this.tileGrid),i):this.setKey(i)}tileUrlFunction(t,i,n){}}class K7 extends Q_{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:ES,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:rS,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!ho(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const i=this.getProjection();if(this.tileGrid&&(!i||ho(i,t)))return this.tileGrid;const n=xt(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=pS(t)),this.tileGridForProjection[n]}createTile_(t,i,n,s,a,r){const l=[t,i,n],o=this.getTileCoordForTileUrlFunction(l,a),h=o?this.tileUrlFunction(o,s,a):void 0,u=new this.tileClass(l,h!==void 0?V.IDLE:V.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=r,u.addEventListener(st.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,i,n,s,a,r){const l=this.getProjection();if(!l||!a||ho(l,a))return this.getTileInternal(t,i,n,s,l||a);const o=[t,i,n],h=this.getKey(),u=this.getTileGridForProjection(l),f=this.getTileGridForProjection(a),c=this.getTileCoordForTileUrlFunction(o,a),d=new lS(l,u,a,f,o,c,this.getTilePixelRatio(s),this.getGutter(),(g,y,v,_)=>this.getTileInternal(g,y,v,_,l,r),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=h,d}getTileInternal(t,i,n,s,a,r){const l=this.getKey(),o=gu(this,l,t,i,n);if(r&&r.containsKey(o))return r.get(o);const h=this.createTile_(t,i,n,s,a,l);return r==null||r.set(o,h),h}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,i){const n=ie(t);if(n){const s=xt(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=i)}}}function ES(e,t){if(di){const i=e.getCrossOrigin();let n="same-origin",s="same-origin";i==="anonymous"||i===""?(n="cors",s="omit"):i==="use-credentials"&&(n="cors",s="include"),fetch(t,{mode:n,credentials:s}).then(a=>{if(!a.ok)throw new Error(`HTTP ${a.status}`);return a.blob()}).then(a=>createImageBitmap(a)).then(a=>{var o;const r=e.getImage();r.width=a.width,r.height=a.height,r.getContext("2d").drawImage(a,0,0),(o=a.close)==null||o.call(a),r.dispatchEvent(new Event("load"))}).catch(()=>{e.getImage().dispatchEvent(new Event("error"))});return}e.getImage().src=t}class W7 extends K7{constructor(t){t=t||{};const i=t.projection!==void 0?t.projection:"EPSG:3857",n=t.tileGrid!==void 0?t.tileGrid:P7({extent:W_(i),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Q7='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class J7 extends W7{constructor(t){t=t||{};let i;t.attributions!==void 0?i=t.attributions:i=[Q7];const n=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",s=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:i,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:(a,r)=>{const l=a.getImage();!di&&l instanceof HTMLImageElement&&(l.referrerPolicy="origin-when-cross-origin"),(t.tileLoadFunction||ES)(a,r)},transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})}}class $7{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=rf,this.supportedMediaTypes=null}getReadOptions(t,i){if(i){let n=i.dataProjection?ie(i.dataProjection):this.readProjection(t);i.extent&&n&&n.getUnits()==="tile-pixels"&&(n=ie(n),n.setWorldExtent(i.extent)),i={dataProjection:n,featureProjection:i.featureProjection}}return this.adaptOptions(i)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return $()}readFeature(t,i){return $()}readFeatures(t,i){return $()}readGeometry(t,i){return $()}readProjection(t){return $()}writeFeature(t,i){return $()}writeFeatures(t,i){return $()}writeGeometry(t,i){return $()}}function J_(e,t,i){const n=i?ie(i.featureProjection):null,s=i?ie(i.dataProjection):null;let a=e;if(n&&s&&!ho(n,s)){t&&(a=e.clone());const r=t?n:s,l=t?s:n;r.getUnits()==="tile-pixels"?a.transform(r,l):a.applyTransform(Io(r,l))}if(t&&i&&i.decimals!==void 0){const r=Math.pow(10,i.decimals),l=function(o){for(let h=0,u=o.length;h<u;++h)o[h]=Math.round(o[h]*r)/r;return o};a===e&&(a=e.clone()),a.applyTransform(l)}return a}const t9={Point:Hr,LineString:Qr,Polygon:ks,MultiPoint:lf,MultiLineString:gc,MultiPolygon:_c};function e9(e,t,i){return Array.isArray(t[0])?(Gx(e,0,t,i)||(e=e.slice(),k0(e,0,t,i)),e):(N_(e,0,t,i)||(e=e.slice(),sc(e,0,t,i)),e)}function xS(e,t){var a;const i=e.geometry;if(!i)return[];if(Array.isArray(i))return i.map(r=>xS({...e,geometry:r})).flat();const n=i.type==="MultiPolygon"?"Polygon":i.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const s=i.layout.length;return J_(new ui(n,n==="Polygon"?e9(i.flatCoordinates,i.ends,s):i.flatCoordinates,(a=i.ends)==null?void 0:a.flat(),s,e.properties||{},e.id).enableSimplifyTransformed(),!1,t)}function $_(e,t){if(!e)return null;if(Array.isArray(e)){const n=e.map(s=>$_(s,t));return new dc(n)}const i=t9[e.type];return J_(new i(e.flatCoordinates,e.layout||"XY",e.ends),!1,t)}class i9 extends $7{constructor(){super()}getType(){return"json"}readFeature(t,i){return this.readFeatureFromObject(Vh(t),this.getReadOptions(t,i))}readFeatures(t,i){return this.readFeaturesFromObject(Vh(t),this.getReadOptions(t,i))}readFeatureFromObject(t,i){return $()}readFeaturesFromObject(t,i){return $()}readGeometry(t,i){return this.readGeometryFromObject(Vh(t),this.getReadOptions(t,i))}readGeometryFromObject(t,i){return $()}readProjection(t){return this.readProjectionFromObject(Vh(t))}readProjectionFromObject(t){return $()}writeFeature(t,i){return JSON.stringify(this.writeFeatureObject(t,i))}writeFeatureObject(t,i){return $()}writeFeatures(t,i){return JSON.stringify(this.writeFeaturesObject(t,i))}writeFeaturesObject(t,i){return $()}writeGeometry(t,i){return JSON.stringify(this.writeGeometryObject(t,i))}writeGeometryObject(t,i){return $()}}function Vh(e){if(typeof e=="string"){const t=JSON.parse(e);return t||null}return e!==null?e:null}class gp extends i9{constructor(t){t=t||{},super(),this.dataProjection=ie(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=ie(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,i){let n=null;t.type==="Feature"?n=t:n={type:"Feature",geometry:t,properties:null};const s=tm(n.geometry);if(this.featureClass===ui)return xS({geometry:s,id:n.id,properties:n.properties},i);const a=new rf;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&a.setGeometryName(n.geometry_name),a.setGeometry($_(s,i)),"id"in n&&a.setId(n.id),n.properties&&a.setProperties(n.properties,!0),a}readFeaturesFromObject(t,i){const n=t;let s=null;if(n.type==="FeatureCollection"){const a=t;s=[];const r=a.features;for(let l=0,o=r.length;l<o;++l){const h=this.readFeatureFromObject(r[l],i);h&&s.push(h)}}else s=[this.readFeatureFromObject(t,i)];return s.flat()}readGeometryFromObject(t,i){return n9(t,i)}readProjectionFromObject(t){const i=t.crs;let n;if(i)if(i.type=="name")n=ie(i.properties.name);else if(i.type==="EPSG")n=ie("EPSG:"+i.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(t,i){i=this.adaptOptions(i);const n={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(n.id=s),!t.hasProperties())return n;const a=t.getProperties(),r=t.getGeometry();return r&&(n.geometry=W0(r,i),delete a[t.getGeometryName()]),Ma(a)||(n.properties=a),n}writeFeaturesObject(t,i){i=this.adaptOptions(i);const n=[];for(let s=0,a=t.length;s<a;++s)n.push(this.writeFeatureObject(t[s],i));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,i){return W0(t,this.adaptOptions(i))}}function tm(e,t){if(!e)return null;let i;switch(e.type){case"Point":{i=a9(e);break}case"LineString":{i=r9(e);break}case"Polygon":{i=u9(e);break}case"MultiPoint":{i=o9(e);break}case"MultiLineString":{i=l9(e);break}case"MultiPolygon":{i=h9(e);break}case"GeometryCollection":{i=s9(e);break}default:throw new Error("Unsupported GeoJSON type: "+e.type)}return i}function n9(e,t){const i=tm(e);return $_(i,t)}function s9(e,t){return e.geometries.map(function(n){return tm(n)})}function a9(e){const t=e.coordinates;return{type:"Point",flatCoordinates:t,layout:Da(t.length)}}function r9(e){var n;const t=e.coordinates,i=t.flat();return{type:"LineString",flatCoordinates:i,ends:[i.length],layout:Da(((n=t[0])==null?void 0:n.length)||2)}}function l9(e){var a,r;const t=e.coordinates,i=((r=(a=t[0])==null?void 0:a[0])==null?void 0:r.length)||2,n=[],s=ch(n,0,t,i);return{type:"MultiLineString",flatCoordinates:n,ends:s,layout:Da(i)}}function o9(e){var i;const t=e.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:Da(((i=t[0])==null?void 0:i.length)||2)}}function h9(e){var a,r;const t=e.coordinates,i=[],n=((r=(a=t[0])==null?void 0:a[0])==null?void 0:r[0].length)||2,s=Tx(i,0,t,n);return{type:"MultiPolygon",flatCoordinates:i,ends:s,layout:Da(n)}}function u9(e){var a,r;const t=e.coordinates,i=[],n=(r=(a=t[0])==null?void 0:a[0])==null?void 0:r.length,s=ch(i,0,t,n);return{type:"Polygon",flatCoordinates:i,ends:s,layout:Da(n)}}function W0(e,t){e=J_(e,!0,t);const i=e.getType();let n;switch(i){case"Point":{n=m9(e);break}case"LineString":{n=f9(e);break}case"Polygon":{n=y9(e,t);break}case"MultiPoint":{n=g9(e);break}case"MultiLineString":{n=d9(e);break}case"MultiPolygon":{n=_9(e,t);break}case"GeometryCollection":{n=c9(e,t);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+i)}return n}function c9(e,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(n){return W0(n,t)})}}function f9(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function d9(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function g9(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function _9(e,t){let i;return t&&(i=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(i)}}function m9(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function y9(e,t){let i;return t&&(i=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(i)}}const p9=e=>{if(!e)return new jn({image:new Wr({radius:6,fill:new Vi({color:"#3b82f6"}),stroke:new Rn({color:"#fff",width:2})}),fill:new Vi({color:"rgba(59, 130, 246, 0.5)"}),stroke:new Rn({color:"#3b82f6",width:2})});const t=e.opacity!==void 0?e.opacity:1,i=(a,r)=>{if(!a)return`rgba(0,0,0,${r})`;let l=0,o=0,h=0;return a.length===4?(l=parseInt(a[1]+a[1],16),o=parseInt(a[2]+a[2],16),h=parseInt(a[3]+a[3],16)):a.length===7&&(l=parseInt(a[1]+a[2],16),o=parseInt(a[3]+a[4],16),h=parseInt(a[5]+a[6],16)),`rgba(${l},${o},${h},${r})`};let n;e.iconType==="icon"&&e.iconUrl?n=new gh({src:e.iconUrl,scale:(e.radius||6)/10,color:e.color,opacity:t}):n=new Wr({radius:e.radius||6,fill:new Vi({color:i(e.color||"#3b82f6",t)}),stroke:new Rn({color:"#fff",width:2})});let s;if(e.labelField){let a="center",r="middle",l=0,o=0;const h=e.labelPlacement||"top-right",u=12;switch(h){case"center":break;case"top":r="bottom",o=-u;break;case"bottom":r="top",o=u;break;case"left":a="right",l=-u;break;case"right":a="left",l=u;break;case"top-right":a="left",r="bottom",l=u,o=-u;break;case"top-left":a="right",r="bottom",l=-u,o=-u;break;case"bottom-right":a="left",r="top",l=u,o=u;break;case"bottom-left":a="right",r="top",l=-u,o=u;break}s=new nf({text:"Label",font:"12px sans-serif",overflow:!0,fill:new Vi({color:"#000"}),stroke:new Rn({color:"#fff",width:3}),textAlign:a,textBaseline:r,offsetX:l,offsetY:o})}return new jn({image:n,fill:new Vi({color:i(e.fillColor||e.color||"#3b82f6",(e.fillOpacity!==void 0?e.fillOpacity:.5)*t)}),stroke:new Rn({color:i(e.borderColor||e.color||"#3b82f6",t),width:e.borderWidth||2}),text:s})},v9=(e,t)=>{const i=p9(t);if(t&&t.labelField){const n=e.get(t.labelField);i.getText()&&i.getText().setText(n?String(n):"")}return i},E9=()=>{const e=dt.useRef(null),t=dt.useRef(null),i=dt.useRef({}),[n,s]=Tl.useState(!1),{layers:a,selectLayer:r,selectFeature:l,selectedLayerId:o,mapViewState:h,setMapViewState:u,zoomToLayerId:f,triggerZoomToLayer:c}=br();dt.useEffect(()=>{if(!e.current)return;const g=h.center||a5([-46.6333,-23.5505]),y=h.zoom||12;return t.current=new OO({target:e.current,layers:[new QO({source:new J7,zIndex:0})],view:new en({center:g,zoom:y}),controls:Ix({zoom:!1,rotate:!1,attribution:!1})}),t.current.on("click",v=>{const{interactionMode:_,targetLayerId:m,setInteractionMode:p,addFeatureToLayer:E}=br.getState();if(_==="addPoint"&&m){const[T,b]=r5(v.coordinate),x={type:"Feature",properties:{id:crypto.randomUUID(),addedAt:new Date().toISOString()},geometry:{type:"Point",coordinates:[T,b]}};E(m,x),p("default");return}const M=t.current.forEachFeatureAtPixel(v.pixel,(T,b)=>({feature:T,layer:b}));if(M){const T=M.layer.get("id"),b=M.feature.getProperties();r(T),l({id:M.feature.getId()||Math.random(),properties:b})}else l(null)}),t.current.on("moveend",()=>{const v=t.current.getView();u({center:v.getCenter(),zoom:v.getZoom()})}),s(!0),()=>{t.current&&(t.current.setTarget(null),t.current=null,s(!1))}},[]),dt.useEffect(()=>{if(!f||!t.current||!n)return;const g=i.current[f];if(g){const y=g.getSource();if(y&&y.getFeatures().length>0){const v=y.getExtent();t.current.getView().fit(v,{padding:[50,50,50,50],duration:1e3,maxZoom:16})}}c(null)},[f,n]),dt.useEffect(()=>{if(!t.current||!n)return;const g=t.current,y=Object.keys(i.current),v=a.map(_=>_.id);y.forEach(_=>{v.includes(_)||(g.removeLayer(i.current[_]),delete i.current[_])}),a.forEach((_,m)=>{let p=i.current[_.id];if(!p)try{const E=new G7({features:new gp().readFeatures(_.source,{featureProjection:"EPSG:3857"})});p=new T7({source:E,zIndex:m+1}),p.set("id",_.id),p.set("sourceRef",_.source),g.addLayer(p),i.current[_.id]=p}catch(E){console.error("Failed to create layer:",_.name,E)}if(p&&(p.setVisible(_.visible),p.setZIndex(m+1),p.setStyle(E=>v9(E,_.style)),p.get("sourceRef")!==_.source)){const E=p.getSource(),M=new gp().readFeatures(_.source,{featureProjection:"EPSG:3857"});E.clear(),E.addFeatures(M),p.set("sourceRef",_.source)}})},[a,n]);const{interactionMode:d}=br();return C.jsx("div",{ref:e,className:`w-full h-full bg-gray-200 ${d==="addPoint"?"cursor-crosshair":""}`})};function x9(){const{selectedLayerId:e}=br();return C.jsxs("div",{className:"flex h-screen w-screen overflow-hidden bg-gray-100",children:[C.jsx(nR,{}),C.jsx("div",{className:"flex-1 relative",children:C.jsx(E9,{})}),e&&C.jsx(sR,{})]})}Mb.createRoot(document.getElementById("root")).render(C.jsx(dt.StrictMode,{children:C.jsx(x9,{})}));
